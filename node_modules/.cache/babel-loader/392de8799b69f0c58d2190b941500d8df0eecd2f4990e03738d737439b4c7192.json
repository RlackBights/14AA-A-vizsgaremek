{"ast":null,"code":"import _defineProperty from \"C:/Users/Levi/Documents/szakdoga/vizsgaremek/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _classCallCheck from \"C:/Users/Levi/Documents/szakdoga/vizsgaremek/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Levi/Documents/szakdoga/vizsgaremek/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { parse, format, resolve } from 'url';\nimport * as http from 'http';\nimport { STATUS_CODES } from 'http';\nimport * as https from 'https';\nimport * as zlib from 'zlib';\nimport Stream, { PassThrough } from 'stream';\nimport { convert } from 'encoding';\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n// (MIT licensed)\nvar BUFFER = Symbol('buffer');\nvar TYPE = Symbol('type');\nvar CLOSED = Symbol('closed');\nvar Blob = /*#__PURE__*/function () {\n  function Blob() {\n    _classCallCheck(this, Blob);\n    Object.defineProperty(this, Symbol.toStringTag, {\n      value: 'Blob',\n      writable: false,\n      enumerable: false,\n      configurable: true\n    });\n    this[CLOSED] = false;\n    this[TYPE] = '';\n    var blobParts = arguments[0];\n    var options = arguments[1];\n    var buffers = [];\n    if (blobParts) {\n      var a = blobParts;\n      var length = Number(a.length);\n      for (var i = 0; i < length; i++) {\n        var element = a[i];\n        var buffer = void 0;\n        if (element instanceof Buffer) {\n          buffer = element;\n        } else if (ArrayBuffer.isView(element)) {\n          buffer = Buffer.from(new Uint8Array(element.buffer, element.byteOffset, element.byteLength));\n        } else if (element instanceof ArrayBuffer) {\n          buffer = Buffer.from(new Uint8Array(element));\n        } else if (element instanceof Blob) {\n          buffer = element[BUFFER];\n        } else {\n          buffer = Buffer.from(typeof element === 'string' ? element : String(element));\n        }\n        buffers.push(buffer);\n      }\n    }\n    this[BUFFER] = Buffer.concat(buffers);\n    var type = options && options.type !== undefined && String(options.type).toLowerCase();\n    if (type && !/[^\\u0020-\\u007E]/.test(type)) {\n      this[TYPE] = type;\n    }\n  }\n  _createClass(Blob, [{\n    key: \"size\",\n    get: function get() {\n      return this[CLOSED] ? 0 : this[BUFFER].length;\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this[TYPE];\n    }\n  }, {\n    key: \"isClosed\",\n    get: function get() {\n      return this[CLOSED];\n    }\n  }, {\n    key: \"slice\",\n    value: function slice() {\n      var size = this.size;\n      var start = arguments[0];\n      var end = arguments[1];\n      var relativeStart, relativeEnd;\n      if (start === undefined) {\n        relativeStart = 0;\n      } else if (start < 0) {\n        relativeStart = Math.max(size + start, 0);\n      } else {\n        relativeStart = Math.min(start, size);\n      }\n      if (end === undefined) {\n        relativeEnd = size;\n      } else if (end < 0) {\n        relativeEnd = Math.max(size + end, 0);\n      } else {\n        relativeEnd = Math.min(end, size);\n      }\n      var span = Math.max(relativeEnd - relativeStart, 0);\n      var buffer = this[BUFFER];\n      var slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n      var blob = new Blob([], {\n        type: arguments[2]\n      });\n      blob[BUFFER] = slicedBuffer;\n      blob[CLOSED] = this[CLOSED];\n      return blob;\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this[CLOSED] = true;\n    }\n  }]);\n  return Blob;\n}();\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n  value: 'BlobPrototype',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param {string} message Error message for human\n * @param {string} type Error type for machine\n * @param {string} systemError For Node.js system error\n * @return {FetchError}\n */\nvar netErrorMap = {\n  ERR_CONNECTION_REFUSED: 'ECONNREFUSED',\n  ERR_EMPTY_RESPONSE: 'ECONNRESET',\n  ERR_NAME_NOT_RESOLVED: 'ENOTFOUND',\n  ERR_CONTENT_DECODING_FAILED: 'Z_DATA_ERROR',\n  ERR_CONTENT_DECODING_INIT_FAILED: 'Z_DATA_ERROR'\n};\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n  var regex = /^.*net::(.*)/;\n  if (regex.test(message)) {\n    var errorCode = regex.exec(message)[1]; // istanbul ignore else\n\n    if (Object.prototype.hasOwnProperty.call(netErrorMap, errorCode)) errorCode = netErrorMap[errorCode];\n    systemError = {\n      code: errorCode\n    };\n  }\n  this.message = message;\n  this.type = type; // when err.type is `system`, err.code contains system error code\n\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  } // hide custom error implementation details from end-users\n\n  Error.captureStackTrace(this, this.constructor);\n}\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\nvar DISTURBED = Symbol('disturbed');\n/**\n * Body class\n *\n * Cannot use ES6 class because Body must be called with .call().\n *\n * @param {Stream|string|Blob|Buffer|null} body Readable stream\n * @param {number} size\n * @param {number} timeout\n */\n\nfunction Body(body) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    _ref$size = _ref.size,\n    size = _ref$size === void 0 ? 0 : _ref$size,\n    _ref$timeout = _ref.timeout,\n    timeout = _ref$timeout === void 0 ? 0 : _ref$timeout;\n  if (body == null) {\n    // body is undefined or null\n    body = null;\n  } else if (typeof body === 'string') ;else if (body instanceof Blob) ;else if (Buffer.isBuffer(body)) ;else if (body instanceof Stream) ;else {\n    // none of the above\n    // coerce to string\n    body = String(body);\n  }\n  this.body = body;\n  this[DISTURBED] = false;\n  this.size = size;\n  this.timeout = timeout;\n}\nBody.prototype = {\n  get bodyUsed() {\n    return this[DISTURBED];\n  },\n  /**\n   * Decode response as ArrayBuffer\n   *\n   * @return {Promise}\n   */\n  arrayBuffer: function arrayBuffer() {\n    return consumeBody.call(this).then(function (buf) {\n      return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n    });\n  },\n  /**\n   * Return raw response as Blob\n   *\n   * @return {Promise}\n   */\n  blob: function blob() {\n    var ct = this.headers && this.headers.get('content-type') || '';\n    return consumeBody.call(this).then(function (buf) {\n      return Object.assign(\n      // Prevent copying\n      new Blob([], {\n        type: ct.toLowerCase()\n      }), _defineProperty({}, BUFFER, buf));\n    });\n  },\n  /**\n   * Decode response as json\n   *\n   * @return {Promise}\n   */\n  json: function json() {\n    return consumeBody.call(this).then(function (buffer) {\n      return JSON.parse(buffer.toString());\n    });\n  },\n  /**\n   * Decode response as text\n   *\n   * @return {Promise}\n   */\n  text: function text() {\n    return consumeBody.call(this).then(function (buffer) {\n      return buffer.toString();\n    });\n  },\n  /**\n   * Decode response as buffer (non-spec api)\n   *\n   * @return {Promise}\n   */\n  buffer: function buffer() {\n    return consumeBody.call(this);\n  },\n  /**\n   * Decode response as text, while automatically detecting the encoding and\n   * trying to decode to UTF-8 (non-spec api)\n   *\n   * @return {Promise}\n   */\n  textConverted: function textConverted() {\n    var _this = this;\n    return consumeBody.call(this).then(function (buffer) {\n      return convertBody(buffer, _this.headers);\n    });\n  }\n};\nBody.mixIn = function (proto) {\n  for (var _iterator = _createForOfIteratorHelperLoose(Object.getOwnPropertyNames(Body.prototype)), _step; !(_step = _iterator()).done;) {\n    var name = _step.value;\n\n    // istanbul ignore else\n    if (!(name in proto)) {\n      var desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n      Object.defineProperty(proto, name, desc);\n    }\n  }\n};\n/**\n * Decode buffers into utf-8 string\n *\n * @return {Promise}\n */\n\nfunction consumeBody() {\n  var _this2 = this;\n  if (this[DISTURBED]) {\n    return Promise.reject(new Error(\"body used already for: \".concat(this.url)));\n  }\n  this[DISTURBED] = true; // body is null\n\n  if (this.body === null) {\n    return Promise.resolve(Buffer.alloc(0));\n  } // body is string\n\n  if (typeof this.body === 'string') {\n    return Promise.resolve(Buffer.from(this.body));\n  } // body is blob\n\n  if (this.body instanceof Blob) {\n    return Promise.resolve(this.body[BUFFER]);\n  } // body is buffer\n\n  if (Buffer.isBuffer(this.body)) {\n    return Promise.resolve(this.body);\n  } // istanbul ignore if: should never happen\n\n  if (!(this.body instanceof Stream)) {\n    return Promise.resolve(Buffer.alloc(0));\n  } // body is stream\n  // get ready to actually consume the body\n\n  var accum = [];\n  var accumBytes = 0;\n  var abort = false;\n  return new Promise(function (resolve, reject) {\n    var resTimeout; // allow timeout on slow response body\n\n    if (_this2.timeout) {\n      resTimeout = setTimeout(function () {\n        abort = true;\n        reject(new FetchError(\"Response timeout while trying to fetch \".concat(_this2.url, \" (over \").concat(_this2.timeout, \"ms)\"), 'body-timeout'));\n        _this2.body.emit('cancel-request');\n      }, _this2.timeout);\n    } // handle stream error, such as incorrect content-encoding\n\n    _this2.body.on('error', function (err) {\n      reject(new FetchError(\"Invalid response body while trying to fetch \".concat(_this2.url, \": \").concat(err.message), 'system', err));\n    });\n    _this2.body.on('data', function (chunk) {\n      if (abort || chunk === null) {\n        return;\n      }\n      if (_this2.size && accumBytes + chunk.length > _this2.size) {\n        abort = true;\n        reject(new FetchError(\"content size at \".concat(_this2.url, \" over limit: \").concat(_this2.size), 'max-size'));\n        _this2.body.emit('cancel-request');\n        return;\n      }\n      accumBytes += chunk.length;\n      accum.push(chunk);\n    });\n    _this2.body.on('end', function () {\n      if (abort) {\n        return;\n      }\n      clearTimeout(resTimeout);\n      resolve(Buffer.concat(accum));\n    });\n  });\n}\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param {Buffer} buffer   Incoming buffer\n * @param {Headers} headers\n * @return {string}\n */\n\nfunction convertBody(buffer, headers) {\n  var ct = headers.get('content-type');\n  var charset = 'utf-8';\n  var res; // header\n\n  if (ct) {\n    res = /charset=([^;]*)/i.exec(ct);\n  } // no charset in content type, peek at response body for at most 1024 bytes\n\n  var str = buffer.slice(0, 1024).toString(); // html5\n\n  if (!res && str) {\n    res = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n  } // html4\n\n  if (!res && str) {\n    res = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n    if (res) {\n      res = /charset=(.*)/i.exec(res.pop());\n    }\n  } // xml\n\n  if (!res && str) {\n    res = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n  } // found charset\n\n  if (res) {\n    charset = res.pop(); // prevent decode issues when sites use incorrect encoding\n    // ref: https://hsivonen.fi/encoding-menu/\n\n    if (charset === 'gb2312' || charset === 'gbk') {\n      charset = 'gb18030';\n    }\n  } // turn raw buffers into a single utf-8 buffer\n\n  return convert(buffer, 'UTF-8', charset).toString();\n}\n/**\n * Clone body given Res/Req instance\n *\n * @param {Response|Request} instance Response or Request instance\n * @return {string|Blob|Buffer|Stream}\n */\n\nfunction _clone(instance) {\n  var p1, p2;\n  var body = instance.body; // don't allow cloning a used body\n\n  if (instance.bodyUsed) {\n    throw new Error('cannot clone body after it is used');\n  } // check that body is a stream and not form-data object\n  // note: we can't clone the form-data object without having it as a dependency\n\n  if (body instanceof Stream && typeof body.getBoundary !== 'function') {\n    // tee instance body\n    p1 = new PassThrough();\n    p2 = new PassThrough();\n    body.pipe(p1);\n    body.pipe(p2); // set instance body to teed body and return the other teed body\n\n    instance.body = p1;\n    body = p2;\n  }\n  return body;\n}\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present and non-null.\n *\n * @param {Response|Request} instance Response or Request instance\n */\n\nfunction extractContentType(instance) {\n  var body = instance.body; // istanbul ignore if: Currently, because of a guard in Request, body\n  // can never be null. Included here for completeness.\n\n  if (body === null) {\n    // body is null\n    return null;\n  } else if (typeof body === 'string') {\n    // body is string\n    return 'text/plain;charset=UTF-8';\n  } else if (body instanceof Blob) {\n    // body is blob\n    return body.type || null;\n  } else if (Buffer.isBuffer(body)) {\n    // body is buffer\n    return null;\n  } else if (typeof body.getBoundary === 'function') {\n    // detect form data input from form-data module\n    return \"multipart/form-data;boundary=\".concat(body.getBoundary());\n  } else {\n    // body is stream\n    // can't really do much about this\n    return null;\n  }\n}\nfunction getTotalBytes(instance) {\n  var body = instance.body; // istanbul ignore if: included for completion\n\n  if (body === null) {\n    // body is null\n    return 0;\n  } else if (typeof body === 'string') {\n    // body is string\n    return Buffer.byteLength(body);\n  } else if (body instanceof Blob) {\n    // body is blob\n    return body.size;\n  } else if (Buffer.isBuffer(body)) {\n    // body is buffer\n    return body.length;\n  } else if (body && typeof body.getLengthSync === 'function') {\n    // detect form data input from form-data module\n    // istanbul ignore next\n    if (body._lengthRetrievers && body._lengthRetrievers.length === 0 ||\n    // 1.x\n    body.hasKnownLength && body.hasKnownLength()) {\n      // 2.x\n      return body.getLengthSync();\n    }\n    return null;\n  } else {\n    // body is stream\n    // can't really do much about this\n    return null;\n  }\n}\nfunction writeToStream(dest, instance) {\n  var body = instance.body;\n  if (body === null) {\n    // body is null\n    dest.end();\n  } else if (typeof body === 'string') {\n    // body is string\n    dest.write(body);\n    dest.end();\n  } else if (body instanceof Blob) {\n    // body is blob\n    dest.write(body[BUFFER]);\n    dest.end();\n  } else if (Buffer.isBuffer(body)) {\n    // body is buffer\n    dest.write(body);\n    dest.end();\n  } else {\n    // body is stream\n    if (instance.useElectronNet) {\n      dest.chunkedEncoding = instance.chunkedEncoding; // Force a first write to start the request otherwise an empty body stream\n      // will cause an error when closing the dest stream with Electron v7.\n\n      dest.write('');\n    }\n    body.pipe(new PassThrough()) // I have to put a PassThrough because somehow, FormData streams are not eaten by electron/net\n    .pipe(dest);\n  }\n}\n\n/**\n * A set of utilities borrowed from Node.js' _http_common.js\n */\n\n/**\n * Verifies that the given val is a valid HTTP token\n * per the rules defined in RFC 7230\n * See https://tools.ietf.org/html/rfc7230#section-3.2.6\n *\n * Allowed characters in an HTTP token:\n * ^_`a-z  94-122\n * A-Z     65-90\n * -       45\n * 0-9     48-57\n * !       33\n * #$%&'   35-39\n * *+      42-43\n * .       46\n * |       124\n * ~       126\n *\n * This implementation of checkIsHttpToken() loops over the string instead of\n * using a regular expression since the former is up to 180% faster with v8 4.9\n * depending on the string length (the shorter the string, the larger the\n * performance difference)\n *\n * Additionally, checkIsHttpToken() is currently designed to be inlinable by v8,\n * so take care when making changes to the implementation so that the source\n * code size does not exceed v8's default max_inlined_source_size setting.\n **/\n// istanbul ignore next\nfunction isValidTokenChar(ch) {\n  if (ch >= 94 && ch <= 122) {\n    return true;\n  }\n  if (ch >= 65 && ch <= 90) {\n    return true;\n  }\n  if (ch === 45) {\n    return true;\n  }\n  if (ch >= 48 && ch <= 57) {\n    return true;\n  }\n  if (ch === 34 || ch === 40 || ch === 41 || ch === 44) {\n    return false;\n  }\n  if (ch >= 33 && ch <= 46) {\n    return true;\n  }\n  if (ch === 124 || ch === 126) {\n    return true;\n  }\n  return false;\n} // istanbul ignore next\n\nfunction checkIsHttpToken(val) {\n  if (typeof val !== 'string' || val.length === 0) {\n    return false;\n  }\n  if (!isValidTokenChar(val.charCodeAt(0))) {\n    return false;\n  }\n  var len = val.length;\n  if (len > 1) {\n    if (!isValidTokenChar(val.charCodeAt(1))) {\n      return false;\n    }\n    if (len > 2) {\n      if (!isValidTokenChar(val.charCodeAt(2))) {\n        return false;\n      }\n      if (len > 3) {\n        if (!isValidTokenChar(val.charCodeAt(3))) {\n          return false;\n        }\n        for (var i = 4; i < len; i++) {\n          if (!isValidTokenChar(val.charCodeAt(i))) {\n            return false;\n          }\n        }\n      }\n    }\n  }\n  return true;\n}\n/**\n * True if val contains an invalid field-vchar\n *  field-value    = *( field-content / obs-fold )\n *  field-content  = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n *  field-vchar    = VCHAR / obs-text\n *\n * checkInvalidHeaderChar() is currently designed to be inlinable by v8,\n * so take care when making changes to the implementation so that the source\n * code size does not exceed v8's default max_inlined_source_size setting.\n **/\n// istanbul ignore next\n\nfunction checkInvalidHeaderChar(val) {\n  val += '';\n  if (val.length < 1) {\n    return false;\n  }\n  var c = val.charCodeAt(0);\n  if (c <= 31 && c !== 9 || c > 255 || c === 127) {\n    return true;\n  }\n  if (val.length < 2) {\n    return false;\n  }\n  c = val.charCodeAt(1);\n  if (c <= 31 && c !== 9 || c > 255 || c === 127) {\n    return true;\n  }\n  if (val.length < 3) {\n    return false;\n  }\n  c = val.charCodeAt(2);\n  if (c <= 31 && c !== 9 || c > 255 || c === 127) {\n    return true;\n  }\n  for (var i = 3; i < val.length; ++i) {\n    c = val.charCodeAt(i);\n    if (c <= 31 && c !== 9 || c > 255 || c === 127) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction sanitizeName(name) {\n  name += '';\n  if (!checkIsHttpToken(name)) {\n    throw new TypeError(\"\".concat(name, \" is not a legal HTTP header name\"));\n  }\n  return name.toLowerCase();\n}\nfunction sanitizeValue(value) {\n  value += '';\n  if (checkInvalidHeaderChar(value)) {\n    throw new TypeError(\"\".concat(value, \" is not a legal HTTP header value\"));\n  }\n  return value;\n}\nvar MAP = Symbol('map');\nvar Headers = /*#__PURE__*/function (_Symbol$iterator) {\n  /**\n   * Headers class\n   *\n   * @param {Object} init Response headers\n   */\n  function Headers() {\n    var init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n    _classCallCheck(this, Headers);\n    this[MAP] = Object.create(null); // We don't worry about converting prop to ByteString here as append()\n    // will handle it.\n\n    if (init == null) ;else if (typeof init === 'object') {\n      var method = init[Symbol.iterator];\n      if (method != null) {\n        if (typeof method !== 'function') {\n          throw new TypeError('Header pairs must be iterable');\n        } // sequence<sequence<ByteString>>\n        // Note: per spec we have to first exhaust the lists then process them\n\n        var pairs = [];\n        for (var _iterator = _createForOfIteratorHelperLoose(init), _step; !(_step = _iterator()).done;) {\n          var pair = _step.value;\n          if (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n            throw new TypeError('Each header pair must be iterable');\n          }\n          pairs.push(Array.from(pair));\n        }\n        for (var _i = 0, _pairs = pairs; _i < _pairs.length; _i++) {\n          var _pair = _pairs[_i];\n          if (_pair.length !== 2) {\n            throw new TypeError('Each header pair must be a name/value tuple');\n          }\n          this.append(_pair[0], _pair[1]);\n        }\n      } else {\n        // record<ByteString, ByteString>\n        for (var _i2 = 0, _Object$keys = Object.keys(init); _i2 < _Object$keys.length; _i2++) {\n          var key = _Object$keys[_i2];\n          var value = init[key];\n          this.append(key, value);\n        }\n      }\n    } else {\n      throw new TypeError('Provided initializer must be an object');\n    }\n    Object.defineProperty(this, Symbol.toStringTag, {\n      value: 'Headers',\n      writable: false,\n      enumerable: false,\n      configurable: true\n    });\n  }\n  /**\n   * Return first header value given name\n   *\n   * @param {string} name Header name\n   * @return {string}\n   */\n  _createClass(Headers, [{\n    key: \"get\",\n    value: function get(name) {\n      var list = this[MAP][sanitizeName(name)];\n      if (!list) {\n        return null;\n      }\n      return list.join(',');\n    }\n    /**\n     * Iterate over all headers\n     *\n     * @param {function} callback Executed for each item with parameters (value, name, thisArg)\n     * @param {boolean} thisArg `this` context for callback function\n     */\n  }, {\n    key: \"forEach\",\n    value: function forEach(callback) {\n      var thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n      var pairs = getHeaderPairs(this);\n      var i = 0;\n      while (i < pairs.length) {\n        var _pairs$i = pairs[i],\n          name = _pairs$i[0],\n          value = _pairs$i[1];\n        callback.call(thisArg, value, name, this);\n        pairs = getHeaderPairs(this);\n        i++;\n      }\n    }\n    /**\n     * Overwrite header values given name\n     *\n     * @param {string} name Header name\n     * @param {string|Array.<string|*>|*} value Header value\n     */\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      this[MAP][sanitizeName(name)] = [sanitizeValue(value)];\n    }\n    /**\n     * Append a value onto existing header\n     *\n     * @param {string} name Header name\n     * @param {string|Array.<string|*>|*} value Header value\n     */\n  }, {\n    key: \"append\",\n    value: function append(name, value) {\n      if (!this.has(name)) {\n        this.set(name, value);\n        return;\n      }\n      this[MAP][sanitizeName(name)].push(sanitizeValue(value));\n    }\n    /**\n     * Check for header name existence\n     *\n     * @param {string} name Header name\n     * @return {boolean}\n     */\n  }, {\n    key: \"has\",\n    value: function has(name) {\n      return !!this[MAP][sanitizeName(name)];\n    }\n    /**\n     * Delete all header values given name\n     *\n     * @param {string} name Header name\n     */\n  }, {\n    key: \"delete\",\n    value: function _delete(name) {\n      delete this[MAP][sanitizeName(name)];\n    }\n    /**\n     * Return raw headers (non-spec api)\n     *\n     * @return {Object}\n     */\n  }, {\n    key: \"raw\",\n    value: function raw() {\n      return this[MAP];\n    }\n    /**\n     * Get an iterator on keys.\n     *\n     * @return {Iterator}\n     */\n  }, {\n    key: \"keys\",\n    value: function keys() {\n      return createHeadersIterator(this, 'key');\n    }\n    /**\n     * Get an iterator on values.\n     *\n     * @return {Iterator}\n     */\n  }, {\n    key: \"values\",\n    value: function values() {\n      return createHeadersIterator(this, 'value');\n    }\n    /**\n     * Get an iterator on entries.\n     *\n     * This is the default iterator of the Headers object.\n     *\n     * @return {Iterator}\n     */\n  }, {\n    key: _Symbol$iterator,\n    value: function value() {\n      return createHeadersIterator(this, 'key+value');\n    }\n  }]);\n  return Headers;\n}(Symbol.iterator);\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n  value: 'HeadersPrototype',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\nfunction getHeaderPairs(headers, kind) {\n  if (kind === 'key') return Object.keys(headers[MAP]).sort().map(function (k) {\n    return [k];\n  });\n  var pairs = [];\n  for (var _iterator2 = _createForOfIteratorHelperLoose(Object.keys(headers[MAP]).sort()), _step2; !(_step2 = _iterator2()).done;) {\n    var key = _step2.value;\n    for (var _iterator3 = _createForOfIteratorHelperLoose(headers[MAP][key]), _step3; !(_step3 = _iterator3()).done;) {\n      var value = _step3.value;\n      pairs.push([key, value]);\n    }\n  }\n  return pairs;\n}\nvar INTERNAL = Symbol('internal');\nfunction createHeadersIterator(target, kind) {\n  var iterator = Object.create(HeadersIteratorPrototype);\n  iterator[INTERNAL] = {\n    target: target,\n    kind: kind,\n    index: 0\n  };\n  return iterator;\n}\nvar HeadersIteratorPrototype = Object.setPrototypeOf({\n  next: function next() {\n    // istanbul ignore if\n    if (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n      throw new TypeError('Value of `this` is not a HeadersIterator');\n    }\n    var _this$INTERNAL = this[INTERNAL],\n      target = _this$INTERNAL.target,\n      kind = _this$INTERNAL.kind,\n      index = _this$INTERNAL.index;\n    var values = getHeaderPairs(target, kind);\n    var len = values.length;\n    if (index >= len) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    var pair = values[index];\n    this[INTERNAL].index = index + 1;\n    var result;\n    if (kind === 'key') {\n      result = pair[0];\n    } else if (kind === 'value') {\n      result = pair[1];\n    } else {\n      result = pair;\n    }\n    return {\n      value: result,\n      done: false\n    };\n  }\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n  value: 'HeadersIterator',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\n\n/**\n * response.js\n *\n * Response class provides content decoding\n */\n/**\n * Response class\n *\n * @param {Stream} body Readable stream\n * @param {Object} opts Response options\n */\nvar Response = /*#__PURE__*/function () {\n  function Response() {\n    var body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Response);\n    Body.call(this, body, opts);\n    this.url = opts.url;\n    this.status = opts.status || 200;\n    this.statusText = opts.statusText || STATUS_CODES[this.status];\n    this.headers = new Headers(opts.headers);\n    this.useElectronNet = opts.useElectronNet;\n    Object.defineProperty(this, Symbol.toStringTag, {\n      value: 'Response',\n      writable: false,\n      enumerable: false,\n      configurable: true\n    });\n  }\n  /**\n   * Convenience property representing if the request ended normally\n   */\n  _createClass(Response, [{\n    key: \"ok\",\n    get: function get() {\n      return this.status >= 200 && this.status < 300;\n    }\n    /**\n     * Clone this response\n     *\n     * @return {Response}\n     */\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new Response(_clone(this), {\n        url: this.url,\n        status: this.status,\n        statusText: this.statusText,\n        headers: this.headers,\n        ok: this.ok,\n        useElectronNet: this.useElectronNet\n      });\n    }\n  }]);\n  return Response;\n}();\nBody.mixIn(Response.prototype);\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n  value: 'ResponsePrototype',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\n\n/**\n * request.js\n *\n * Request class contains server only options\n */\nvar PARSED_URL = Symbol('url');\n/**\n * Request class\n *\n * @param {string|Request} input Url or Request instance\n * @param {Object} init Custom options\n */\nvar Request = /*#__PURE__*/function () {\n  function Request(input) {\n    var init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Request);\n    var parsedURL; // normalize input\n\n    if (!(input instanceof Request)) {\n      if (input && input.href) {\n        // in order to support Node.js' Url objects; though WHATWG's URL objects\n        // will fall into this branch also (since their `toString()` will return\n        // `href` property anyway)\n        parsedURL = parse(input.href);\n      } else {\n        // coerce input to a string before attempting to parse\n        parsedURL = parse(\"\".concat(input));\n      }\n      input = {};\n    } else {\n      parsedURL = parse(input.url);\n    }\n    var method = init.method || input.method || 'GET';\n    if ((init.body != null || input instanceof Request && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n      throw new TypeError('Request with GET/HEAD method cannot have body');\n    }\n    var inputBody = init.body != null ? init.body : input instanceof Request && input.body !== null ? _clone(input) : null;\n    Body.call(this, inputBody, {\n      timeout: init.timeout || input.timeout || 0,\n      size: init.size || input.size || 0\n    }); // fetch spec options\n\n    this.method = method.toUpperCase();\n    this.redirect = init.redirect || input.redirect || 'follow';\n    this.signal = init.signal || input.signal || null;\n    this.headers = new Headers(init.headers || input.headers || {});\n    this.headers.delete('Content-Length'); // user cannot set content-length themself as per fetch spec\n\n    this.chunkedEncoding = false;\n    this.useElectronNet = init.useElectronNet !== undefined // have to do this instead of || because it can be set to false\n    ? init.useElectronNet : input.useElectronNet; // istanbul ignore if\n\n    if (this.useElectronNet && !process.versions.electron) throw new Error('Cannot use Electron/net module on Node.js!');\n    if (this.useElectronNet === undefined) {\n      this.useElectronNet = Boolean(process.versions.electron);\n    }\n    if (this.useElectronNet) {\n      this.useSessionCookies = init.useSessionCookies !== undefined ? init.useSessionCookies : input.useSessionCookies;\n    }\n    if (init.body != null) {\n      var contentType = extractContentType(this);\n      if (contentType !== null && !this.headers.has('Content-Type')) {\n        this.headers.append('Content-Type', contentType);\n      }\n    } // server only options\n\n    this.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n    this.counter = init.counter || input.counter || 0;\n    this.session = init.session || input.session;\n    this[PARSED_URL] = parsedURL;\n    Object.defineProperty(this, Symbol.toStringTag, {\n      value: 'Request',\n      writable: false,\n      enumerable: false,\n      configurable: true\n    });\n  }\n  _createClass(Request, [{\n    key: \"url\",\n    get: function get() {\n      return format(this[PARSED_URL]);\n    }\n    /**\n     * Clone this request\n     *\n     * @return {Request}\n     */\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new Request(this);\n    }\n  }]);\n  return Request;\n}();\nBody.mixIn(Request.prototype);\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n  value: 'RequestPrototype',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\nfunction getNodeRequestOptions(request) {\n  var parsedURL = request[PARSED_URL];\n  var headers = new Headers(request.headers); // fetch step 3\n\n  if (!headers.has('Accept')) {\n    headers.set('Accept', '*/*');\n  } // Basic fetch\n\n  if (!parsedURL.protocol || !parsedURL.hostname) {\n    throw new TypeError('Only absolute URLs are supported');\n  }\n  if (!/^https?:$/.test(parsedURL.protocol)) {\n    throw new TypeError('Only HTTP(S) protocols are supported');\n  } // HTTP-network-or-cache fetch steps 5-9\n\n  var contentLengthValue = null;\n  if (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n    contentLengthValue = '0';\n  }\n  if (request.body != null) {\n    var totalBytes = getTotalBytes(request);\n    if (typeof totalBytes === 'number') {\n      contentLengthValue = String(totalBytes);\n    }\n  }\n  if (contentLengthValue) {\n    if (!request.useElectronNet) headers.set('Content-Length', contentLengthValue);\n  } else {\n    request.chunkedEncoding = true;\n  } // HTTP-network-or-cache fetch step 12\n\n  if (!headers.has('User-Agent')) {\n    headers.set('User-Agent', \"electron-fetch/1.0 \".concat(request.useElectronNet ? 'electron' : 'node', \" (+https://github.com/arantes555/electron-fetch)\"));\n  } // HTTP-network-or-cache fetch step 16\n\n  headers.set('Accept-Encoding', 'gzip,deflate');\n  if (!headers.has('Connection')) {\n    headers.set('Connection', 'close');\n  } // HTTP-network fetch step 4\n  // chunked encoding is handled by Node.js when not running in electron\n\n  return Object.assign({}, parsedURL, {\n    method: request.method,\n    headers: headers.raw()\n  });\n}\nvar electron; // istanbul ignore else\n\nif (process.versions.electron) {\n  electron = require('electron');\n}\nvar isReady = electron && electron.app && !electron.app.isReady() ? new Promise(function (resolve) {\n  return electron.app.once('ready', resolve);\n}) : Promise.resolve();\n/**\n * Fetch function\n *\n * @param {string|Request} url Absolute url or Request instance\n * @param {Object} [opts] Fetch options\n * @return {Promise}\n */\n\nfunction fetch(url) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  // wrap http.request into fetch\n  return isReady.then(function () {\n    return new Promise(function (resolve$1, reject) {\n      // build request object\n      var request = new Request(url, opts);\n      var options = getNodeRequestOptions(request);\n      var send = request.useElectronNet ? electron.net.request : (options.protocol === 'https:' ? https : http).request; // http.request only support string as host header, this hack make custom host header possible\n\n      if (options.headers.host) {\n        options.headers.host = options.headers.host[0];\n      }\n      if (request.signal && request.signal.aborted) {\n        reject(new FetchError('request aborted', 'abort'));\n        return;\n      } // send request\n\n      var headers;\n      if (request.useElectronNet) {\n        headers = options.headers;\n        delete options.headers;\n        options.session = opts.session || electron.session.defaultSession;\n        options.useSessionCookies = request.useSessionCookies;\n      } else {\n        if (opts.agent) options.agent = opts.agent;\n        if (opts.onLogin) reject(new Error('\"onLogin\" option is only supported with \"useElectronNet\" enabled'));\n      }\n      var req = send(options);\n      if (request.useElectronNet) {\n        for (var headerName in headers) {\n          if (typeof headers[headerName] === 'string') req.setHeader(headerName, headers[headerName]);else {\n            for (var _iterator = _createForOfIteratorHelperLoose(headers[headerName]), _step; !(_step = _iterator()).done;) {\n              var headerValue = _step.value;\n              req.setHeader(headerName, headerValue);\n            }\n          }\n        }\n      }\n      var reqTimeout;\n      var cancelRequest = function cancelRequest() {\n        if (request.useElectronNet) {\n          req.abort(); // in electron, `req.destroy()` does not send abort to server\n        } else {\n          req.destroy(); // in node.js, `req.abort()` is deprecated\n        }\n      };\n\n      var abortRequest = function abortRequest() {\n        var err = new FetchError('request aborted', 'abort');\n        reject(err);\n        cancelRequest();\n        req.emit('error', err);\n      };\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortRequest);\n      }\n      if (request.timeout) {\n        reqTimeout = setTimeout(function () {\n          var err = new FetchError(\"network timeout at: \".concat(request.url), 'request-timeout');\n          reject(err);\n          cancelRequest();\n        }, request.timeout);\n      }\n      if (request.useElectronNet) {\n        // handle authenticating proxies\n        req.on('login', function (authInfo, callback) {\n          if (opts.user && opts.password) {\n            callback(opts.user, opts.password);\n          } else if (opts.onLogin) {\n            opts.onLogin(authInfo).then(function (credentials) {\n              if (credentials) {\n                callback(credentials.username, credentials.password);\n              } else {\n                callback();\n              }\n            }).catch(function (error) {\n              cancelRequest();\n              reject(error);\n            });\n          } else {\n            cancelRequest();\n            reject(new FetchError(\"login event received from \".concat(authInfo.host, \" but no credentials or onLogin handler provided\"), 'proxy', {\n              code: 'PROXY_AUTH_FAILED'\n            }));\n          }\n        });\n      }\n      req.on('error', function (err) {\n        clearTimeout(reqTimeout);\n        if (request.signal) {\n          request.signal.removeEventListener('abort', abortRequest);\n        }\n        reject(new FetchError(\"request to \".concat(request.url, \" failed, reason: \").concat(err.message), 'system', err));\n      });\n      req.on('abort', function () {\n        clearTimeout(reqTimeout);\n        if (request.signal) {\n          request.signal.removeEventListener('abort', abortRequest);\n        }\n      });\n      req.on('response', function (res) {\n        try {\n          clearTimeout(reqTimeout);\n          if (request.signal) {\n            request.signal.removeEventListener('abort', abortRequest);\n          } // handle redirect\n\n          if (fetch.isRedirect(res.statusCode) && request.redirect !== 'manual') {\n            if (request.redirect === 'error') {\n              reject(new FetchError(\"redirect mode is set to error: \".concat(request.url), 'no-redirect'));\n              return;\n            }\n            if (request.counter >= request.follow) {\n              reject(new FetchError(\"maximum redirect reached at: \".concat(request.url), 'max-redirect'));\n              return;\n            }\n            if (!res.headers.location) {\n              reject(new FetchError(\"redirect location header missing at: \".concat(request.url), 'invalid-redirect'));\n              return;\n            } // per fetch spec, for POST request with 301/302 response, or any request with 303 response, use GET when following redirect\n\n            if (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n              request.method = 'GET';\n              request.body = null;\n              request.headers.delete('content-length');\n            }\n            request.counter++;\n            resolve$1(fetch(resolve(request.url, res.headers.location), request));\n            return;\n          } // normalize location header for manual redirect mode\n\n          var _headers = new Headers();\n          for (var _i = 0, _Object$keys = Object.keys(res.headers); _i < _Object$keys.length; _i++) {\n            var name = _Object$keys[_i];\n            if (Array.isArray(res.headers[name])) {\n              for (var _iterator2 = _createForOfIteratorHelperLoose(res.headers[name]), _step2; !(_step2 = _iterator2()).done;) {\n                var val = _step2.value;\n                _headers.append(name, val);\n              }\n            } else {\n              _headers.append(name, res.headers[name]);\n            }\n          }\n          if (request.redirect === 'manual' && _headers.has('location')) {\n            _headers.set('location', resolve(request.url, _headers.get('location')));\n          } // prepare response\n\n          var body = new PassThrough();\n          res.on('error', function (err) {\n            return body.emit('error', err);\n          });\n          res.pipe(body);\n          body.on('error', cancelRequest);\n          body.on('cancel-request', cancelRequest);\n          var abortBody = function abortBody() {\n            res.destroy();\n            res.emit('error', new FetchError('request aborted', 'abort')); // separated from the `.destroy()` because somehow Node's IncomingMessage streams do not emit errors on destroy\n          };\n\n          if (request.signal) {\n            request.signal.addEventListener('abort', abortBody);\n            res.on('end', function () {\n              request.signal.removeEventListener('abort', abortBody);\n            });\n            res.on('error', function () {\n              request.signal.removeEventListener('abort', abortBody);\n            });\n          }\n          var responseOptions = {\n            url: request.url,\n            status: res.statusCode,\n            statusText: res.statusMessage,\n            headers: _headers,\n            size: request.size,\n            timeout: request.timeout,\n            useElectronNet: request.useElectronNet,\n            useSessionCookies: request.useSessionCookies\n          }; // HTTP-network fetch step 16.1.2\n\n          var codings = _headers.get('Content-Encoding'); // HTTP-network fetch step 16.1.3: handle content codings\n          // in following scenarios we ignore compression support\n          // 1. running on Electron/net module (it manages it for us)\n          // 2. HEAD request\n          // 3. no Content-Encoding header\n          // 4. no content response (204)\n          // 5. content not modified response (304)\n\n          if (!request.useElectronNet && request.method !== 'HEAD' && codings !== null && res.statusCode !== 204 && res.statusCode !== 304) {\n            // Be less strict when decoding compressed responses, since sometimes\n            // servers send slightly invalid responses that are still accepted\n            // by common browsers.\n            // Always using Z_SYNC_FLUSH is what cURL does.\n            // /!\\ This is disabled for now, because it seems broken in recent node\n            // const zlibOptions = {\n            //   flush: zlib.Z_SYNC_FLUSH,\n            //   finishFlush: zlib.Z_SYNC_FLUSH\n            // }\n            if (codings === 'gzip' || codings === 'x-gzip') {\n              // for gzip\n              body = body.pipe(zlib.createGunzip());\n            } else if (codings === 'deflate' || codings === 'x-deflate') {\n              // for deflate\n              // handle the infamous raw deflate response from old servers\n              // a hack for old IIS and Apache servers\n              var raw = res.pipe(new PassThrough());\n              return raw.once('data', function (chunk) {\n                // see http://stackoverflow.com/questions/37519828\n                if ((chunk[0] & 0x0F) === 0x08) {\n                  body = body.pipe(zlib.createInflate());\n                } else {\n                  body = body.pipe(zlib.createInflateRaw());\n                }\n                var response = new Response(body, responseOptions);\n                resolve$1(response);\n              });\n            }\n          }\n          var response = new Response(body, responseOptions);\n          resolve$1(response);\n        } catch (error) {\n          reject(new FetchError(\"Invalid response: \".concat(error.message), 'invalid-response'));\n          cancelRequest();\n        }\n      });\n      writeToStream(req, request);\n    });\n  });\n}\n/**\n * Redirect code matching\n *\n * @param {number} code Status code\n * @return {boolean}\n */\n\nfetch.isRedirect = function (code) {\n  return code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\nexport { FetchError, Headers, Request, Response, fetch as default };","map":{"version":3,"names":["parse","format","resolve","http","STATUS_CODES","https","zlib","Stream","PassThrough","convert","_unsupportedIterableToArray","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","arr","len","length","i","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","Symbol","iterator","next","bind","isArray","done","value","TypeError","BUFFER","TYPE","CLOSED","Blob","_classCallCheck","defineProperty","toStringTag","writable","enumerable","configurable","blobParts","arguments","options","buffers","a","Number","element","buffer","Buffer","ArrayBuffer","isView","Uint8Array","byteOffset","byteLength","String","push","concat","type","undefined","toLowerCase","_createClass","key","get","size","start","end","relativeStart","relativeEnd","Math","max","min","span","slicedBuffer","blob","close","netErrorMap","ERR_CONNECTION_REFUSED","ERR_EMPTY_RESPONSE","ERR_NAME_NOT_RESOLVED","ERR_CONTENT_DECODING_FAILED","ERR_CONTENT_DECODING_INIT_FAILED","FetchError","message","systemError","Error","regex","errorCode","exec","hasOwnProperty","code","errno","captureStackTrace","create","DISTURBED","Body","body","_ref","_ref$size","_ref$timeout","timeout","isBuffer","bodyUsed","arrayBuffer","consumeBody","then","buf","ct","headers","assign","_defineProperty","json","JSON","text","textConverted","_this","convertBody","mixIn","proto","_iterator","getOwnPropertyNames","_step","desc","getOwnPropertyDescriptor","_this2","Promise","reject","url","alloc","accum","accumBytes","abort","resTimeout","setTimeout","emit","on","err","chunk","clearTimeout","charset","res","str","pop","clone","instance","p1","p2","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","writeToStream","dest","write","useElectronNet","chunkedEncoding","isValidTokenChar","ch","checkIsHttpToken","val","charCodeAt","checkInvalidHeaderChar","c","sanitizeName","sanitizeValue","MAP","Headers","_Symbol$iterator","init","method","pairs","pair","_i","_pairs","append","_i2","_Object$keys","keys","list","join","forEach","callback","thisArg","getHeaderPairs","_pairs$i","set","has","_delete","raw","createHeadersIterator","values","entries","kind","sort","map","k","_iterator2","_step2","_iterator3","_step3","INTERNAL","target","HeadersIteratorPrototype","index","setPrototypeOf","getPrototypeOf","_this$INTERNAL","result","Response","opts","status","statusText","ok","PARSED_URL","Request","input","parsedURL","href","inputBody","toUpperCase","redirect","signal","delete","process","versions","electron","Boolean","useSessionCookies","contentType","follow","counter","session","getNodeRequestOptions","request","protocol","hostname","contentLengthValue","totalBytes","require","isReady","app","once","fetch","resolve$1","send","net","host","aborted","defaultSession","agent","onLogin","req","headerName","setHeader","headerValue","reqTimeout","cancelRequest","destroy","abortRequest","addEventListener","authInfo","user","password","credentials","username","catch","error","removeEventListener","isRedirect","statusCode","location","abortBody","responseOptions","statusMessage","codings","createGunzip","createInflate","createInflateRaw","response","default"],"sources":["C:/Users/Levi/Documents/szakdoga/vizsgaremek/node_modules/electron-fetch/lib/index.es.js"],"sourcesContent":["import { parse, format, resolve } from 'url';\nimport * as http from 'http';\nimport { STATUS_CODES } from 'http';\nimport * as https from 'https';\nimport * as zlib from 'zlib';\nimport Stream, { PassThrough } from 'stream';\nimport { convert } from 'encoding';\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n// (MIT licensed)\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\nconst CLOSED = Symbol('closed');\nclass Blob {\n  constructor() {\n    Object.defineProperty(this, Symbol.toStringTag, {\n      value: 'Blob',\n      writable: false,\n      enumerable: false,\n      configurable: true\n    });\n    this[CLOSED] = false;\n    this[TYPE] = '';\n    const blobParts = arguments[0];\n    const options = arguments[1];\n    const buffers = [];\n\n    if (blobParts) {\n      const a = blobParts;\n      const length = Number(a.length);\n\n      for (let i = 0; i < length; i++) {\n        const element = a[i];\n        let buffer;\n\n        if (element instanceof Buffer) {\n          buffer = element;\n        } else if (ArrayBuffer.isView(element)) {\n          buffer = Buffer.from(new Uint8Array(element.buffer, element.byteOffset, element.byteLength));\n        } else if (element instanceof ArrayBuffer) {\n          buffer = Buffer.from(new Uint8Array(element));\n        } else if (element instanceof Blob) {\n          buffer = element[BUFFER];\n        } else {\n          buffer = Buffer.from(typeof element === 'string' ? element : String(element));\n        }\n\n        buffers.push(buffer);\n      }\n    }\n\n    this[BUFFER] = Buffer.concat(buffers);\n    const type = options && options.type !== undefined && String(options.type).toLowerCase();\n\n    if (type && !/[^\\u0020-\\u007E]/.test(type)) {\n      this[TYPE] = type;\n    }\n  }\n\n  get size() {\n    return this[CLOSED] ? 0 : this[BUFFER].length;\n  }\n\n  get type() {\n    return this[TYPE];\n  }\n\n  get isClosed() {\n    return this[CLOSED];\n  }\n\n  slice() {\n    const size = this.size;\n    const start = arguments[0];\n    const end = arguments[1];\n    let relativeStart, relativeEnd;\n\n    if (start === undefined) {\n      relativeStart = 0;\n    } else if (start < 0) {\n      relativeStart = Math.max(size + start, 0);\n    } else {\n      relativeStart = Math.min(start, size);\n    }\n\n    if (end === undefined) {\n      relativeEnd = size;\n    } else if (end < 0) {\n      relativeEnd = Math.max(size + end, 0);\n    } else {\n      relativeEnd = Math.min(end, size);\n    }\n\n    const span = Math.max(relativeEnd - relativeStart, 0);\n    const buffer = this[BUFFER];\n    const slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n    const blob = new Blob([], {\n      type: arguments[2]\n    });\n    blob[BUFFER] = slicedBuffer;\n    blob[CLOSED] = this[CLOSED];\n    return blob;\n  }\n\n  close() {\n    this[CLOSED] = true;\n  }\n\n}\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n  value: 'BlobPrototype',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param {string} message Error message for human\n * @param {string} type Error type for machine\n * @param {string} systemError For Node.js system error\n * @return {FetchError}\n */\nconst netErrorMap = {\n  ERR_CONNECTION_REFUSED: 'ECONNREFUSED',\n  ERR_EMPTY_RESPONSE: 'ECONNRESET',\n  ERR_NAME_NOT_RESOLVED: 'ENOTFOUND',\n  ERR_CONTENT_DECODING_FAILED: 'Z_DATA_ERROR',\n  ERR_CONTENT_DECODING_INIT_FAILED: 'Z_DATA_ERROR'\n};\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n  const regex = /^.*net::(.*)/;\n\n  if (regex.test(message)) {\n    let errorCode = regex.exec(message)[1]; // istanbul ignore else\n\n    if (Object.prototype.hasOwnProperty.call(netErrorMap, errorCode)) errorCode = netErrorMap[errorCode];\n    systemError = {\n      code: errorCode\n    };\n  }\n\n  this.message = message;\n  this.type = type; // when err.type is `system`, err.code contains system error code\n\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  } // hide custom error implementation details from end-users\n\n\n  Error.captureStackTrace(this, this.constructor);\n}\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nconst DISTURBED = Symbol('disturbed');\n/**\n * Body class\n *\n * Cannot use ES6 class because Body must be called with .call().\n *\n * @param {Stream|string|Blob|Buffer|null} body Readable stream\n * @param {number} size\n * @param {number} timeout\n */\n\nfunction Body(body, {\n  size = 0,\n  timeout = 0\n} = {}) {\n  if (body == null) {\n    // body is undefined or null\n    body = null;\n  } else if (typeof body === 'string') ; else if (body instanceof Blob) ; else if (Buffer.isBuffer(body)) ; else if (body instanceof Stream) ; else {\n    // none of the above\n    // coerce to string\n    body = String(body);\n  }\n\n  this.body = body;\n  this[DISTURBED] = false;\n  this.size = size;\n  this.timeout = timeout;\n}\nBody.prototype = {\n  get bodyUsed() {\n    return this[DISTURBED];\n  },\n\n  /**\n   * Decode response as ArrayBuffer\n   *\n   * @return {Promise}\n   */\n  arrayBuffer() {\n    return consumeBody.call(this).then(buf => buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength));\n  },\n\n  /**\n   * Return raw response as Blob\n   *\n   * @return {Promise}\n   */\n  blob() {\n    const ct = this.headers && this.headers.get('content-type') || '';\n    return consumeBody.call(this).then(buf => Object.assign( // Prevent copying\n    new Blob([], {\n      type: ct.toLowerCase()\n    }), {\n      [BUFFER]: buf\n    }));\n  },\n\n  /**\n   * Decode response as json\n   *\n   * @return {Promise}\n   */\n  json() {\n    return consumeBody.call(this).then(buffer => JSON.parse(buffer.toString()));\n  },\n\n  /**\n   * Decode response as text\n   *\n   * @return {Promise}\n   */\n  text() {\n    return consumeBody.call(this).then(buffer => buffer.toString());\n  },\n\n  /**\n   * Decode response as buffer (non-spec api)\n   *\n   * @return {Promise}\n   */\n  buffer() {\n    return consumeBody.call(this);\n  },\n\n  /**\n   * Decode response as text, while automatically detecting the encoding and\n   * trying to decode to UTF-8 (non-spec api)\n   *\n   * @return {Promise}\n   */\n  textConverted() {\n    return consumeBody.call(this).then(buffer => convertBody(buffer, this.headers));\n  }\n\n};\n\nBody.mixIn = function (proto) {\n  for (var _iterator = _createForOfIteratorHelperLoose(Object.getOwnPropertyNames(Body.prototype)), _step; !(_step = _iterator()).done;) {\n    const name = _step.value;\n\n    // istanbul ignore else\n    if (!(name in proto)) {\n      const desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n      Object.defineProperty(proto, name, desc);\n    }\n  }\n};\n/**\n * Decode buffers into utf-8 string\n *\n * @return {Promise}\n */\n\n\nfunction consumeBody() {\n  if (this[DISTURBED]) {\n    return Promise.reject(new Error(`body used already for: ${this.url}`));\n  }\n\n  this[DISTURBED] = true; // body is null\n\n  if (this.body === null) {\n    return Promise.resolve(Buffer.alloc(0));\n  } // body is string\n\n\n  if (typeof this.body === 'string') {\n    return Promise.resolve(Buffer.from(this.body));\n  } // body is blob\n\n\n  if (this.body instanceof Blob) {\n    return Promise.resolve(this.body[BUFFER]);\n  } // body is buffer\n\n\n  if (Buffer.isBuffer(this.body)) {\n    return Promise.resolve(this.body);\n  } // istanbul ignore if: should never happen\n\n\n  if (!(this.body instanceof Stream)) {\n    return Promise.resolve(Buffer.alloc(0));\n  } // body is stream\n  // get ready to actually consume the body\n\n\n  const accum = [];\n  let accumBytes = 0;\n  let abort = false;\n  return new Promise((resolve, reject) => {\n    let resTimeout; // allow timeout on slow response body\n\n    if (this.timeout) {\n      resTimeout = setTimeout(() => {\n        abort = true;\n        reject(new FetchError(`Response timeout while trying to fetch ${this.url} (over ${this.timeout}ms)`, 'body-timeout'));\n        this.body.emit('cancel-request');\n      }, this.timeout);\n    } // handle stream error, such as incorrect content-encoding\n\n\n    this.body.on('error', err => {\n      reject(new FetchError(`Invalid response body while trying to fetch ${this.url}: ${err.message}`, 'system', err));\n    });\n    this.body.on('data', chunk => {\n      if (abort || chunk === null) {\n        return;\n      }\n\n      if (this.size && accumBytes + chunk.length > this.size) {\n        abort = true;\n        reject(new FetchError(`content size at ${this.url} over limit: ${this.size}`, 'max-size'));\n        this.body.emit('cancel-request');\n        return;\n      }\n\n      accumBytes += chunk.length;\n      accum.push(chunk);\n    });\n    this.body.on('end', () => {\n      if (abort) {\n        return;\n      }\n\n      clearTimeout(resTimeout);\n      resolve(Buffer.concat(accum));\n    });\n  });\n}\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param {Buffer} buffer   Incoming buffer\n * @param {Headers} headers\n * @return {string}\n */\n\n\nfunction convertBody(buffer, headers) {\n  const ct = headers.get('content-type');\n  let charset = 'utf-8';\n  let res; // header\n\n  if (ct) {\n    res = /charset=([^;]*)/i.exec(ct);\n  } // no charset in content type, peek at response body for at most 1024 bytes\n\n\n  const str = buffer.slice(0, 1024).toString(); // html5\n\n  if (!res && str) {\n    res = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n  } // html4\n\n\n  if (!res && str) {\n    res = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\n    if (res) {\n      res = /charset=(.*)/i.exec(res.pop());\n    }\n  } // xml\n\n\n  if (!res && str) {\n    res = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n  } // found charset\n\n\n  if (res) {\n    charset = res.pop(); // prevent decode issues when sites use incorrect encoding\n    // ref: https://hsivonen.fi/encoding-menu/\n\n    if (charset === 'gb2312' || charset === 'gbk') {\n      charset = 'gb18030';\n    }\n  } // turn raw buffers into a single utf-8 buffer\n\n\n  return convert(buffer, 'UTF-8', charset).toString();\n}\n/**\n * Clone body given Res/Req instance\n *\n * @param {Response|Request} instance Response or Request instance\n * @return {string|Blob|Buffer|Stream}\n */\n\n\nfunction clone(instance) {\n  let p1, p2;\n  let body = instance.body; // don't allow cloning a used body\n\n  if (instance.bodyUsed) {\n    throw new Error('cannot clone body after it is used');\n  } // check that body is a stream and not form-data object\n  // note: we can't clone the form-data object without having it as a dependency\n\n\n  if (body instanceof Stream && typeof body.getBoundary !== 'function') {\n    // tee instance body\n    p1 = new PassThrough();\n    p2 = new PassThrough();\n    body.pipe(p1);\n    body.pipe(p2); // set instance body to teed body and return the other teed body\n\n    instance.body = p1;\n    body = p2;\n  }\n\n  return body;\n}\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present and non-null.\n *\n * @param {Response|Request} instance Response or Request instance\n */\n\nfunction extractContentType(instance) {\n  const body = instance.body; // istanbul ignore if: Currently, because of a guard in Request, body\n  // can never be null. Included here for completeness.\n\n  if (body === null) {\n    // body is null\n    return null;\n  } else if (typeof body === 'string') {\n    // body is string\n    return 'text/plain;charset=UTF-8';\n  } else if (body instanceof Blob) {\n    // body is blob\n    return body.type || null;\n  } else if (Buffer.isBuffer(body)) {\n    // body is buffer\n    return null;\n  } else if (typeof body.getBoundary === 'function') {\n    // detect form data input from form-data module\n    return `multipart/form-data;boundary=${body.getBoundary()}`;\n  } else {\n    // body is stream\n    // can't really do much about this\n    return null;\n  }\n}\nfunction getTotalBytes(instance) {\n  const body = instance.body; // istanbul ignore if: included for completion\n\n  if (body === null) {\n    // body is null\n    return 0;\n  } else if (typeof body === 'string') {\n    // body is string\n    return Buffer.byteLength(body);\n  } else if (body instanceof Blob) {\n    // body is blob\n    return body.size;\n  } else if (Buffer.isBuffer(body)) {\n    // body is buffer\n    return body.length;\n  } else if (body && typeof body.getLengthSync === 'function') {\n    // detect form data input from form-data module\n    // istanbul ignore next\n    if (body._lengthRetrievers && body._lengthRetrievers.length === 0 || // 1.x\n    body.hasKnownLength && body.hasKnownLength()) {\n      // 2.x\n      return body.getLengthSync();\n    }\n\n    return null;\n  } else {\n    // body is stream\n    // can't really do much about this\n    return null;\n  }\n}\nfunction writeToStream(dest, instance) {\n  const body = instance.body;\n\n  if (body === null) {\n    // body is null\n    dest.end();\n  } else if (typeof body === 'string') {\n    // body is string\n    dest.write(body);\n    dest.end();\n  } else if (body instanceof Blob) {\n    // body is blob\n    dest.write(body[BUFFER]);\n    dest.end();\n  } else if (Buffer.isBuffer(body)) {\n    // body is buffer\n    dest.write(body);\n    dest.end();\n  } else {\n    // body is stream\n    if (instance.useElectronNet) {\n      dest.chunkedEncoding = instance.chunkedEncoding; // Force a first write to start the request otherwise an empty body stream\n      // will cause an error when closing the dest stream with Electron v7.\n\n      dest.write('');\n    }\n\n    body.pipe(new PassThrough()) // I have to put a PassThrough because somehow, FormData streams are not eaten by electron/net\n    .pipe(dest);\n  }\n}\n\n/**\n * A set of utilities borrowed from Node.js' _http_common.js\n */\n\n/**\n * Verifies that the given val is a valid HTTP token\n * per the rules defined in RFC 7230\n * See https://tools.ietf.org/html/rfc7230#section-3.2.6\n *\n * Allowed characters in an HTTP token:\n * ^_`a-z  94-122\n * A-Z     65-90\n * -       45\n * 0-9     48-57\n * !       33\n * #$%&'   35-39\n * *+      42-43\n * .       46\n * |       124\n * ~       126\n *\n * This implementation of checkIsHttpToken() loops over the string instead of\n * using a regular expression since the former is up to 180% faster with v8 4.9\n * depending on the string length (the shorter the string, the larger the\n * performance difference)\n *\n * Additionally, checkIsHttpToken() is currently designed to be inlinable by v8,\n * so take care when making changes to the implementation so that the source\n * code size does not exceed v8's default max_inlined_source_size setting.\n **/\n// istanbul ignore next\nfunction isValidTokenChar(ch) {\n  if (ch >= 94 && ch <= 122) {\n    return true;\n  }\n\n  if (ch >= 65 && ch <= 90) {\n    return true;\n  }\n\n  if (ch === 45) {\n    return true;\n  }\n\n  if (ch >= 48 && ch <= 57) {\n    return true;\n  }\n\n  if (ch === 34 || ch === 40 || ch === 41 || ch === 44) {\n    return false;\n  }\n\n  if (ch >= 33 && ch <= 46) {\n    return true;\n  }\n\n  if (ch === 124 || ch === 126) {\n    return true;\n  }\n\n  return false;\n} // istanbul ignore next\n\n\nfunction checkIsHttpToken(val) {\n  if (typeof val !== 'string' || val.length === 0) {\n    return false;\n  }\n\n  if (!isValidTokenChar(val.charCodeAt(0))) {\n    return false;\n  }\n\n  const len = val.length;\n\n  if (len > 1) {\n    if (!isValidTokenChar(val.charCodeAt(1))) {\n      return false;\n    }\n\n    if (len > 2) {\n      if (!isValidTokenChar(val.charCodeAt(2))) {\n        return false;\n      }\n\n      if (len > 3) {\n        if (!isValidTokenChar(val.charCodeAt(3))) {\n          return false;\n        }\n\n        for (let i = 4; i < len; i++) {\n          if (!isValidTokenChar(val.charCodeAt(i))) {\n            return false;\n          }\n        }\n      }\n    }\n  }\n\n  return true;\n}\n/**\n * True if val contains an invalid field-vchar\n *  field-value    = *( field-content / obs-fold )\n *  field-content  = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n *  field-vchar    = VCHAR / obs-text\n *\n * checkInvalidHeaderChar() is currently designed to be inlinable by v8,\n * so take care when making changes to the implementation so that the source\n * code size does not exceed v8's default max_inlined_source_size setting.\n **/\n// istanbul ignore next\n\nfunction checkInvalidHeaderChar(val) {\n  val += '';\n\n  if (val.length < 1) {\n    return false;\n  }\n\n  let c = val.charCodeAt(0);\n\n  if (c <= 31 && c !== 9 || c > 255 || c === 127) {\n    return true;\n  }\n\n  if (val.length < 2) {\n    return false;\n  }\n\n  c = val.charCodeAt(1);\n\n  if (c <= 31 && c !== 9 || c > 255 || c === 127) {\n    return true;\n  }\n\n  if (val.length < 3) {\n    return false;\n  }\n\n  c = val.charCodeAt(2);\n\n  if (c <= 31 && c !== 9 || c > 255 || c === 127) {\n    return true;\n  }\n\n  for (let i = 3; i < val.length; ++i) {\n    c = val.charCodeAt(i);\n\n    if (c <= 31 && c !== 9 || c > 255 || c === 127) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction sanitizeName(name) {\n  name += '';\n\n  if (!checkIsHttpToken(name)) {\n    throw new TypeError(`${name} is not a legal HTTP header name`);\n  }\n\n  return name.toLowerCase();\n}\n\nfunction sanitizeValue(value) {\n  value += '';\n\n  if (checkInvalidHeaderChar(value)) {\n    throw new TypeError(`${value} is not a legal HTTP header value`);\n  }\n\n  return value;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n  /**\n   * Headers class\n   *\n   * @param {Object} init Response headers\n   */\n  constructor(init = undefined) {\n    this[MAP] = Object.create(null); // We don't worry about converting prop to ByteString here as append()\n    // will handle it.\n\n    if (init == null) ; else if (typeof init === 'object') {\n      const method = init[Symbol.iterator];\n\n      if (method != null) {\n        if (typeof method !== 'function') {\n          throw new TypeError('Header pairs must be iterable');\n        } // sequence<sequence<ByteString>>\n        // Note: per spec we have to first exhaust the lists then process them\n\n\n        const pairs = [];\n\n        for (var _iterator = _createForOfIteratorHelperLoose(init), _step; !(_step = _iterator()).done;) {\n          const pair = _step.value;\n\n          if (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n            throw new TypeError('Each header pair must be iterable');\n          }\n\n          pairs.push(Array.from(pair));\n        }\n\n        for (var _i = 0, _pairs = pairs; _i < _pairs.length; _i++) {\n          const pair = _pairs[_i];\n\n          if (pair.length !== 2) {\n            throw new TypeError('Each header pair must be a name/value tuple');\n          }\n\n          this.append(pair[0], pair[1]);\n        }\n      } else {\n        // record<ByteString, ByteString>\n        for (var _i2 = 0, _Object$keys = Object.keys(init); _i2 < _Object$keys.length; _i2++) {\n          const key = _Object$keys[_i2];\n          const value = init[key];\n          this.append(key, value);\n        }\n      }\n    } else {\n      throw new TypeError('Provided initializer must be an object');\n    }\n\n    Object.defineProperty(this, Symbol.toStringTag, {\n      value: 'Headers',\n      writable: false,\n      enumerable: false,\n      configurable: true\n    });\n  }\n  /**\n   * Return first header value given name\n   *\n   * @param {string} name Header name\n   * @return {string}\n   */\n\n\n  get(name) {\n    const list = this[MAP][sanitizeName(name)];\n\n    if (!list) {\n      return null;\n    }\n\n    return list.join(',');\n  }\n  /**\n   * Iterate over all headers\n   *\n   * @param {function} callback Executed for each item with parameters (value, name, thisArg)\n   * @param {boolean} thisArg `this` context for callback function\n   */\n\n\n  forEach(callback, thisArg = undefined) {\n    let pairs = getHeaderPairs(this);\n    let i = 0;\n\n    while (i < pairs.length) {\n      const _pairs$i = pairs[i],\n            name = _pairs$i[0],\n            value = _pairs$i[1];\n      callback.call(thisArg, value, name, this);\n      pairs = getHeaderPairs(this);\n      i++;\n    }\n  }\n  /**\n   * Overwrite header values given name\n   *\n   * @param {string} name Header name\n   * @param {string|Array.<string|*>|*} value Header value\n   */\n\n\n  set(name, value) {\n    this[MAP][sanitizeName(name)] = [sanitizeValue(value)];\n  }\n  /**\n   * Append a value onto existing header\n   *\n   * @param {string} name Header name\n   * @param {string|Array.<string|*>|*} value Header value\n   */\n\n\n  append(name, value) {\n    if (!this.has(name)) {\n      this.set(name, value);\n      return;\n    }\n\n    this[MAP][sanitizeName(name)].push(sanitizeValue(value));\n  }\n  /**\n   * Check for header name existence\n   *\n   * @param {string} name Header name\n   * @return {boolean}\n   */\n\n\n  has(name) {\n    return !!this[MAP][sanitizeName(name)];\n  }\n  /**\n   * Delete all header values given name\n   *\n   * @param {string} name Header name\n   */\n\n\n  delete(name) {\n    delete this[MAP][sanitizeName(name)];\n  }\n  /**\n   * Return raw headers (non-spec api)\n   *\n   * @return {Object}\n   */\n\n\n  raw() {\n    return this[MAP];\n  }\n  /**\n   * Get an iterator on keys.\n   *\n   * @return {Iterator}\n   */\n\n\n  keys() {\n    return createHeadersIterator(this, 'key');\n  }\n  /**\n   * Get an iterator on values.\n   *\n   * @return {Iterator}\n   */\n\n\n  values() {\n    return createHeadersIterator(this, 'value');\n  }\n  /**\n   * Get an iterator on entries.\n   *\n   * This is the default iterator of the Headers object.\n   *\n   * @return {Iterator}\n   */\n\n\n  [Symbol.iterator]() {\n    return createHeadersIterator(this, 'key+value');\n  }\n\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n  value: 'HeadersPrototype',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\n\nfunction getHeaderPairs(headers, kind) {\n  if (kind === 'key') return Object.keys(headers[MAP]).sort().map(k => [k]);\n  const pairs = [];\n\n  for (var _iterator2 = _createForOfIteratorHelperLoose(Object.keys(headers[MAP]).sort()), _step2; !(_step2 = _iterator2()).done;) {\n    const key = _step2.value;\n\n    for (var _iterator3 = _createForOfIteratorHelperLoose(headers[MAP][key]), _step3; !(_step3 = _iterator3()).done;) {\n      const value = _step3.value;\n      pairs.push([key, value]);\n    }\n  }\n\n  return pairs;\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n  const iterator = Object.create(HeadersIteratorPrototype);\n  iterator[INTERNAL] = {\n    target,\n    kind,\n    index: 0\n  };\n  return iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n  next() {\n    // istanbul ignore if\n    if (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n      throw new TypeError('Value of `this` is not a HeadersIterator');\n    }\n\n    const _this$INTERNAL = this[INTERNAL],\n          target = _this$INTERNAL.target,\n          kind = _this$INTERNAL.kind,\n          index = _this$INTERNAL.index;\n    const values = getHeaderPairs(target, kind);\n    const len = values.length;\n\n    if (index >= len) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n\n    const pair = values[index];\n    this[INTERNAL].index = index + 1;\n    let result;\n\n    if (kind === 'key') {\n      result = pair[0];\n    } else if (kind === 'value') {\n      result = pair[1];\n    } else {\n      result = pair;\n    }\n\n    return {\n      value: result,\n      done: false\n    };\n  }\n\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n  value: 'HeadersIterator',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\n\n/**\n * response.js\n *\n * Response class provides content decoding\n */\n/**\n * Response class\n *\n * @param {Stream} body Readable stream\n * @param {Object} opts Response options\n */\n\nclass Response {\n  constructor(body = null, opts = {}) {\n    Body.call(this, body, opts);\n    this.url = opts.url;\n    this.status = opts.status || 200;\n    this.statusText = opts.statusText || STATUS_CODES[this.status];\n    this.headers = new Headers(opts.headers);\n    this.useElectronNet = opts.useElectronNet;\n    Object.defineProperty(this, Symbol.toStringTag, {\n      value: 'Response',\n      writable: false,\n      enumerable: false,\n      configurable: true\n    });\n  }\n  /**\n   * Convenience property representing if the request ended normally\n   */\n\n\n  get ok() {\n    return this.status >= 200 && this.status < 300;\n  }\n  /**\n   * Clone this response\n   *\n   * @return {Response}\n   */\n\n\n  clone() {\n    return new Response(clone(this), {\n      url: this.url,\n      status: this.status,\n      statusText: this.statusText,\n      headers: this.headers,\n      ok: this.ok,\n      useElectronNet: this.useElectronNet\n    });\n  }\n\n}\nBody.mixIn(Response.prototype);\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n  value: 'ResponsePrototype',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\n\n/**\n * request.js\n *\n * Request class contains server only options\n */\nconst PARSED_URL = Symbol('url');\n/**\n * Request class\n *\n * @param {string|Request} input Url or Request instance\n * @param {Object} init Custom options\n */\n\nclass Request {\n  constructor(input, init = {}) {\n    let parsedURL; // normalize input\n\n    if (!(input instanceof Request)) {\n      if (input && input.href) {\n        // in order to support Node.js' Url objects; though WHATWG's URL objects\n        // will fall into this branch also (since their `toString()` will return\n        // `href` property anyway)\n        parsedURL = parse(input.href);\n      } else {\n        // coerce input to a string before attempting to parse\n        parsedURL = parse(`${input}`);\n      }\n\n      input = {};\n    } else {\n      parsedURL = parse(input.url);\n    }\n\n    const method = init.method || input.method || 'GET';\n\n    if ((init.body != null || input instanceof Request && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n      throw new TypeError('Request with GET/HEAD method cannot have body');\n    }\n\n    const inputBody = init.body != null ? init.body : input instanceof Request && input.body !== null ? clone(input) : null;\n    Body.call(this, inputBody, {\n      timeout: init.timeout || input.timeout || 0,\n      size: init.size || input.size || 0\n    }); // fetch spec options\n\n    this.method = method.toUpperCase();\n    this.redirect = init.redirect || input.redirect || 'follow';\n    this.signal = init.signal || input.signal || null;\n    this.headers = new Headers(init.headers || input.headers || {});\n    this.headers.delete('Content-Length'); // user cannot set content-length themself as per fetch spec\n\n    this.chunkedEncoding = false;\n    this.useElectronNet = init.useElectronNet !== undefined // have to do this instead of || because it can be set to false\n    ? init.useElectronNet : input.useElectronNet; // istanbul ignore if\n\n    if (this.useElectronNet && !process.versions.electron) throw new Error('Cannot use Electron/net module on Node.js!');\n\n    if (this.useElectronNet === undefined) {\n      this.useElectronNet = Boolean(process.versions.electron);\n    }\n\n    if (this.useElectronNet) {\n      this.useSessionCookies = init.useSessionCookies !== undefined ? init.useSessionCookies : input.useSessionCookies;\n    }\n\n    if (init.body != null) {\n      const contentType = extractContentType(this);\n\n      if (contentType !== null && !this.headers.has('Content-Type')) {\n        this.headers.append('Content-Type', contentType);\n      }\n    } // server only options\n\n\n    this.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n    this.counter = init.counter || input.counter || 0;\n    this.session = init.session || input.session;\n    this[PARSED_URL] = parsedURL;\n    Object.defineProperty(this, Symbol.toStringTag, {\n      value: 'Request',\n      writable: false,\n      enumerable: false,\n      configurable: true\n    });\n  }\n\n  get url() {\n    return format(this[PARSED_URL]);\n  }\n  /**\n   * Clone this request\n   *\n   * @return {Request}\n   */\n\n\n  clone() {\n    return new Request(this);\n  }\n\n}\nBody.mixIn(Request.prototype);\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n  value: 'RequestPrototype',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\nfunction getNodeRequestOptions(request) {\n  const parsedURL = request[PARSED_URL];\n  const headers = new Headers(request.headers); // fetch step 3\n\n  if (!headers.has('Accept')) {\n    headers.set('Accept', '*/*');\n  } // Basic fetch\n\n\n  if (!parsedURL.protocol || !parsedURL.hostname) {\n    throw new TypeError('Only absolute URLs are supported');\n  }\n\n  if (!/^https?:$/.test(parsedURL.protocol)) {\n    throw new TypeError('Only HTTP(S) protocols are supported');\n  } // HTTP-network-or-cache fetch steps 5-9\n\n\n  let contentLengthValue = null;\n\n  if (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n    contentLengthValue = '0';\n  }\n\n  if (request.body != null) {\n    const totalBytes = getTotalBytes(request);\n\n    if (typeof totalBytes === 'number') {\n      contentLengthValue = String(totalBytes);\n    }\n  }\n\n  if (contentLengthValue) {\n    if (!request.useElectronNet) headers.set('Content-Length', contentLengthValue);\n  } else {\n    request.chunkedEncoding = true;\n  } // HTTP-network-or-cache fetch step 12\n\n\n  if (!headers.has('User-Agent')) {\n    headers.set('User-Agent', `electron-fetch/1.0 ${request.useElectronNet ? 'electron' : 'node'} (+https://github.com/arantes555/electron-fetch)`);\n  } // HTTP-network-or-cache fetch step 16\n\n\n  headers.set('Accept-Encoding', 'gzip,deflate');\n\n  if (!headers.has('Connection')) {\n    headers.set('Connection', 'close');\n  } // HTTP-network fetch step 4\n  // chunked encoding is handled by Node.js when not running in electron\n\n\n  return Object.assign({}, parsedURL, {\n    method: request.method,\n    headers: headers.raw()\n  });\n}\n\nlet electron; // istanbul ignore else\n\nif (process.versions.electron) {\n  electron = require('electron');\n}\n\nconst isReady = electron && electron.app && !electron.app.isReady() ? new Promise(resolve => electron.app.once('ready', resolve)) : Promise.resolve();\n/**\n * Fetch function\n *\n * @param {string|Request} url Absolute url or Request instance\n * @param {Object} [opts] Fetch options\n * @return {Promise}\n */\n\nfunction fetch(url, opts = {}) {\n  // wrap http.request into fetch\n  return isReady.then(() => new Promise((resolve$1, reject) => {\n    // build request object\n    const request = new Request(url, opts);\n    const options = getNodeRequestOptions(request);\n    const send = request.useElectronNet ? electron.net.request : (options.protocol === 'https:' ? https : http).request; // http.request only support string as host header, this hack make custom host header possible\n\n    if (options.headers.host) {\n      options.headers.host = options.headers.host[0];\n    }\n\n    if (request.signal && request.signal.aborted) {\n      reject(new FetchError('request aborted', 'abort'));\n      return;\n    } // send request\n\n\n    let headers;\n\n    if (request.useElectronNet) {\n      headers = options.headers;\n      delete options.headers;\n      options.session = opts.session || electron.session.defaultSession;\n      options.useSessionCookies = request.useSessionCookies;\n    } else {\n      if (opts.agent) options.agent = opts.agent;\n      if (opts.onLogin) reject(new Error('\"onLogin\" option is only supported with \"useElectronNet\" enabled'));\n    }\n\n    const req = send(options);\n\n    if (request.useElectronNet) {\n      for (const headerName in headers) {\n        if (typeof headers[headerName] === 'string') req.setHeader(headerName, headers[headerName]);else {\n          for (var _iterator = _createForOfIteratorHelperLoose(headers[headerName]), _step; !(_step = _iterator()).done;) {\n            const headerValue = _step.value;\n            req.setHeader(headerName, headerValue);\n          }\n        }\n      }\n    }\n\n    let reqTimeout;\n\n    const cancelRequest = () => {\n      if (request.useElectronNet) {\n        req.abort(); // in electron, `req.destroy()` does not send abort to server\n      } else {\n        req.destroy(); // in node.js, `req.abort()` is deprecated\n      }\n    };\n\n    const abortRequest = () => {\n      const err = new FetchError('request aborted', 'abort');\n      reject(err);\n      cancelRequest();\n      req.emit('error', err);\n    };\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortRequest);\n    }\n\n    if (request.timeout) {\n      reqTimeout = setTimeout(() => {\n        const err = new FetchError(`network timeout at: ${request.url}`, 'request-timeout');\n        reject(err);\n        cancelRequest();\n      }, request.timeout);\n    }\n\n    if (request.useElectronNet) {\n      // handle authenticating proxies\n      req.on('login', (authInfo, callback) => {\n        if (opts.user && opts.password) {\n          callback(opts.user, opts.password);\n        } else if (opts.onLogin) {\n          opts.onLogin(authInfo).then(credentials => {\n            if (credentials) {\n              callback(credentials.username, credentials.password);\n            } else {\n              callback();\n            }\n          }).catch(error => {\n            cancelRequest();\n            reject(error);\n          });\n        } else {\n          cancelRequest();\n          reject(new FetchError(`login event received from ${authInfo.host} but no credentials or onLogin handler provided`, 'proxy', {\n            code: 'PROXY_AUTH_FAILED'\n          }));\n        }\n      });\n    }\n\n    req.on('error', err => {\n      clearTimeout(reqTimeout);\n\n      if (request.signal) {\n        request.signal.removeEventListener('abort', abortRequest);\n      }\n\n      reject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n    });\n    req.on('abort', () => {\n      clearTimeout(reqTimeout);\n\n      if (request.signal) {\n        request.signal.removeEventListener('abort', abortRequest);\n      }\n    });\n    req.on('response', res => {\n      try {\n        clearTimeout(reqTimeout);\n\n        if (request.signal) {\n          request.signal.removeEventListener('abort', abortRequest);\n        } // handle redirect\n\n\n        if (fetch.isRedirect(res.statusCode) && request.redirect !== 'manual') {\n          if (request.redirect === 'error') {\n            reject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));\n            return;\n          }\n\n          if (request.counter >= request.follow) {\n            reject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n            return;\n          }\n\n          if (!res.headers.location) {\n            reject(new FetchError(`redirect location header missing at: ${request.url}`, 'invalid-redirect'));\n            return;\n          } // per fetch spec, for POST request with 301/302 response, or any request with 303 response, use GET when following redirect\n\n\n          if (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n            request.method = 'GET';\n            request.body = null;\n            request.headers.delete('content-length');\n          }\n\n          request.counter++;\n          resolve$1(fetch(resolve(request.url, res.headers.location), request));\n          return;\n        } // normalize location header for manual redirect mode\n\n\n        const headers = new Headers();\n\n        for (var _i = 0, _Object$keys = Object.keys(res.headers); _i < _Object$keys.length; _i++) {\n          const name = _Object$keys[_i];\n\n          if (Array.isArray(res.headers[name])) {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(res.headers[name]), _step2; !(_step2 = _iterator2()).done;) {\n              const val = _step2.value;\n              headers.append(name, val);\n            }\n          } else {\n            headers.append(name, res.headers[name]);\n          }\n        }\n\n        if (request.redirect === 'manual' && headers.has('location')) {\n          headers.set('location', resolve(request.url, headers.get('location')));\n        } // prepare response\n\n\n        let body = new PassThrough();\n        res.on('error', err => body.emit('error', err));\n        res.pipe(body);\n        body.on('error', cancelRequest);\n        body.on('cancel-request', cancelRequest);\n\n        const abortBody = () => {\n          res.destroy();\n          res.emit('error', new FetchError('request aborted', 'abort')); // separated from the `.destroy()` because somehow Node's IncomingMessage streams do not emit errors on destroy\n        };\n\n        if (request.signal) {\n          request.signal.addEventListener('abort', abortBody);\n          res.on('end', () => {\n            request.signal.removeEventListener('abort', abortBody);\n          });\n          res.on('error', () => {\n            request.signal.removeEventListener('abort', abortBody);\n          });\n        }\n\n        const responseOptions = {\n          url: request.url,\n          status: res.statusCode,\n          statusText: res.statusMessage,\n          headers,\n          size: request.size,\n          timeout: request.timeout,\n          useElectronNet: request.useElectronNet,\n          useSessionCookies: request.useSessionCookies\n        }; // HTTP-network fetch step 16.1.2\n\n        const codings = headers.get('Content-Encoding'); // HTTP-network fetch step 16.1.3: handle content codings\n        // in following scenarios we ignore compression support\n        // 1. running on Electron/net module (it manages it for us)\n        // 2. HEAD request\n        // 3. no Content-Encoding header\n        // 4. no content response (204)\n        // 5. content not modified response (304)\n\n        if (!request.useElectronNet && request.method !== 'HEAD' && codings !== null && res.statusCode !== 204 && res.statusCode !== 304) {\n          // Be less strict when decoding compressed responses, since sometimes\n          // servers send slightly invalid responses that are still accepted\n          // by common browsers.\n          // Always using Z_SYNC_FLUSH is what cURL does.\n          // /!\\ This is disabled for now, because it seems broken in recent node\n          // const zlibOptions = {\n          //   flush: zlib.Z_SYNC_FLUSH,\n          //   finishFlush: zlib.Z_SYNC_FLUSH\n          // }\n          if (codings === 'gzip' || codings === 'x-gzip') {\n            // for gzip\n            body = body.pipe(zlib.createGunzip());\n          } else if (codings === 'deflate' || codings === 'x-deflate') {\n            // for deflate\n            // handle the infamous raw deflate response from old servers\n            // a hack for old IIS and Apache servers\n            const raw = res.pipe(new PassThrough());\n            return raw.once('data', chunk => {\n              // see http://stackoverflow.com/questions/37519828\n              if ((chunk[0] & 0x0F) === 0x08) {\n                body = body.pipe(zlib.createInflate());\n              } else {\n                body = body.pipe(zlib.createInflateRaw());\n              }\n\n              const response = new Response(body, responseOptions);\n              resolve$1(response);\n            });\n          }\n        }\n\n        const response = new Response(body, responseOptions);\n        resolve$1(response);\n      } catch (error) {\n        reject(new FetchError(`Invalid response: ${error.message}`, 'invalid-response'));\n        cancelRequest();\n      }\n    });\n    writeToStream(req, request);\n  }));\n}\n/**\n * Redirect code matching\n *\n * @param {number} code Status code\n * @return {boolean}\n */\n\nfetch.isRedirect = code => code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n\nexport { FetchError, Headers, Request, Response, fetch as default };\n"],"mappings":";;;AAAA,SAASA,KAAK,EAAEC,MAAM,EAAEC,OAAO,QAAQ,KAAK;AAC5C,OAAO,KAAKC,IAAI,MAAM,MAAM;AAC5B,SAASC,YAAY,QAAQ,MAAM;AACnC,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,OAAO,KAAKC,IAAI,MAAM,MAAM;AAC5B,OAAOC,MAAM,IAAIC,WAAW,QAAQ,QAAQ;AAC5C,SAASC,OAAO,QAAQ,UAAU;AAElC,SAASC,2BAA2BA,CAACC,CAAC,EAAEC,MAAM,EAAE;EAC9C,IAAI,CAACD,CAAC,EAAE;EACR,IAAI,OAAOA,CAAC,KAAK,QAAQ,EAAE,OAAOE,iBAAiB,CAACF,CAAC,EAAEC,MAAM,CAAC;EAC9D,IAAIE,CAAC,GAAGC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACP,CAAC,CAAC,CAACQ,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACtD,IAAIL,CAAC,KAAK,QAAQ,IAAIH,CAAC,CAACS,WAAW,EAAEN,CAAC,GAAGH,CAAC,CAACS,WAAW,CAACC,IAAI;EAC3D,IAAIP,CAAC,KAAK,KAAK,IAAIA,CAAC,KAAK,KAAK,EAAE,OAAOQ,KAAK,CAACC,IAAI,CAACZ,CAAC,CAAC;EACpD,IAAIG,CAAC,KAAK,WAAW,IAAI,0CAA0C,CAACU,IAAI,CAACV,CAAC,CAAC,EAAE,OAAOD,iBAAiB,CAACF,CAAC,EAAEC,MAAM,CAAC;AAClH;AAEA,SAASC,iBAAiBA,CAACY,GAAG,EAAEC,GAAG,EAAE;EACnC,IAAIA,GAAG,IAAI,IAAI,IAAIA,GAAG,GAAGD,GAAG,CAACE,MAAM,EAAED,GAAG,GAAGD,GAAG,CAACE,MAAM;EAErD,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEC,IAAI,GAAG,IAAIP,KAAK,CAACI,GAAG,CAAC,EAAEE,CAAC,GAAGF,GAAG,EAAEE,CAAC,EAAE,EAAEC,IAAI,CAACD,CAAC,CAAC,GAAGH,GAAG,CAACG,CAAC,CAAC;EAErE,OAAOC,IAAI;AACb;AAEA,SAASC,+BAA+BA,CAACnB,CAAC,EAAEoB,cAAc,EAAE;EAC1D,IAAIC,EAAE,GAAG,OAAOC,MAAM,KAAK,WAAW,IAAItB,CAAC,CAACsB,MAAM,CAACC,QAAQ,CAAC,IAAIvB,CAAC,CAAC,YAAY,CAAC;EAC/E,IAAIqB,EAAE,EAAE,OAAO,CAACA,EAAE,GAAGA,EAAE,CAACd,IAAI,CAACP,CAAC,CAAC,EAAEwB,IAAI,CAACC,IAAI,CAACJ,EAAE,CAAC;EAE9C,IAAIV,KAAK,CAACe,OAAO,CAAC1B,CAAC,CAAC,KAAKqB,EAAE,GAAGtB,2BAA2B,CAACC,CAAC,CAAC,CAAC,IAAIoB,cAAc,IAAIpB,CAAC,IAAI,OAAOA,CAAC,CAACgB,MAAM,KAAK,QAAQ,EAAE;IACpH,IAAIK,EAAE,EAAErB,CAAC,GAAGqB,EAAE;IACd,IAAIJ,CAAC,GAAG,CAAC;IACT,OAAO,YAAY;MACjB,IAAIA,CAAC,IAAIjB,CAAC,CAACgB,MAAM,EAAE,OAAO;QACxBW,IAAI,EAAE;MACR,CAAC;MACD,OAAO;QACLA,IAAI,EAAE,KAAK;QACXC,KAAK,EAAE5B,CAAC,CAACiB,CAAC,EAAE;MACd,CAAC;IACH,CAAC;EACH;EAEA,MAAM,IAAIY,SAAS,CAAC,uIAAuI,CAAC;AAC9J;;AAEA;AACA;AACA,IAAMC,MAAM,GAAGR,MAAM,CAAC,QAAQ,CAAC;AAC/B,IAAMS,IAAI,GAAGT,MAAM,CAAC,MAAM,CAAC;AAC3B,IAAMU,MAAM,GAAGV,MAAM,CAAC,QAAQ,CAAC;AAAC,IAC1BW,IAAI;EACR,SAAAA,KAAA,EAAc;IAAAC,eAAA,OAAAD,IAAA;IACZ7B,MAAM,CAAC+B,cAAc,CAAC,IAAI,EAAEb,MAAM,CAACc,WAAW,EAAE;MAC9CR,KAAK,EAAE,MAAM;MACbS,QAAQ,EAAE,KAAK;MACfC,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAChB,CAAC,CAAC;IACF,IAAI,CAACP,MAAM,CAAC,GAAG,KAAK;IACpB,IAAI,CAACD,IAAI,CAAC,GAAG,EAAE;IACf,IAAMS,SAAS,GAAGC,SAAS,CAAC,CAAC,CAAC;IAC9B,IAAMC,OAAO,GAAGD,SAAS,CAAC,CAAC,CAAC;IAC5B,IAAME,OAAO,GAAG,EAAE;IAElB,IAAIH,SAAS,EAAE;MACb,IAAMI,CAAC,GAAGJ,SAAS;MACnB,IAAMxB,MAAM,GAAG6B,MAAM,CAACD,CAAC,CAAC5B,MAAM,CAAC;MAE/B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,EAAEC,CAAC,EAAE,EAAE;QAC/B,IAAM6B,OAAO,GAAGF,CAAC,CAAC3B,CAAC,CAAC;QACpB,IAAI8B,MAAM;QAEV,IAAID,OAAO,YAAYE,MAAM,EAAE;UAC7BD,MAAM,GAAGD,OAAO;QAClB,CAAC,MAAM,IAAIG,WAAW,CAACC,MAAM,CAACJ,OAAO,CAAC,EAAE;UACtCC,MAAM,GAAGC,MAAM,CAACpC,IAAI,CAAC,IAAIuC,UAAU,CAACL,OAAO,CAACC,MAAM,EAAED,OAAO,CAACM,UAAU,EAAEN,OAAO,CAACO,UAAU,CAAC,CAAC;QAC9F,CAAC,MAAM,IAAIP,OAAO,YAAYG,WAAW,EAAE;UACzCF,MAAM,GAAGC,MAAM,CAACpC,IAAI,CAAC,IAAIuC,UAAU,CAACL,OAAO,CAAC,CAAC;QAC/C,CAAC,MAAM,IAAIA,OAAO,YAAYb,IAAI,EAAE;UAClCc,MAAM,GAAGD,OAAO,CAAChB,MAAM,CAAC;QAC1B,CAAC,MAAM;UACLiB,MAAM,GAAGC,MAAM,CAACpC,IAAI,CAAC,OAAOkC,OAAO,KAAK,QAAQ,GAAGA,OAAO,GAAGQ,MAAM,CAACR,OAAO,CAAC,CAAC;QAC/E;QAEAH,OAAO,CAACY,IAAI,CAACR,MAAM,CAAC;MACtB;IACF;IAEA,IAAI,CAACjB,MAAM,CAAC,GAAGkB,MAAM,CAACQ,MAAM,CAACb,OAAO,CAAC;IACrC,IAAMc,IAAI,GAAGf,OAAO,IAAIA,OAAO,CAACe,IAAI,KAAKC,SAAS,IAAIJ,MAAM,CAACZ,OAAO,CAACe,IAAI,CAAC,CAACE,WAAW,CAAC,CAAC;IAExF,IAAIF,IAAI,IAAI,CAAC,kBAAkB,CAAC5C,IAAI,CAAC4C,IAAI,CAAC,EAAE;MAC1C,IAAI,CAAC1B,IAAI,CAAC,GAAG0B,IAAI;IACnB;EACF;EAACG,YAAA,CAAA3B,IAAA;IAAA4B,GAAA;IAAAC,GAAA,EAED,SAAAA,IAAA,EAAW;MACT,OAAO,IAAI,CAAC9B,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,CAACF,MAAM,CAAC,CAACd,MAAM;IAC/C;EAAC;IAAA6C,GAAA;IAAAC,GAAA,EAED,SAAAA,IAAA,EAAW;MACT,OAAO,IAAI,CAAC/B,IAAI,CAAC;IACnB;EAAC;IAAA8B,GAAA;IAAAC,GAAA,EAED,SAAAA,IAAA,EAAe;MACb,OAAO,IAAI,CAAC9B,MAAM,CAAC;IACrB;EAAC;IAAA6B,GAAA;IAAAjC,KAAA,EAED,SAAApB,MAAA,EAAQ;MACN,IAAMuD,IAAI,GAAG,IAAI,CAACA,IAAI;MACtB,IAAMC,KAAK,GAAGvB,SAAS,CAAC,CAAC,CAAC;MAC1B,IAAMwB,GAAG,GAAGxB,SAAS,CAAC,CAAC,CAAC;MACxB,IAAIyB,aAAa,EAAEC,WAAW;MAE9B,IAAIH,KAAK,KAAKN,SAAS,EAAE;QACvBQ,aAAa,GAAG,CAAC;MACnB,CAAC,MAAM,IAAIF,KAAK,GAAG,CAAC,EAAE;QACpBE,aAAa,GAAGE,IAAI,CAACC,GAAG,CAACN,IAAI,GAAGC,KAAK,EAAE,CAAC,CAAC;MAC3C,CAAC,MAAM;QACLE,aAAa,GAAGE,IAAI,CAACE,GAAG,CAACN,KAAK,EAAED,IAAI,CAAC;MACvC;MAEA,IAAIE,GAAG,KAAKP,SAAS,EAAE;QACrBS,WAAW,GAAGJ,IAAI;MACpB,CAAC,MAAM,IAAIE,GAAG,GAAG,CAAC,EAAE;QAClBE,WAAW,GAAGC,IAAI,CAACC,GAAG,CAACN,IAAI,GAAGE,GAAG,EAAE,CAAC,CAAC;MACvC,CAAC,MAAM;QACLE,WAAW,GAAGC,IAAI,CAACE,GAAG,CAACL,GAAG,EAAEF,IAAI,CAAC;MACnC;MAEA,IAAMQ,IAAI,GAAGH,IAAI,CAACC,GAAG,CAACF,WAAW,GAAGD,aAAa,EAAE,CAAC,CAAC;MACrD,IAAMnB,MAAM,GAAG,IAAI,CAACjB,MAAM,CAAC;MAC3B,IAAM0C,YAAY,GAAGzB,MAAM,CAACvC,KAAK,CAAC0D,aAAa,EAAEA,aAAa,GAAGK,IAAI,CAAC;MACtE,IAAME,IAAI,GAAG,IAAIxC,IAAI,CAAC,EAAE,EAAE;QACxBwB,IAAI,EAAEhB,SAAS,CAAC,CAAC;MACnB,CAAC,CAAC;MACFgC,IAAI,CAAC3C,MAAM,CAAC,GAAG0C,YAAY;MAC3BC,IAAI,CAACzC,MAAM,CAAC,GAAG,IAAI,CAACA,MAAM,CAAC;MAC3B,OAAOyC,IAAI;IACb;EAAC;IAAAZ,GAAA;IAAAjC,KAAA,EAED,SAAA8C,MAAA,EAAQ;MACN,IAAI,CAAC1C,MAAM,CAAC,GAAG,IAAI;IACrB;EAAC;EAAA,OAAAC,IAAA;AAAA;AAGH7B,MAAM,CAAC+B,cAAc,CAACF,IAAI,CAAC5B,SAAS,EAAEiB,MAAM,CAACc,WAAW,EAAE;EACxDR,KAAK,EAAE,eAAe;EACtBS,QAAQ,EAAE,KAAK;EACfC,UAAU,EAAE,KAAK;EACjBC,YAAY,EAAE;AAChB,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMoC,WAAW,GAAG;EAClBC,sBAAsB,EAAE,cAAc;EACtCC,kBAAkB,EAAE,YAAY;EAChCC,qBAAqB,EAAE,WAAW;EAClCC,2BAA2B,EAAE,cAAc;EAC3CC,gCAAgC,EAAE;AACpC,CAAC;AACD,SAASC,UAAUA,CAACC,OAAO,EAAEzB,IAAI,EAAE0B,WAAW,EAAE;EAC9CC,KAAK,CAAC7E,IAAI,CAAC,IAAI,EAAE2E,OAAO,CAAC;EACzB,IAAMG,KAAK,GAAG,cAAc;EAE5B,IAAIA,KAAK,CAACxE,IAAI,CAACqE,OAAO,CAAC,EAAE;IACvB,IAAII,SAAS,GAAGD,KAAK,CAACE,IAAI,CAACL,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;IAExC,IAAI9E,MAAM,CAACC,SAAS,CAACmF,cAAc,CAACjF,IAAI,CAACoE,WAAW,EAAEW,SAAS,CAAC,EAAEA,SAAS,GAAGX,WAAW,CAACW,SAAS,CAAC;IACpGH,WAAW,GAAG;MACZM,IAAI,EAAEH;IACR,CAAC;EACH;EAEA,IAAI,CAACJ,OAAO,GAAGA,OAAO;EACtB,IAAI,CAACzB,IAAI,GAAGA,IAAI,CAAC,CAAC;;EAElB,IAAI0B,WAAW,EAAE;IACf,IAAI,CAACM,IAAI,GAAG,IAAI,CAACC,KAAK,GAAGP,WAAW,CAACM,IAAI;EAC3C,CAAC,CAAC;;EAGFL,KAAK,CAACO,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAClF,WAAW,CAAC;AACjD;AACAwE,UAAU,CAAC5E,SAAS,GAAGD,MAAM,CAACwF,MAAM,CAACR,KAAK,CAAC/E,SAAS,CAAC;AACrD4E,UAAU,CAAC5E,SAAS,CAACI,WAAW,GAAGwE,UAAU;AAC7CA,UAAU,CAAC5E,SAAS,CAACK,IAAI,GAAG,YAAY;AAExC,IAAMmF,SAAS,GAAGvE,MAAM,CAAC,WAAW,CAAC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASwE,IAAIA,CAACC,IAAI,EAGV;EAAA,IAAAC,IAAA,GAAAvD,SAAA,CAAAzB,MAAA,QAAAyB,SAAA,QAAAiB,SAAA,GAAAjB,SAAA,MAAJ,CAAC,CAAC;IAAAwD,SAAA,GAAAD,IAAA,CAFJjC,IAAI;IAAJA,IAAI,GAAAkC,SAAA,cAAG,CAAC,GAAAA,SAAA;IAAAC,YAAA,GAAAF,IAAA,CACRG,OAAO;IAAPA,OAAO,GAAAD,YAAA,cAAG,CAAC,GAAAA,YAAA;EAEX,IAAIH,IAAI,IAAI,IAAI,EAAE;IAChB;IACAA,IAAI,GAAG,IAAI;EACb,CAAC,MAAM,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE,CAAC,KAAM,IAAIA,IAAI,YAAY9D,IAAI,EAAE,CAAC,KAAM,IAAIe,MAAM,CAACoD,QAAQ,CAACL,IAAI,CAAC,EAAE,CAAC,KAAM,IAAIA,IAAI,YAAYnG,MAAM,EAAE,CAAC,KAAM;IAChJ;IACA;IACAmG,IAAI,GAAGzC,MAAM,CAACyC,IAAI,CAAC;EACrB;EAEA,IAAI,CAACA,IAAI,GAAGA,IAAI;EAChB,IAAI,CAACF,SAAS,CAAC,GAAG,KAAK;EACvB,IAAI,CAAC9B,IAAI,GAAGA,IAAI;EAChB,IAAI,CAACoC,OAAO,GAAGA,OAAO;AACxB;AACAL,IAAI,CAACzF,SAAS,GAAG;EACf,IAAIgG,QAAQA,CAAA,EAAG;IACb,OAAO,IAAI,CAACR,SAAS,CAAC;EACxB,CAAC;EAED;AACF;AACA;AACA;AACA;EACES,WAAW,WAAAA,YAAA,EAAG;IACZ,OAAOC,WAAW,CAAChG,IAAI,CAAC,IAAI,CAAC,CAACiG,IAAI,CAAC,UAAAC,GAAG;MAAA,OAAIA,GAAG,CAAC1D,MAAM,CAACvC,KAAK,CAACiG,GAAG,CAACrD,UAAU,EAAEqD,GAAG,CAACrD,UAAU,GAAGqD,GAAG,CAACpD,UAAU,CAAC;IAAA,EAAC;EAC9G,CAAC;EAED;AACF;AACA;AACA;AACA;EACEoB,IAAI,WAAAA,KAAA,EAAG;IACL,IAAMiC,EAAE,GAAG,IAAI,CAACC,OAAO,IAAI,IAAI,CAACA,OAAO,CAAC7C,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE;IACjE,OAAOyC,WAAW,CAAChG,IAAI,CAAC,IAAI,CAAC,CAACiG,IAAI,CAAC,UAAAC,GAAG;MAAA,OAAIrG,MAAM,CAACwG,MAAM;MAAE;MACzD,IAAI3E,IAAI,CAAC,EAAE,EAAE;QACXwB,IAAI,EAAEiD,EAAE,CAAC/C,WAAW,CAAC;MACvB,CAAC,CAAC,EAAAkD,eAAA,KACC/E,MAAM,EAAG2E,GAAG,CACd,CAAC;IAAA,EAAC;EACL,CAAC;EAED;AACF;AACA;AACA;AACA;EACEK,IAAI,WAAAA,KAAA,EAAG;IACL,OAAOP,WAAW,CAAChG,IAAI,CAAC,IAAI,CAAC,CAACiG,IAAI,CAAC,UAAAzD,MAAM;MAAA,OAAIgE,IAAI,CAAC1H,KAAK,CAAC0D,MAAM,CAACzC,QAAQ,CAAC,CAAC,CAAC;IAAA,EAAC;EAC7E,CAAC;EAED;AACF;AACA;AACA;AACA;EACE0G,IAAI,WAAAA,KAAA,EAAG;IACL,OAAOT,WAAW,CAAChG,IAAI,CAAC,IAAI,CAAC,CAACiG,IAAI,CAAC,UAAAzD,MAAM;MAAA,OAAIA,MAAM,CAACzC,QAAQ,CAAC,CAAC;IAAA,EAAC;EACjE,CAAC;EAED;AACF;AACA;AACA;AACA;EACEyC,MAAM,WAAAA,OAAA,EAAG;IACP,OAAOwD,WAAW,CAAChG,IAAI,CAAC,IAAI,CAAC;EAC/B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACE0G,aAAa,WAAAA,cAAA,EAAG;IAAA,IAAAC,KAAA;IACd,OAAOX,WAAW,CAAChG,IAAI,CAAC,IAAI,CAAC,CAACiG,IAAI,CAAC,UAAAzD,MAAM;MAAA,OAAIoE,WAAW,CAACpE,MAAM,EAAEmE,KAAI,CAACP,OAAO,CAAC;IAAA,EAAC;EACjF;AAEF,CAAC;AAEDb,IAAI,CAACsB,KAAK,GAAG,UAAUC,KAAK,EAAE;EAC5B,KAAK,IAAIC,SAAS,GAAGnG,+BAA+B,CAACf,MAAM,CAACmH,mBAAmB,CAACzB,IAAI,CAACzF,SAAS,CAAC,CAAC,EAAEmH,KAAK,EAAE,CAAC,CAACA,KAAK,GAAGF,SAAS,CAAC,CAAC,EAAE3F,IAAI,GAAG;IACrI,IAAMjB,IAAI,GAAG8G,KAAK,CAAC5F,KAAK;;IAExB;IACA,IAAI,EAAElB,IAAI,IAAI2G,KAAK,CAAC,EAAE;MACpB,IAAMI,IAAI,GAAGrH,MAAM,CAACsH,wBAAwB,CAAC5B,IAAI,CAACzF,SAAS,EAAEK,IAAI,CAAC;MAClEN,MAAM,CAAC+B,cAAc,CAACkF,KAAK,EAAE3G,IAAI,EAAE+G,IAAI,CAAC;IAC1C;EACF;AACF,CAAC;AACD;AACA;AACA;AACA;AACA;;AAGA,SAASlB,WAAWA,CAAA,EAAG;EAAA,IAAAoB,MAAA;EACrB,IAAI,IAAI,CAAC9B,SAAS,CAAC,EAAE;IACnB,OAAO+B,OAAO,CAACC,MAAM,CAAC,IAAIzC,KAAK,2BAAA5B,MAAA,CAA2B,IAAI,CAACsE,GAAG,CAAE,CAAC,CAAC;EACxE;EAEA,IAAI,CAACjC,SAAS,CAAC,GAAG,IAAI,CAAC,CAAC;;EAExB,IAAI,IAAI,CAACE,IAAI,KAAK,IAAI,EAAE;IACtB,OAAO6B,OAAO,CAACrI,OAAO,CAACyD,MAAM,CAAC+E,KAAK,CAAC,CAAC,CAAC,CAAC;EACzC,CAAC,CAAC;;EAGF,IAAI,OAAO,IAAI,CAAChC,IAAI,KAAK,QAAQ,EAAE;IACjC,OAAO6B,OAAO,CAACrI,OAAO,CAACyD,MAAM,CAACpC,IAAI,CAAC,IAAI,CAACmF,IAAI,CAAC,CAAC;EAChD,CAAC,CAAC;;EAGF,IAAI,IAAI,CAACA,IAAI,YAAY9D,IAAI,EAAE;IAC7B,OAAO2F,OAAO,CAACrI,OAAO,CAAC,IAAI,CAACwG,IAAI,CAACjE,MAAM,CAAC,CAAC;EAC3C,CAAC,CAAC;;EAGF,IAAIkB,MAAM,CAACoD,QAAQ,CAAC,IAAI,CAACL,IAAI,CAAC,EAAE;IAC9B,OAAO6B,OAAO,CAACrI,OAAO,CAAC,IAAI,CAACwG,IAAI,CAAC;EACnC,CAAC,CAAC;;EAGF,IAAI,EAAE,IAAI,CAACA,IAAI,YAAYnG,MAAM,CAAC,EAAE;IAClC,OAAOgI,OAAO,CAACrI,OAAO,CAACyD,MAAM,CAAC+E,KAAK,CAAC,CAAC,CAAC,CAAC;EACzC,CAAC,CAAC;EACF;;EAGA,IAAMC,KAAK,GAAG,EAAE;EAChB,IAAIC,UAAU,GAAG,CAAC;EAClB,IAAIC,KAAK,GAAG,KAAK;EACjB,OAAO,IAAIN,OAAO,CAAC,UAACrI,OAAO,EAAEsI,MAAM,EAAK;IACtC,IAAIM,UAAU,CAAC,CAAC;;IAEhB,IAAIR,MAAI,CAACxB,OAAO,EAAE;MAChBgC,UAAU,GAAGC,UAAU,CAAC,YAAM;QAC5BF,KAAK,GAAG,IAAI;QACZL,MAAM,CAAC,IAAI5C,UAAU,2CAAAzB,MAAA,CAA2CmE,MAAI,CAACG,GAAG,aAAAtE,MAAA,CAAUmE,MAAI,CAACxB,OAAO,UAAO,cAAc,CAAC,CAAC;QACrHwB,MAAI,CAAC5B,IAAI,CAACsC,IAAI,CAAC,gBAAgB,CAAC;MAClC,CAAC,EAAEV,MAAI,CAACxB,OAAO,CAAC;IAClB,CAAC,CAAC;;IAGFwB,MAAI,CAAC5B,IAAI,CAACuC,EAAE,CAAC,OAAO,EAAE,UAAAC,GAAG,EAAI;MAC3BV,MAAM,CAAC,IAAI5C,UAAU,gDAAAzB,MAAA,CAAgDmE,MAAI,CAACG,GAAG,QAAAtE,MAAA,CAAK+E,GAAG,CAACrD,OAAO,GAAI,QAAQ,EAAEqD,GAAG,CAAC,CAAC;IAClH,CAAC,CAAC;IACFZ,MAAI,CAAC5B,IAAI,CAACuC,EAAE,CAAC,MAAM,EAAE,UAAAE,KAAK,EAAI;MAC5B,IAAIN,KAAK,IAAIM,KAAK,KAAK,IAAI,EAAE;QAC3B;MACF;MAEA,IAAIb,MAAI,CAAC5D,IAAI,IAAIkE,UAAU,GAAGO,KAAK,CAACxH,MAAM,GAAG2G,MAAI,CAAC5D,IAAI,EAAE;QACtDmE,KAAK,GAAG,IAAI;QACZL,MAAM,CAAC,IAAI5C,UAAU,oBAAAzB,MAAA,CAAoBmE,MAAI,CAACG,GAAG,mBAAAtE,MAAA,CAAgBmE,MAAI,CAAC5D,IAAI,GAAI,UAAU,CAAC,CAAC;QAC1F4D,MAAI,CAAC5B,IAAI,CAACsC,IAAI,CAAC,gBAAgB,CAAC;QAChC;MACF;MAEAJ,UAAU,IAAIO,KAAK,CAACxH,MAAM;MAC1BgH,KAAK,CAACzE,IAAI,CAACiF,KAAK,CAAC;IACnB,CAAC,CAAC;IACFb,MAAI,CAAC5B,IAAI,CAACuC,EAAE,CAAC,KAAK,EAAE,YAAM;MACxB,IAAIJ,KAAK,EAAE;QACT;MACF;MAEAO,YAAY,CAACN,UAAU,CAAC;MACxB5I,OAAO,CAACyD,MAAM,CAACQ,MAAM,CAACwE,KAAK,CAAC,CAAC;IAC/B,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASb,WAAWA,CAACpE,MAAM,EAAE4D,OAAO,EAAE;EACpC,IAAMD,EAAE,GAAGC,OAAO,CAAC7C,GAAG,CAAC,cAAc,CAAC;EACtC,IAAI4E,OAAO,GAAG,OAAO;EACrB,IAAIC,GAAG,CAAC,CAAC;;EAET,IAAIjC,EAAE,EAAE;IACNiC,GAAG,GAAG,kBAAkB,CAACpD,IAAI,CAACmB,EAAE,CAAC;EACnC,CAAC,CAAC;;EAGF,IAAMkC,GAAG,GAAG7F,MAAM,CAACvC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAACF,QAAQ,CAAC,CAAC,CAAC,CAAC;;EAE9C,IAAI,CAACqI,GAAG,IAAIC,GAAG,EAAE;IACfD,GAAG,GAAG,gCAAgC,CAACpD,IAAI,CAACqD,GAAG,CAAC;EAClD,CAAC,CAAC;;EAGF,IAAI,CAACD,GAAG,IAAIC,GAAG,EAAE;IACfD,GAAG,GAAG,wEAAwE,CAACpD,IAAI,CAACqD,GAAG,CAAC;IAExF,IAAID,GAAG,EAAE;MACPA,GAAG,GAAG,eAAe,CAACpD,IAAI,CAACoD,GAAG,CAACE,GAAG,CAAC,CAAC,CAAC;IACvC;EACF,CAAC,CAAC;;EAGF,IAAI,CAACF,GAAG,IAAIC,GAAG,EAAE;IACfD,GAAG,GAAG,kCAAkC,CAACpD,IAAI,CAACqD,GAAG,CAAC;EACpD,CAAC,CAAC;;EAGF,IAAID,GAAG,EAAE;IACPD,OAAO,GAAGC,GAAG,CAACE,GAAG,CAAC,CAAC,CAAC,CAAC;IACrB;;IAEA,IAAIH,OAAO,KAAK,QAAQ,IAAIA,OAAO,KAAK,KAAK,EAAE;MAC7CA,OAAO,GAAG,SAAS;IACrB;EACF,CAAC,CAAC;;EAGF,OAAO5I,OAAO,CAACiD,MAAM,EAAE,OAAO,EAAE2F,OAAO,CAAC,CAACpI,QAAQ,CAAC,CAAC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASwI,MAAKA,CAACC,QAAQ,EAAE;EACvB,IAAIC,EAAE,EAAEC,EAAE;EACV,IAAIlD,IAAI,GAAGgD,QAAQ,CAAChD,IAAI,CAAC,CAAC;;EAE1B,IAAIgD,QAAQ,CAAC1C,QAAQ,EAAE;IACrB,MAAM,IAAIjB,KAAK,CAAC,oCAAoC,CAAC;EACvD,CAAC,CAAC;EACF;;EAGA,IAAIW,IAAI,YAAYnG,MAAM,IAAI,OAAOmG,IAAI,CAACmD,WAAW,KAAK,UAAU,EAAE;IACpE;IACAF,EAAE,GAAG,IAAInJ,WAAW,CAAC,CAAC;IACtBoJ,EAAE,GAAG,IAAIpJ,WAAW,CAAC,CAAC;IACtBkG,IAAI,CAACoD,IAAI,CAACH,EAAE,CAAC;IACbjD,IAAI,CAACoD,IAAI,CAACF,EAAE,CAAC,CAAC,CAAC;;IAEfF,QAAQ,CAAChD,IAAI,GAAGiD,EAAE;IAClBjD,IAAI,GAAGkD,EAAE;EACX;EAEA,OAAOlD,IAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASqD,kBAAkBA,CAACL,QAAQ,EAAE;EACpC,IAAMhD,IAAI,GAAGgD,QAAQ,CAAChD,IAAI,CAAC,CAAC;EAC5B;;EAEA,IAAIA,IAAI,KAAK,IAAI,EAAE;IACjB;IACA,OAAO,IAAI;EACb,CAAC,MAAM,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;IACnC;IACA,OAAO,0BAA0B;EACnC,CAAC,MAAM,IAAIA,IAAI,YAAY9D,IAAI,EAAE;IAC/B;IACA,OAAO8D,IAAI,CAACtC,IAAI,IAAI,IAAI;EAC1B,CAAC,MAAM,IAAIT,MAAM,CAACoD,QAAQ,CAACL,IAAI,CAAC,EAAE;IAChC;IACA,OAAO,IAAI;EACb,CAAC,MAAM,IAAI,OAAOA,IAAI,CAACmD,WAAW,KAAK,UAAU,EAAE;IACjD;IACA,uCAAA1F,MAAA,CAAuCuC,IAAI,CAACmD,WAAW,CAAC,CAAC;EAC3D,CAAC,MAAM;IACL;IACA;IACA,OAAO,IAAI;EACb;AACF;AACA,SAASG,aAAaA,CAACN,QAAQ,EAAE;EAC/B,IAAMhD,IAAI,GAAGgD,QAAQ,CAAChD,IAAI,CAAC,CAAC;;EAE5B,IAAIA,IAAI,KAAK,IAAI,EAAE;IACjB;IACA,OAAO,CAAC;EACV,CAAC,MAAM,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;IACnC;IACA,OAAO/C,MAAM,CAACK,UAAU,CAAC0C,IAAI,CAAC;EAChC,CAAC,MAAM,IAAIA,IAAI,YAAY9D,IAAI,EAAE;IAC/B;IACA,OAAO8D,IAAI,CAAChC,IAAI;EAClB,CAAC,MAAM,IAAIf,MAAM,CAACoD,QAAQ,CAACL,IAAI,CAAC,EAAE;IAChC;IACA,OAAOA,IAAI,CAAC/E,MAAM;EACpB,CAAC,MAAM,IAAI+E,IAAI,IAAI,OAAOA,IAAI,CAACuD,aAAa,KAAK,UAAU,EAAE;IAC3D;IACA;IACA,IAAIvD,IAAI,CAACwD,iBAAiB,IAAIxD,IAAI,CAACwD,iBAAiB,CAACvI,MAAM,KAAK,CAAC;IAAI;IACrE+E,IAAI,CAACyD,cAAc,IAAIzD,IAAI,CAACyD,cAAc,CAAC,CAAC,EAAE;MAC5C;MACA,OAAOzD,IAAI,CAACuD,aAAa,CAAC,CAAC;IAC7B;IAEA,OAAO,IAAI;EACb,CAAC,MAAM;IACL;IACA;IACA,OAAO,IAAI;EACb;AACF;AACA,SAASG,aAAaA,CAACC,IAAI,EAAEX,QAAQ,EAAE;EACrC,IAAMhD,IAAI,GAAGgD,QAAQ,CAAChD,IAAI;EAE1B,IAAIA,IAAI,KAAK,IAAI,EAAE;IACjB;IACA2D,IAAI,CAACzF,GAAG,CAAC,CAAC;EACZ,CAAC,MAAM,IAAI,OAAO8B,IAAI,KAAK,QAAQ,EAAE;IACnC;IACA2D,IAAI,CAACC,KAAK,CAAC5D,IAAI,CAAC;IAChB2D,IAAI,CAACzF,GAAG,CAAC,CAAC;EACZ,CAAC,MAAM,IAAI8B,IAAI,YAAY9D,IAAI,EAAE;IAC/B;IACAyH,IAAI,CAACC,KAAK,CAAC5D,IAAI,CAACjE,MAAM,CAAC,CAAC;IACxB4H,IAAI,CAACzF,GAAG,CAAC,CAAC;EACZ,CAAC,MAAM,IAAIjB,MAAM,CAACoD,QAAQ,CAACL,IAAI,CAAC,EAAE;IAChC;IACA2D,IAAI,CAACC,KAAK,CAAC5D,IAAI,CAAC;IAChB2D,IAAI,CAACzF,GAAG,CAAC,CAAC;EACZ,CAAC,MAAM;IACL;IACA,IAAI8E,QAAQ,CAACa,cAAc,EAAE;MAC3BF,IAAI,CAACG,eAAe,GAAGd,QAAQ,CAACc,eAAe,CAAC,CAAC;MACjD;;MAEAH,IAAI,CAACC,KAAK,CAAC,EAAE,CAAC;IAChB;IAEA5D,IAAI,CAACoD,IAAI,CAAC,IAAItJ,WAAW,CAAC,CAAC,CAAC,CAAC;IAAA,CAC5BsJ,IAAI,CAACO,IAAI,CAAC;EACb;AACF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASI,gBAAgBA,CAACC,EAAE,EAAE;EAC5B,IAAIA,EAAE,IAAI,EAAE,IAAIA,EAAE,IAAI,GAAG,EAAE;IACzB,OAAO,IAAI;EACb;EAEA,IAAIA,EAAE,IAAI,EAAE,IAAIA,EAAE,IAAI,EAAE,EAAE;IACxB,OAAO,IAAI;EACb;EAEA,IAAIA,EAAE,KAAK,EAAE,EAAE;IACb,OAAO,IAAI;EACb;EAEA,IAAIA,EAAE,IAAI,EAAE,IAAIA,EAAE,IAAI,EAAE,EAAE;IACxB,OAAO,IAAI;EACb;EAEA,IAAIA,EAAE,KAAK,EAAE,IAAIA,EAAE,KAAK,EAAE,IAAIA,EAAE,KAAK,EAAE,IAAIA,EAAE,KAAK,EAAE,EAAE;IACpD,OAAO,KAAK;EACd;EAEA,IAAIA,EAAE,IAAI,EAAE,IAAIA,EAAE,IAAI,EAAE,EAAE;IACxB,OAAO,IAAI;EACb;EAEA,IAAIA,EAAE,KAAK,GAAG,IAAIA,EAAE,KAAK,GAAG,EAAE;IAC5B,OAAO,IAAI;EACb;EAEA,OAAO,KAAK;AACd,CAAC,CAAC;;AAGF,SAASC,gBAAgBA,CAACC,GAAG,EAAE;EAC7B,IAAI,OAAOA,GAAG,KAAK,QAAQ,IAAIA,GAAG,CAACjJ,MAAM,KAAK,CAAC,EAAE;IAC/C,OAAO,KAAK;EACd;EAEA,IAAI,CAAC8I,gBAAgB,CAACG,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE;IACxC,OAAO,KAAK;EACd;EAEA,IAAMnJ,GAAG,GAAGkJ,GAAG,CAACjJ,MAAM;EAEtB,IAAID,GAAG,GAAG,CAAC,EAAE;IACX,IAAI,CAAC+I,gBAAgB,CAACG,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE;MACxC,OAAO,KAAK;IACd;IAEA,IAAInJ,GAAG,GAAG,CAAC,EAAE;MACX,IAAI,CAAC+I,gBAAgB,CAACG,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE;QACxC,OAAO,KAAK;MACd;MAEA,IAAInJ,GAAG,GAAG,CAAC,EAAE;QACX,IAAI,CAAC+I,gBAAgB,CAACG,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE;UACxC,OAAO,KAAK;QACd;QAEA,KAAK,IAAIjJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,GAAG,EAAEE,CAAC,EAAE,EAAE;UAC5B,IAAI,CAAC6I,gBAAgB,CAACG,GAAG,CAACC,UAAU,CAACjJ,CAAC,CAAC,CAAC,EAAE;YACxC,OAAO,KAAK;UACd;QACF;MACF;IACF;EACF;EAEA,OAAO,IAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASkJ,sBAAsBA,CAACF,GAAG,EAAE;EACnCA,GAAG,IAAI,EAAE;EAET,IAAIA,GAAG,CAACjJ,MAAM,GAAG,CAAC,EAAE;IAClB,OAAO,KAAK;EACd;EAEA,IAAIoJ,CAAC,GAAGH,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC;EAEzB,IAAIE,CAAC,IAAI,EAAE,IAAIA,CAAC,KAAK,CAAC,IAAIA,CAAC,GAAG,GAAG,IAAIA,CAAC,KAAK,GAAG,EAAE;IAC9C,OAAO,IAAI;EACb;EAEA,IAAIH,GAAG,CAACjJ,MAAM,GAAG,CAAC,EAAE;IAClB,OAAO,KAAK;EACd;EAEAoJ,CAAC,GAAGH,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC;EAErB,IAAIE,CAAC,IAAI,EAAE,IAAIA,CAAC,KAAK,CAAC,IAAIA,CAAC,GAAG,GAAG,IAAIA,CAAC,KAAK,GAAG,EAAE;IAC9C,OAAO,IAAI;EACb;EAEA,IAAIH,GAAG,CAACjJ,MAAM,GAAG,CAAC,EAAE;IAClB,OAAO,KAAK;EACd;EAEAoJ,CAAC,GAAGH,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC;EAErB,IAAIE,CAAC,IAAI,EAAE,IAAIA,CAAC,KAAK,CAAC,IAAIA,CAAC,GAAG,GAAG,IAAIA,CAAC,KAAK,GAAG,EAAE;IAC9C,OAAO,IAAI;EACb;EAEA,KAAK,IAAInJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgJ,GAAG,CAACjJ,MAAM,EAAE,EAAEC,CAAC,EAAE;IACnCmJ,CAAC,GAAGH,GAAG,CAACC,UAAU,CAACjJ,CAAC,CAAC;IAErB,IAAImJ,CAAC,IAAI,EAAE,IAAIA,CAAC,KAAK,CAAC,IAAIA,CAAC,GAAG,GAAG,IAAIA,CAAC,KAAK,GAAG,EAAE;MAC9C,OAAO,IAAI;IACb;EACF;EAEA,OAAO,KAAK;AACd;AAEA,SAASC,YAAYA,CAAC3J,IAAI,EAAE;EAC1BA,IAAI,IAAI,EAAE;EAEV,IAAI,CAACsJ,gBAAgB,CAACtJ,IAAI,CAAC,EAAE;IAC3B,MAAM,IAAImB,SAAS,IAAA2B,MAAA,CAAI9C,IAAI,qCAAkC,CAAC;EAChE;EAEA,OAAOA,IAAI,CAACiD,WAAW,CAAC,CAAC;AAC3B;AAEA,SAAS2G,aAAaA,CAAC1I,KAAK,EAAE;EAC5BA,KAAK,IAAI,EAAE;EAEX,IAAIuI,sBAAsB,CAACvI,KAAK,CAAC,EAAE;IACjC,MAAM,IAAIC,SAAS,IAAA2B,MAAA,CAAI5B,KAAK,sCAAmC,CAAC;EAClE;EAEA,OAAOA,KAAK;AACd;AAEA,IAAM2I,GAAG,GAAGjJ,MAAM,CAAC,KAAK,CAAC;AAAC,IACpBkJ,OAAO,0BAAAC,gBAAA;EACX;AACF;AACA;AACA;AACA;EACE,SAAAD,QAAA,EAA8B;IAAA,IAAlBE,IAAI,GAAAjI,SAAA,CAAAzB,MAAA,QAAAyB,SAAA,QAAAiB,SAAA,GAAAjB,SAAA,MAAGiB,SAAS;IAAAxB,eAAA,OAAAsI,OAAA;IAC1B,IAAI,CAACD,GAAG,CAAC,GAAGnK,MAAM,CAACwF,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;IACjC;;IAEA,IAAI8E,IAAI,IAAI,IAAI,EAAE,CAAC,KAAM,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;MACrD,IAAMC,MAAM,GAAGD,IAAI,CAACpJ,MAAM,CAACC,QAAQ,CAAC;MAEpC,IAAIoJ,MAAM,IAAI,IAAI,EAAE;QAClB,IAAI,OAAOA,MAAM,KAAK,UAAU,EAAE;UAChC,MAAM,IAAI9I,SAAS,CAAC,+BAA+B,CAAC;QACtD,CAAC,CAAC;QACF;;QAGA,IAAM+I,KAAK,GAAG,EAAE;QAEhB,KAAK,IAAItD,SAAS,GAAGnG,+BAA+B,CAACuJ,IAAI,CAAC,EAAElD,KAAK,EAAE,CAAC,CAACA,KAAK,GAAGF,SAAS,CAAC,CAAC,EAAE3F,IAAI,GAAG;UAC/F,IAAMkJ,IAAI,GAAGrD,KAAK,CAAC5F,KAAK;UAExB,IAAI,OAAOiJ,IAAI,KAAK,QAAQ,IAAI,OAAOA,IAAI,CAACvJ,MAAM,CAACC,QAAQ,CAAC,KAAK,UAAU,EAAE;YAC3E,MAAM,IAAIM,SAAS,CAAC,mCAAmC,CAAC;UAC1D;UAEA+I,KAAK,CAACrH,IAAI,CAAC5C,KAAK,CAACC,IAAI,CAACiK,IAAI,CAAC,CAAC;QAC9B;QAEA,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,MAAM,GAAGH,KAAK,EAAEE,EAAE,GAAGC,MAAM,CAAC/J,MAAM,EAAE8J,EAAE,EAAE,EAAE;UACzD,IAAMD,KAAI,GAAGE,MAAM,CAACD,EAAE,CAAC;UAEvB,IAAID,KAAI,CAAC7J,MAAM,KAAK,CAAC,EAAE;YACrB,MAAM,IAAIa,SAAS,CAAC,6CAA6C,CAAC;UACpE;UAEA,IAAI,CAACmJ,MAAM,CAACH,KAAI,CAAC,CAAC,CAAC,EAAEA,KAAI,CAAC,CAAC,CAAC,CAAC;QAC/B;MACF,CAAC,MAAM;QACL;QACA,KAAK,IAAII,GAAG,GAAG,CAAC,EAAEC,YAAY,GAAG9K,MAAM,CAAC+K,IAAI,CAACT,IAAI,CAAC,EAAEO,GAAG,GAAGC,YAAY,CAAClK,MAAM,EAAEiK,GAAG,EAAE,EAAE;UACpF,IAAMpH,GAAG,GAAGqH,YAAY,CAACD,GAAG,CAAC;UAC7B,IAAMrJ,KAAK,GAAG8I,IAAI,CAAC7G,GAAG,CAAC;UACvB,IAAI,CAACmH,MAAM,CAACnH,GAAG,EAAEjC,KAAK,CAAC;QACzB;MACF;IACF,CAAC,MAAM;MACL,MAAM,IAAIC,SAAS,CAAC,wCAAwC,CAAC;IAC/D;IAEAzB,MAAM,CAAC+B,cAAc,CAAC,IAAI,EAAEb,MAAM,CAACc,WAAW,EAAE;MAC9CR,KAAK,EAAE,SAAS;MAChBS,QAAQ,EAAE,KAAK;MACfC,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAChB,CAAC,CAAC;EACJ;EACA;AACF;AACA;AACA;AACA;AACA;EALEqB,YAAA,CAAA4G,OAAA;IAAA3G,GAAA;IAAAjC,KAAA,EAQA,SAAAkC,IAAIpD,IAAI,EAAE;MACR,IAAM0K,IAAI,GAAG,IAAI,CAACb,GAAG,CAAC,CAACF,YAAY,CAAC3J,IAAI,CAAC,CAAC;MAE1C,IAAI,CAAC0K,IAAI,EAAE;QACT,OAAO,IAAI;MACb;MAEA,OAAOA,IAAI,CAACC,IAAI,CAAC,GAAG,CAAC;IACvB;IACA;AACF;AACA;AACA;AACA;AACA;EALE;IAAAxH,GAAA;IAAAjC,KAAA,EAQA,SAAA0J,QAAQC,QAAQ,EAAuB;MAAA,IAArBC,OAAO,GAAA/I,SAAA,CAAAzB,MAAA,QAAAyB,SAAA,QAAAiB,SAAA,GAAAjB,SAAA,MAAGiB,SAAS;MACnC,IAAIkH,KAAK,GAAGa,cAAc,CAAC,IAAI,CAAC;MAChC,IAAIxK,CAAC,GAAG,CAAC;MAET,OAAOA,CAAC,GAAG2J,KAAK,CAAC5J,MAAM,EAAE;QACvB,IAAM0K,QAAQ,GAAGd,KAAK,CAAC3J,CAAC,CAAC;UACnBP,IAAI,GAAGgL,QAAQ,CAAC,CAAC,CAAC;UAClB9J,KAAK,GAAG8J,QAAQ,CAAC,CAAC,CAAC;QACzBH,QAAQ,CAAChL,IAAI,CAACiL,OAAO,EAAE5J,KAAK,EAAElB,IAAI,EAAE,IAAI,CAAC;QACzCkK,KAAK,GAAGa,cAAc,CAAC,IAAI,CAAC;QAC5BxK,CAAC,EAAE;MACL;IACF;IACA;AACF;AACA;AACA;AACA;AACA;EALE;IAAA4C,GAAA;IAAAjC,KAAA,EAQA,SAAA+J,IAAIjL,IAAI,EAAEkB,KAAK,EAAE;MACf,IAAI,CAAC2I,GAAG,CAAC,CAACF,YAAY,CAAC3J,IAAI,CAAC,CAAC,GAAG,CAAC4J,aAAa,CAAC1I,KAAK,CAAC,CAAC;IACxD;IACA;AACF;AACA;AACA;AACA;AACA;EALE;IAAAiC,GAAA;IAAAjC,KAAA,EAQA,SAAAoJ,OAAOtK,IAAI,EAAEkB,KAAK,EAAE;MAClB,IAAI,CAAC,IAAI,CAACgK,GAAG,CAAClL,IAAI,CAAC,EAAE;QACnB,IAAI,CAACiL,GAAG,CAACjL,IAAI,EAAEkB,KAAK,CAAC;QACrB;MACF;MAEA,IAAI,CAAC2I,GAAG,CAAC,CAACF,YAAY,CAAC3J,IAAI,CAAC,CAAC,CAAC6C,IAAI,CAAC+G,aAAa,CAAC1I,KAAK,CAAC,CAAC;IAC1D;IACA;AACF;AACA;AACA;AACA;AACA;EALE;IAAAiC,GAAA;IAAAjC,KAAA,EAQA,SAAAgK,IAAIlL,IAAI,EAAE;MACR,OAAO,CAAC,CAAC,IAAI,CAAC6J,GAAG,CAAC,CAACF,YAAY,CAAC3J,IAAI,CAAC,CAAC;IACxC;IACA;AACF;AACA;AACA;AACA;EAJE;IAAAmD,GAAA;IAAAjC,KAAA,EAOA,SAAAiK,QAAOnL,IAAI,EAAE;MACX,OAAO,IAAI,CAAC6J,GAAG,CAAC,CAACF,YAAY,CAAC3J,IAAI,CAAC,CAAC;IACtC;IACA;AACF;AACA;AACA;AACA;EAJE;IAAAmD,GAAA;IAAAjC,KAAA,EAOA,SAAAkK,IAAA,EAAM;MACJ,OAAO,IAAI,CAACvB,GAAG,CAAC;IAClB;IACA;AACF;AACA;AACA;AACA;EAJE;IAAA1G,GAAA;IAAAjC,KAAA,EAOA,SAAAuJ,KAAA,EAAO;MACL,OAAOY,qBAAqB,CAAC,IAAI,EAAE,KAAK,CAAC;IAC3C;IACA;AACF;AACA;AACA;AACA;EAJE;IAAAlI,GAAA;IAAAjC,KAAA,EAOA,SAAAoK,OAAA,EAAS;MACP,OAAOD,qBAAqB,CAAC,IAAI,EAAE,OAAO,CAAC;IAC7C;IACA;AACF;AACA;AACA;AACA;AACA;AACA;EANE;IAAAlI,GAAA,EAAA4G,gBAAA;IAAA7I,KAAA,EASA,SAAAA,MAAA,EAAoB;MAClB,OAAOmK,qBAAqB,CAAC,IAAI,EAAE,WAAW,CAAC;IACjD;EAAC;EAAA,OAAAvB,OAAA;AAAA,EAFAlJ,MAAM,CAACC,QAAQ;AAKlBiJ,OAAO,CAACnK,SAAS,CAAC4L,OAAO,GAAGzB,OAAO,CAACnK,SAAS,CAACiB,MAAM,CAACC,QAAQ,CAAC;AAC9DnB,MAAM,CAAC+B,cAAc,CAACqI,OAAO,CAACnK,SAAS,EAAEiB,MAAM,CAACc,WAAW,EAAE;EAC3DR,KAAK,EAAE,kBAAkB;EACzBS,QAAQ,EAAE,KAAK;EACfC,UAAU,EAAE,KAAK;EACjBC,YAAY,EAAE;AAChB,CAAC,CAAC;AAEF,SAASkJ,cAAcA,CAAC9E,OAAO,EAAEuF,IAAI,EAAE;EACrC,IAAIA,IAAI,KAAK,KAAK,EAAE,OAAO9L,MAAM,CAAC+K,IAAI,CAACxE,OAAO,CAAC4D,GAAG,CAAC,CAAC,CAAC4B,IAAI,CAAC,CAAC,CAACC,GAAG,CAAC,UAAAC,CAAC;IAAA,OAAI,CAACA,CAAC,CAAC;EAAA,EAAC;EACzE,IAAMzB,KAAK,GAAG,EAAE;EAEhB,KAAK,IAAI0B,UAAU,GAAGnL,+BAA+B,CAACf,MAAM,CAAC+K,IAAI,CAACxE,OAAO,CAAC4D,GAAG,CAAC,CAAC,CAAC4B,IAAI,CAAC,CAAC,CAAC,EAAEI,MAAM,EAAE,CAAC,CAACA,MAAM,GAAGD,UAAU,CAAC,CAAC,EAAE3K,IAAI,GAAG;IAC/H,IAAMkC,GAAG,GAAG0I,MAAM,CAAC3K,KAAK;IAExB,KAAK,IAAI4K,UAAU,GAAGrL,+BAA+B,CAACwF,OAAO,CAAC4D,GAAG,CAAC,CAAC1G,GAAG,CAAC,CAAC,EAAE4I,MAAM,EAAE,CAAC,CAACA,MAAM,GAAGD,UAAU,CAAC,CAAC,EAAE7K,IAAI,GAAG;MAChH,IAAMC,KAAK,GAAG6K,MAAM,CAAC7K,KAAK;MAC1BgJ,KAAK,CAACrH,IAAI,CAAC,CAACM,GAAG,EAAEjC,KAAK,CAAC,CAAC;IAC1B;EACF;EAEA,OAAOgJ,KAAK;AACd;AAEA,IAAM8B,QAAQ,GAAGpL,MAAM,CAAC,UAAU,CAAC;AAEnC,SAASyK,qBAAqBA,CAACY,MAAM,EAAET,IAAI,EAAE;EAC3C,IAAM3K,QAAQ,GAAGnB,MAAM,CAACwF,MAAM,CAACgH,wBAAwB,CAAC;EACxDrL,QAAQ,CAACmL,QAAQ,CAAC,GAAG;IACnBC,MAAM,EAANA,MAAM;IACNT,IAAI,EAAJA,IAAI;IACJW,KAAK,EAAE;EACT,CAAC;EACD,OAAOtL,QAAQ;AACjB;AAEA,IAAMqL,wBAAwB,GAAGxM,MAAM,CAAC0M,cAAc,CAAC;EACrDtL,IAAI,WAAAA,KAAA,EAAG;IACL;IACA,IAAI,CAAC,IAAI,IAAIpB,MAAM,CAAC2M,cAAc,CAAC,IAAI,CAAC,KAAKH,wBAAwB,EAAE;MACrE,MAAM,IAAI/K,SAAS,CAAC,0CAA0C,CAAC;IACjE;IAEA,IAAMmL,cAAc,GAAG,IAAI,CAACN,QAAQ,CAAC;MAC/BC,MAAM,GAAGK,cAAc,CAACL,MAAM;MAC9BT,IAAI,GAAGc,cAAc,CAACd,IAAI;MAC1BW,KAAK,GAAGG,cAAc,CAACH,KAAK;IAClC,IAAMb,MAAM,GAAGP,cAAc,CAACkB,MAAM,EAAET,IAAI,CAAC;IAC3C,IAAMnL,GAAG,GAAGiL,MAAM,CAAChL,MAAM;IAEzB,IAAI6L,KAAK,IAAI9L,GAAG,EAAE;MAChB,OAAO;QACLa,KAAK,EAAE8B,SAAS;QAChB/B,IAAI,EAAE;MACR,CAAC;IACH;IAEA,IAAMkJ,IAAI,GAAGmB,MAAM,CAACa,KAAK,CAAC;IAC1B,IAAI,CAACH,QAAQ,CAAC,CAACG,KAAK,GAAGA,KAAK,GAAG,CAAC;IAChC,IAAII,MAAM;IAEV,IAAIf,IAAI,KAAK,KAAK,EAAE;MAClBe,MAAM,GAAGpC,IAAI,CAAC,CAAC,CAAC;IAClB,CAAC,MAAM,IAAIqB,IAAI,KAAK,OAAO,EAAE;MAC3Be,MAAM,GAAGpC,IAAI,CAAC,CAAC,CAAC;IAClB,CAAC,MAAM;MACLoC,MAAM,GAAGpC,IAAI;IACf;IAEA,OAAO;MACLjJ,KAAK,EAAEqL,MAAM;MACbtL,IAAI,EAAE;IACR,CAAC;EACH;AAEF,CAAC,EAAEvB,MAAM,CAAC2M,cAAc,CAAC3M,MAAM,CAAC2M,cAAc,CAAC,EAAE,CAACzL,MAAM,CAACC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvEnB,MAAM,CAAC+B,cAAc,CAACyK,wBAAwB,EAAEtL,MAAM,CAACc,WAAW,EAAE;EAClER,KAAK,EAAE,iBAAiB;EACxBS,QAAQ,EAAE,KAAK;EACfC,UAAU,EAAE,KAAK;EACjBC,YAAY,EAAE;AAChB,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA,IAOM2K,QAAQ;EACZ,SAAAA,SAAA,EAAoC;IAAA,IAAxBnH,IAAI,GAAAtD,SAAA,CAAAzB,MAAA,QAAAyB,SAAA,QAAAiB,SAAA,GAAAjB,SAAA,MAAG,IAAI;IAAA,IAAE0K,IAAI,GAAA1K,SAAA,CAAAzB,MAAA,QAAAyB,SAAA,QAAAiB,SAAA,GAAAjB,SAAA,MAAG,CAAC,CAAC;IAAAP,eAAA,OAAAgL,QAAA;IAChCpH,IAAI,CAACvF,IAAI,CAAC,IAAI,EAAEwF,IAAI,EAAEoH,IAAI,CAAC;IAC3B,IAAI,CAACrF,GAAG,GAAGqF,IAAI,CAACrF,GAAG;IACnB,IAAI,CAACsF,MAAM,GAAGD,IAAI,CAACC,MAAM,IAAI,GAAG;IAChC,IAAI,CAACC,UAAU,GAAGF,IAAI,CAACE,UAAU,IAAI5N,YAAY,CAAC,IAAI,CAAC2N,MAAM,CAAC;IAC9D,IAAI,CAACzG,OAAO,GAAG,IAAI6D,OAAO,CAAC2C,IAAI,CAACxG,OAAO,CAAC;IACxC,IAAI,CAACiD,cAAc,GAAGuD,IAAI,CAACvD,cAAc;IACzCxJ,MAAM,CAAC+B,cAAc,CAAC,IAAI,EAAEb,MAAM,CAACc,WAAW,EAAE;MAC9CR,KAAK,EAAE,UAAU;MACjBS,QAAQ,EAAE,KAAK;MACfC,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAChB,CAAC,CAAC;EACJ;EACA;AACF;AACA;EAFEqB,YAAA,CAAAsJ,QAAA;IAAArJ,GAAA;IAAAC,GAAA,EAKA,SAAAA,IAAA,EAAS;MACP,OAAO,IAAI,CAACsJ,MAAM,IAAI,GAAG,IAAI,IAAI,CAACA,MAAM,GAAG,GAAG;IAChD;IACA;AACF;AACA;AACA;AACA;EAJE;IAAAvJ,GAAA;IAAAjC,KAAA,EAOA,SAAAkH,MAAA,EAAQ;MACN,OAAO,IAAIoE,QAAQ,CAACpE,MAAK,CAAC,IAAI,CAAC,EAAE;QAC/BhB,GAAG,EAAE,IAAI,CAACA,GAAG;QACbsF,MAAM,EAAE,IAAI,CAACA,MAAM;QACnBC,UAAU,EAAE,IAAI,CAACA,UAAU;QAC3B1G,OAAO,EAAE,IAAI,CAACA,OAAO;QACrB2G,EAAE,EAAE,IAAI,CAACA,EAAE;QACX1D,cAAc,EAAE,IAAI,CAACA;MACvB,CAAC,CAAC;IACJ;EAAC;EAAA,OAAAsD,QAAA;AAAA;AAGHpH,IAAI,CAACsB,KAAK,CAAC8F,QAAQ,CAAC7M,SAAS,CAAC;AAC9BD,MAAM,CAAC+B,cAAc,CAAC+K,QAAQ,CAAC7M,SAAS,EAAEiB,MAAM,CAACc,WAAW,EAAE;EAC5DR,KAAK,EAAE,mBAAmB;EAC1BS,QAAQ,EAAE,KAAK;EACfC,UAAU,EAAE,KAAK;EACjBC,YAAY,EAAE;AAChB,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA,IAAMgL,UAAU,GAAGjM,MAAM,CAAC,KAAK,CAAC;AAChC;AACA;AACA;AACA;AACA;AACA;AALA,IAOMkM,OAAO;EACX,SAAAA,QAAYC,KAAK,EAAa;IAAA,IAAX/C,IAAI,GAAAjI,SAAA,CAAAzB,MAAA,QAAAyB,SAAA,QAAAiB,SAAA,GAAAjB,SAAA,MAAG,CAAC,CAAC;IAAAP,eAAA,OAAAsL,OAAA;IAC1B,IAAIE,SAAS,CAAC,CAAC;;IAEf,IAAI,EAAED,KAAK,YAAYD,OAAO,CAAC,EAAE;MAC/B,IAAIC,KAAK,IAAIA,KAAK,CAACE,IAAI,EAAE;QACvB;QACA;QACA;QACAD,SAAS,GAAGrO,KAAK,CAACoO,KAAK,CAACE,IAAI,CAAC;MAC/B,CAAC,MAAM;QACL;QACAD,SAAS,GAAGrO,KAAK,IAAAmE,MAAA,CAAIiK,KAAK,CAAE,CAAC;MAC/B;MAEAA,KAAK,GAAG,CAAC,CAAC;IACZ,CAAC,MAAM;MACLC,SAAS,GAAGrO,KAAK,CAACoO,KAAK,CAAC3F,GAAG,CAAC;IAC9B;IAEA,IAAM6C,MAAM,GAAGD,IAAI,CAACC,MAAM,IAAI8C,KAAK,CAAC9C,MAAM,IAAI,KAAK;IAEnD,IAAI,CAACD,IAAI,CAAC3E,IAAI,IAAI,IAAI,IAAI0H,KAAK,YAAYD,OAAO,IAAIC,KAAK,CAAC1H,IAAI,KAAK,IAAI,MAAM4E,MAAM,KAAK,KAAK,IAAIA,MAAM,KAAK,MAAM,CAAC,EAAE;MACrH,MAAM,IAAI9I,SAAS,CAAC,+CAA+C,CAAC;IACtE;IAEA,IAAM+L,SAAS,GAAGlD,IAAI,CAAC3E,IAAI,IAAI,IAAI,GAAG2E,IAAI,CAAC3E,IAAI,GAAG0H,KAAK,YAAYD,OAAO,IAAIC,KAAK,CAAC1H,IAAI,KAAK,IAAI,GAAG+C,MAAK,CAAC2E,KAAK,CAAC,GAAG,IAAI;IACvH3H,IAAI,CAACvF,IAAI,CAAC,IAAI,EAAEqN,SAAS,EAAE;MACzBzH,OAAO,EAAEuE,IAAI,CAACvE,OAAO,IAAIsH,KAAK,CAACtH,OAAO,IAAI,CAAC;MAC3CpC,IAAI,EAAE2G,IAAI,CAAC3G,IAAI,IAAI0J,KAAK,CAAC1J,IAAI,IAAI;IACnC,CAAC,CAAC,CAAC,CAAC;;IAEJ,IAAI,CAAC4G,MAAM,GAAGA,MAAM,CAACkD,WAAW,CAAC,CAAC;IAClC,IAAI,CAACC,QAAQ,GAAGpD,IAAI,CAACoD,QAAQ,IAAIL,KAAK,CAACK,QAAQ,IAAI,QAAQ;IAC3D,IAAI,CAACC,MAAM,GAAGrD,IAAI,CAACqD,MAAM,IAAIN,KAAK,CAACM,MAAM,IAAI,IAAI;IACjD,IAAI,CAACpH,OAAO,GAAG,IAAI6D,OAAO,CAACE,IAAI,CAAC/D,OAAO,IAAI8G,KAAK,CAAC9G,OAAO,IAAI,CAAC,CAAC,CAAC;IAC/D,IAAI,CAACA,OAAO,CAACqH,MAAM,CAAC,gBAAgB,CAAC,CAAC,CAAC;;IAEvC,IAAI,CAACnE,eAAe,GAAG,KAAK;IAC5B,IAAI,CAACD,cAAc,GAAGc,IAAI,CAACd,cAAc,KAAKlG,SAAS,CAAC;IAAA,EACtDgH,IAAI,CAACd,cAAc,GAAG6D,KAAK,CAAC7D,cAAc,CAAC,CAAC;;IAE9C,IAAI,IAAI,CAACA,cAAc,IAAI,CAACqE,OAAO,CAACC,QAAQ,CAACC,QAAQ,EAAE,MAAM,IAAI/I,KAAK,CAAC,4CAA4C,CAAC;IAEpH,IAAI,IAAI,CAACwE,cAAc,KAAKlG,SAAS,EAAE;MACrC,IAAI,CAACkG,cAAc,GAAGwE,OAAO,CAACH,OAAO,CAACC,QAAQ,CAACC,QAAQ,CAAC;IAC1D;IAEA,IAAI,IAAI,CAACvE,cAAc,EAAE;MACvB,IAAI,CAACyE,iBAAiB,GAAG3D,IAAI,CAAC2D,iBAAiB,KAAK3K,SAAS,GAAGgH,IAAI,CAAC2D,iBAAiB,GAAGZ,KAAK,CAACY,iBAAiB;IAClH;IAEA,IAAI3D,IAAI,CAAC3E,IAAI,IAAI,IAAI,EAAE;MACrB,IAAMuI,WAAW,GAAGlF,kBAAkB,CAAC,IAAI,CAAC;MAE5C,IAAIkF,WAAW,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC3H,OAAO,CAACiF,GAAG,CAAC,cAAc,CAAC,EAAE;QAC7D,IAAI,CAACjF,OAAO,CAACqE,MAAM,CAAC,cAAc,EAAEsD,WAAW,CAAC;MAClD;IACF,CAAC,CAAC;;IAGF,IAAI,CAACC,MAAM,GAAG7D,IAAI,CAAC6D,MAAM,KAAK7K,SAAS,GAAGgH,IAAI,CAAC6D,MAAM,GAAGd,KAAK,CAACc,MAAM,KAAK7K,SAAS,GAAG+J,KAAK,CAACc,MAAM,GAAG,EAAE;IACtG,IAAI,CAACC,OAAO,GAAG9D,IAAI,CAAC8D,OAAO,IAAIf,KAAK,CAACe,OAAO,IAAI,CAAC;IACjD,IAAI,CAACC,OAAO,GAAG/D,IAAI,CAAC+D,OAAO,IAAIhB,KAAK,CAACgB,OAAO;IAC5C,IAAI,CAAClB,UAAU,CAAC,GAAGG,SAAS;IAC5BtN,MAAM,CAAC+B,cAAc,CAAC,IAAI,EAAEb,MAAM,CAACc,WAAW,EAAE;MAC9CR,KAAK,EAAE,SAAS;MAChBS,QAAQ,EAAE,KAAK;MACfC,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAChB,CAAC,CAAC;EACJ;EAACqB,YAAA,CAAA4J,OAAA;IAAA3J,GAAA;IAAAC,GAAA,EAED,SAAAA,IAAA,EAAU;MACR,OAAOxE,MAAM,CAAC,IAAI,CAACiO,UAAU,CAAC,CAAC;IACjC;IACA;AACF;AACA;AACA;AACA;EAJE;IAAA1J,GAAA;IAAAjC,KAAA,EAOA,SAAAkH,MAAA,EAAQ;MACN,OAAO,IAAI0E,OAAO,CAAC,IAAI,CAAC;IAC1B;EAAC;EAAA,OAAAA,OAAA;AAAA;AAGH1H,IAAI,CAACsB,KAAK,CAACoG,OAAO,CAACnN,SAAS,CAAC;AAC7BD,MAAM,CAAC+B,cAAc,CAACqL,OAAO,CAACnN,SAAS,EAAEiB,MAAM,CAACc,WAAW,EAAE;EAC3DR,KAAK,EAAE,kBAAkB;EACzBS,QAAQ,EAAE,KAAK;EACfC,UAAU,EAAE,KAAK;EACjBC,YAAY,EAAE;AAChB,CAAC,CAAC;AACF,SAASmM,qBAAqBA,CAACC,OAAO,EAAE;EACtC,IAAMjB,SAAS,GAAGiB,OAAO,CAACpB,UAAU,CAAC;EACrC,IAAM5G,OAAO,GAAG,IAAI6D,OAAO,CAACmE,OAAO,CAAChI,OAAO,CAAC,CAAC,CAAC;;EAE9C,IAAI,CAACA,OAAO,CAACiF,GAAG,CAAC,QAAQ,CAAC,EAAE;IAC1BjF,OAAO,CAACgF,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC;EAC9B,CAAC,CAAC;;EAGF,IAAI,CAAC+B,SAAS,CAACkB,QAAQ,IAAI,CAAClB,SAAS,CAACmB,QAAQ,EAAE;IAC9C,MAAM,IAAIhN,SAAS,CAAC,kCAAkC,CAAC;EACzD;EAEA,IAAI,CAAC,WAAW,CAAChB,IAAI,CAAC6M,SAAS,CAACkB,QAAQ,CAAC,EAAE;IACzC,MAAM,IAAI/M,SAAS,CAAC,sCAAsC,CAAC;EAC7D,CAAC,CAAC;;EAGF,IAAIiN,kBAAkB,GAAG,IAAI;EAE7B,IAAIH,OAAO,CAAC5I,IAAI,IAAI,IAAI,IAAI,eAAe,CAAClF,IAAI,CAAC8N,OAAO,CAAChE,MAAM,CAAC,EAAE;IAChEmE,kBAAkB,GAAG,GAAG;EAC1B;EAEA,IAAIH,OAAO,CAAC5I,IAAI,IAAI,IAAI,EAAE;IACxB,IAAMgJ,UAAU,GAAG1F,aAAa,CAACsF,OAAO,CAAC;IAEzC,IAAI,OAAOI,UAAU,KAAK,QAAQ,EAAE;MAClCD,kBAAkB,GAAGxL,MAAM,CAACyL,UAAU,CAAC;IACzC;EACF;EAEA,IAAID,kBAAkB,EAAE;IACtB,IAAI,CAACH,OAAO,CAAC/E,cAAc,EAAEjD,OAAO,CAACgF,GAAG,CAAC,gBAAgB,EAAEmD,kBAAkB,CAAC;EAChF,CAAC,MAAM;IACLH,OAAO,CAAC9E,eAAe,GAAG,IAAI;EAChC,CAAC,CAAC;;EAGF,IAAI,CAAClD,OAAO,CAACiF,GAAG,CAAC,YAAY,CAAC,EAAE;IAC9BjF,OAAO,CAACgF,GAAG,CAAC,YAAY,wBAAAnI,MAAA,CAAwBmL,OAAO,CAAC/E,cAAc,GAAG,UAAU,GAAG,MAAM,qDAAkD,CAAC;EACjJ,CAAC,CAAC;;EAGFjD,OAAO,CAACgF,GAAG,CAAC,iBAAiB,EAAE,cAAc,CAAC;EAE9C,IAAI,CAAChF,OAAO,CAACiF,GAAG,CAAC,YAAY,CAAC,EAAE;IAC9BjF,OAAO,CAACgF,GAAG,CAAC,YAAY,EAAE,OAAO,CAAC;EACpC,CAAC,CAAC;EACF;;EAGA,OAAOvL,MAAM,CAACwG,MAAM,CAAC,CAAC,CAAC,EAAE8G,SAAS,EAAE;IAClC/C,MAAM,EAAEgE,OAAO,CAAChE,MAAM;IACtBhE,OAAO,EAAEA,OAAO,CAACmF,GAAG,CAAC;EACvB,CAAC,CAAC;AACJ;AAEA,IAAIqC,QAAQ,CAAC,CAAC;;AAEd,IAAIF,OAAO,CAACC,QAAQ,CAACC,QAAQ,EAAE;EAC7BA,QAAQ,GAAGa,OAAO,CAAC,UAAU,CAAC;AAChC;AAEA,IAAMC,OAAO,GAAGd,QAAQ,IAAIA,QAAQ,CAACe,GAAG,IAAI,CAACf,QAAQ,CAACe,GAAG,CAACD,OAAO,CAAC,CAAC,GAAG,IAAIrH,OAAO,CAAC,UAAArI,OAAO;EAAA,OAAI4O,QAAQ,CAACe,GAAG,CAACC,IAAI,CAAC,OAAO,EAAE5P,OAAO,CAAC;AAAA,EAAC,GAAGqI,OAAO,CAACrI,OAAO,CAAC,CAAC;AACrJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS6P,KAAKA,CAACtH,GAAG,EAAa;EAAA,IAAXqF,IAAI,GAAA1K,SAAA,CAAAzB,MAAA,QAAAyB,SAAA,QAAAiB,SAAA,GAAAjB,SAAA,MAAG,CAAC,CAAC;EAC3B;EACA,OAAOwM,OAAO,CAACzI,IAAI,CAAC;IAAA,OAAM,IAAIoB,OAAO,CAAC,UAACyH,SAAS,EAAExH,MAAM,EAAK;MAC3D;MACA,IAAM8G,OAAO,GAAG,IAAInB,OAAO,CAAC1F,GAAG,EAAEqF,IAAI,CAAC;MACtC,IAAMzK,OAAO,GAAGgM,qBAAqB,CAACC,OAAO,CAAC;MAC9C,IAAMW,IAAI,GAAGX,OAAO,CAAC/E,cAAc,GAAGuE,QAAQ,CAACoB,GAAG,CAACZ,OAAO,GAAG,CAACjM,OAAO,CAACkM,QAAQ,KAAK,QAAQ,GAAGlP,KAAK,GAAGF,IAAI,EAAEmP,OAAO,CAAC,CAAC;;MAErH,IAAIjM,OAAO,CAACiE,OAAO,CAAC6I,IAAI,EAAE;QACxB9M,OAAO,CAACiE,OAAO,CAAC6I,IAAI,GAAG9M,OAAO,CAACiE,OAAO,CAAC6I,IAAI,CAAC,CAAC,CAAC;MAChD;MAEA,IAAIb,OAAO,CAACZ,MAAM,IAAIY,OAAO,CAACZ,MAAM,CAAC0B,OAAO,EAAE;QAC5C5H,MAAM,CAAC,IAAI5C,UAAU,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;QAClD;MACF,CAAC,CAAC;;MAGF,IAAI0B,OAAO;MAEX,IAAIgI,OAAO,CAAC/E,cAAc,EAAE;QAC1BjD,OAAO,GAAGjE,OAAO,CAACiE,OAAO;QACzB,OAAOjE,OAAO,CAACiE,OAAO;QACtBjE,OAAO,CAAC+L,OAAO,GAAGtB,IAAI,CAACsB,OAAO,IAAIN,QAAQ,CAACM,OAAO,CAACiB,cAAc;QACjEhN,OAAO,CAAC2L,iBAAiB,GAAGM,OAAO,CAACN,iBAAiB;MACvD,CAAC,MAAM;QACL,IAAIlB,IAAI,CAACwC,KAAK,EAAEjN,OAAO,CAACiN,KAAK,GAAGxC,IAAI,CAACwC,KAAK;QAC1C,IAAIxC,IAAI,CAACyC,OAAO,EAAE/H,MAAM,CAAC,IAAIzC,KAAK,CAAC,kEAAkE,CAAC,CAAC;MACzG;MAEA,IAAMyK,GAAG,GAAGP,IAAI,CAAC5M,OAAO,CAAC;MAEzB,IAAIiM,OAAO,CAAC/E,cAAc,EAAE;QAC1B,KAAK,IAAMkG,UAAU,IAAInJ,OAAO,EAAE;UAChC,IAAI,OAAOA,OAAO,CAACmJ,UAAU,CAAC,KAAK,QAAQ,EAAED,GAAG,CAACE,SAAS,CAACD,UAAU,EAAEnJ,OAAO,CAACmJ,UAAU,CAAC,CAAC,CAAC,KAAK;YAC/F,KAAK,IAAIxI,SAAS,GAAGnG,+BAA+B,CAACwF,OAAO,CAACmJ,UAAU,CAAC,CAAC,EAAEtI,KAAK,EAAE,CAAC,CAACA,KAAK,GAAGF,SAAS,CAAC,CAAC,EAAE3F,IAAI,GAAG;cAC9G,IAAMqO,WAAW,GAAGxI,KAAK,CAAC5F,KAAK;cAC/BiO,GAAG,CAACE,SAAS,CAACD,UAAU,EAAEE,WAAW,CAAC;YACxC;UACF;QACF;MACF;MAEA,IAAIC,UAAU;MAEd,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;QAC1B,IAAIvB,OAAO,CAAC/E,cAAc,EAAE;UAC1BiG,GAAG,CAAC3H,KAAK,CAAC,CAAC,CAAC,CAAC;QACf,CAAC,MAAM;UACL2H,GAAG,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC;QACjB;MACF,CAAC;;MAED,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;QACzB,IAAM7H,GAAG,GAAG,IAAItD,UAAU,CAAC,iBAAiB,EAAE,OAAO,CAAC;QACtD4C,MAAM,CAACU,GAAG,CAAC;QACX2H,aAAa,CAAC,CAAC;QACfL,GAAG,CAACxH,IAAI,CAAC,OAAO,EAAEE,GAAG,CAAC;MACxB,CAAC;MAED,IAAIoG,OAAO,CAACZ,MAAM,EAAE;QAClBY,OAAO,CAACZ,MAAM,CAACsC,gBAAgB,CAAC,OAAO,EAAED,YAAY,CAAC;MACxD;MAEA,IAAIzB,OAAO,CAACxI,OAAO,EAAE;QACnB8J,UAAU,GAAG7H,UAAU,CAAC,YAAM;UAC5B,IAAMG,GAAG,GAAG,IAAItD,UAAU,wBAAAzB,MAAA,CAAwBmL,OAAO,CAAC7G,GAAG,GAAI,iBAAiB,CAAC;UACnFD,MAAM,CAACU,GAAG,CAAC;UACX2H,aAAa,CAAC,CAAC;QACjB,CAAC,EAAEvB,OAAO,CAACxI,OAAO,CAAC;MACrB;MAEA,IAAIwI,OAAO,CAAC/E,cAAc,EAAE;QAC1B;QACAiG,GAAG,CAACvH,EAAE,CAAC,OAAO,EAAE,UAACgI,QAAQ,EAAE/E,QAAQ,EAAK;UACtC,IAAI4B,IAAI,CAACoD,IAAI,IAAIpD,IAAI,CAACqD,QAAQ,EAAE;YAC9BjF,QAAQ,CAAC4B,IAAI,CAACoD,IAAI,EAAEpD,IAAI,CAACqD,QAAQ,CAAC;UACpC,CAAC,MAAM,IAAIrD,IAAI,CAACyC,OAAO,EAAE;YACvBzC,IAAI,CAACyC,OAAO,CAACU,QAAQ,CAAC,CAAC9J,IAAI,CAAC,UAAAiK,WAAW,EAAI;cACzC,IAAIA,WAAW,EAAE;gBACflF,QAAQ,CAACkF,WAAW,CAACC,QAAQ,EAAED,WAAW,CAACD,QAAQ,CAAC;cACtD,CAAC,MAAM;gBACLjF,QAAQ,CAAC,CAAC;cACZ;YACF,CAAC,CAAC,CAACoF,KAAK,CAAC,UAAAC,KAAK,EAAI;cAChBV,aAAa,CAAC,CAAC;cACfrI,MAAM,CAAC+I,KAAK,CAAC;YACf,CAAC,CAAC;UACJ,CAAC,MAAM;YACLV,aAAa,CAAC,CAAC;YACfrI,MAAM,CAAC,IAAI5C,UAAU,8BAAAzB,MAAA,CAA8B8M,QAAQ,CAACd,IAAI,sDAAmD,OAAO,EAAE;cAC1H/J,IAAI,EAAE;YACR,CAAC,CAAC,CAAC;UACL;QACF,CAAC,CAAC;MACJ;MAEAoK,GAAG,CAACvH,EAAE,CAAC,OAAO,EAAE,UAAAC,GAAG,EAAI;QACrBE,YAAY,CAACwH,UAAU,CAAC;QAExB,IAAItB,OAAO,CAACZ,MAAM,EAAE;UAClBY,OAAO,CAACZ,MAAM,CAAC8C,mBAAmB,CAAC,OAAO,EAAET,YAAY,CAAC;QAC3D;QAEAvI,MAAM,CAAC,IAAI5C,UAAU,eAAAzB,MAAA,CAAemL,OAAO,CAAC7G,GAAG,uBAAAtE,MAAA,CAAoB+E,GAAG,CAACrD,OAAO,GAAI,QAAQ,EAAEqD,GAAG,CAAC,CAAC;MACnG,CAAC,CAAC;MACFsH,GAAG,CAACvH,EAAE,CAAC,OAAO,EAAE,YAAM;QACpBG,YAAY,CAACwH,UAAU,CAAC;QAExB,IAAItB,OAAO,CAACZ,MAAM,EAAE;UAClBY,OAAO,CAACZ,MAAM,CAAC8C,mBAAmB,CAAC,OAAO,EAAET,YAAY,CAAC;QAC3D;MACF,CAAC,CAAC;MACFP,GAAG,CAACvH,EAAE,CAAC,UAAU,EAAE,UAAAK,GAAG,EAAI;QACxB,IAAI;UACFF,YAAY,CAACwH,UAAU,CAAC;UAExB,IAAItB,OAAO,CAACZ,MAAM,EAAE;YAClBY,OAAO,CAACZ,MAAM,CAAC8C,mBAAmB,CAAC,OAAO,EAAET,YAAY,CAAC;UAC3D,CAAC,CAAC;;UAGF,IAAIhB,KAAK,CAAC0B,UAAU,CAACnI,GAAG,CAACoI,UAAU,CAAC,IAAIpC,OAAO,CAACb,QAAQ,KAAK,QAAQ,EAAE;YACrE,IAAIa,OAAO,CAACb,QAAQ,KAAK,OAAO,EAAE;cAChCjG,MAAM,CAAC,IAAI5C,UAAU,mCAAAzB,MAAA,CAAmCmL,OAAO,CAAC7G,GAAG,GAAI,aAAa,CAAC,CAAC;cACtF;YACF;YAEA,IAAI6G,OAAO,CAACH,OAAO,IAAIG,OAAO,CAACJ,MAAM,EAAE;cACrC1G,MAAM,CAAC,IAAI5C,UAAU,iCAAAzB,MAAA,CAAiCmL,OAAO,CAAC7G,GAAG,GAAI,cAAc,CAAC,CAAC;cACrF;YACF;YAEA,IAAI,CAACa,GAAG,CAAChC,OAAO,CAACqK,QAAQ,EAAE;cACzBnJ,MAAM,CAAC,IAAI5C,UAAU,yCAAAzB,MAAA,CAAyCmL,OAAO,CAAC7G,GAAG,GAAI,kBAAkB,CAAC,CAAC;cACjG;YACF,CAAC,CAAC;;YAGF,IAAIa,GAAG,CAACoI,UAAU,KAAK,GAAG,IAAI,CAACpI,GAAG,CAACoI,UAAU,KAAK,GAAG,IAAIpI,GAAG,CAACoI,UAAU,KAAK,GAAG,KAAKpC,OAAO,CAAChE,MAAM,KAAK,MAAM,EAAE;cAC7GgE,OAAO,CAAChE,MAAM,GAAG,KAAK;cACtBgE,OAAO,CAAC5I,IAAI,GAAG,IAAI;cACnB4I,OAAO,CAAChI,OAAO,CAACqH,MAAM,CAAC,gBAAgB,CAAC;YAC1C;YAEAW,OAAO,CAACH,OAAO,EAAE;YACjBa,SAAS,CAACD,KAAK,CAAC7P,OAAO,CAACoP,OAAO,CAAC7G,GAAG,EAAEa,GAAG,CAAChC,OAAO,CAACqK,QAAQ,CAAC,EAAErC,OAAO,CAAC,CAAC;YACrE;UACF,CAAC,CAAC;;UAGF,IAAMhI,QAAO,GAAG,IAAI6D,OAAO,CAAC,CAAC;UAE7B,KAAK,IAAIM,EAAE,GAAG,CAAC,EAAEI,YAAY,GAAG9K,MAAM,CAAC+K,IAAI,CAACxC,GAAG,CAAChC,OAAO,CAAC,EAAEmE,EAAE,GAAGI,YAAY,CAAClK,MAAM,EAAE8J,EAAE,EAAE,EAAE;YACxF,IAAMpK,IAAI,GAAGwK,YAAY,CAACJ,EAAE,CAAC;YAE7B,IAAInK,KAAK,CAACe,OAAO,CAACiH,GAAG,CAAChC,OAAO,CAACjG,IAAI,CAAC,CAAC,EAAE;cACpC,KAAK,IAAI4L,UAAU,GAAGnL,+BAA+B,CAACwH,GAAG,CAAChC,OAAO,CAACjG,IAAI,CAAC,CAAC,EAAE6L,MAAM,EAAE,CAAC,CAACA,MAAM,GAAGD,UAAU,CAAC,CAAC,EAAE3K,IAAI,GAAG;gBAChH,IAAMsI,GAAG,GAAGsC,MAAM,CAAC3K,KAAK;gBACxB+E,QAAO,CAACqE,MAAM,CAACtK,IAAI,EAAEuJ,GAAG,CAAC;cAC3B;YACF,CAAC,MAAM;cACLtD,QAAO,CAACqE,MAAM,CAACtK,IAAI,EAAEiI,GAAG,CAAChC,OAAO,CAACjG,IAAI,CAAC,CAAC;YACzC;UACF;UAEA,IAAIiO,OAAO,CAACb,QAAQ,KAAK,QAAQ,IAAInH,QAAO,CAACiF,GAAG,CAAC,UAAU,CAAC,EAAE;YAC5DjF,QAAO,CAACgF,GAAG,CAAC,UAAU,EAAEpM,OAAO,CAACoP,OAAO,CAAC7G,GAAG,EAAEnB,QAAO,CAAC7C,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;UACxE,CAAC,CAAC;;UAGF,IAAIiC,IAAI,GAAG,IAAIlG,WAAW,CAAC,CAAC;UAC5B8I,GAAG,CAACL,EAAE,CAAC,OAAO,EAAE,UAAAC,GAAG;YAAA,OAAIxC,IAAI,CAACsC,IAAI,CAAC,OAAO,EAAEE,GAAG,CAAC;UAAA,EAAC;UAC/CI,GAAG,CAACQ,IAAI,CAACpD,IAAI,CAAC;UACdA,IAAI,CAACuC,EAAE,CAAC,OAAO,EAAE4H,aAAa,CAAC;UAC/BnK,IAAI,CAACuC,EAAE,CAAC,gBAAgB,EAAE4H,aAAa,CAAC;UAExC,IAAMe,SAAS,GAAG,SAAZA,SAASA,CAAA,EAAS;YACtBtI,GAAG,CAACwH,OAAO,CAAC,CAAC;YACbxH,GAAG,CAACN,IAAI,CAAC,OAAO,EAAE,IAAIpD,UAAU,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;UACjE,CAAC;;UAED,IAAI0J,OAAO,CAACZ,MAAM,EAAE;YAClBY,OAAO,CAACZ,MAAM,CAACsC,gBAAgB,CAAC,OAAO,EAAEY,SAAS,CAAC;YACnDtI,GAAG,CAACL,EAAE,CAAC,KAAK,EAAE,YAAM;cAClBqG,OAAO,CAACZ,MAAM,CAAC8C,mBAAmB,CAAC,OAAO,EAAEI,SAAS,CAAC;YACxD,CAAC,CAAC;YACFtI,GAAG,CAACL,EAAE,CAAC,OAAO,EAAE,YAAM;cACpBqG,OAAO,CAACZ,MAAM,CAAC8C,mBAAmB,CAAC,OAAO,EAAEI,SAAS,CAAC;YACxD,CAAC,CAAC;UACJ;UAEA,IAAMC,eAAe,GAAG;YACtBpJ,GAAG,EAAE6G,OAAO,CAAC7G,GAAG;YAChBsF,MAAM,EAAEzE,GAAG,CAACoI,UAAU;YACtB1D,UAAU,EAAE1E,GAAG,CAACwI,aAAa;YAC7BxK,OAAO,EAAPA,QAAO;YACP5C,IAAI,EAAE4K,OAAO,CAAC5K,IAAI;YAClBoC,OAAO,EAAEwI,OAAO,CAACxI,OAAO;YACxByD,cAAc,EAAE+E,OAAO,CAAC/E,cAAc;YACtCyE,iBAAiB,EAAEM,OAAO,CAACN;UAC7B,CAAC,CAAC,CAAC;;UAEH,IAAM+C,OAAO,GAAGzK,QAAO,CAAC7C,GAAG,CAAC,kBAAkB,CAAC,CAAC,CAAC;UACjD;UACA;UACA;UACA;UACA;UACA;;UAEA,IAAI,CAAC6K,OAAO,CAAC/E,cAAc,IAAI+E,OAAO,CAAChE,MAAM,KAAK,MAAM,IAAIyG,OAAO,KAAK,IAAI,IAAIzI,GAAG,CAACoI,UAAU,KAAK,GAAG,IAAIpI,GAAG,CAACoI,UAAU,KAAK,GAAG,EAAE;YAChI;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA,IAAIK,OAAO,KAAK,MAAM,IAAIA,OAAO,KAAK,QAAQ,EAAE;cAC9C;cACArL,IAAI,GAAGA,IAAI,CAACoD,IAAI,CAACxJ,IAAI,CAAC0R,YAAY,CAAC,CAAC,CAAC;YACvC,CAAC,MAAM,IAAID,OAAO,KAAK,SAAS,IAAIA,OAAO,KAAK,WAAW,EAAE;cAC3D;cACA;cACA;cACA,IAAMtF,GAAG,GAAGnD,GAAG,CAACQ,IAAI,CAAC,IAAItJ,WAAW,CAAC,CAAC,CAAC;cACvC,OAAOiM,GAAG,CAACqD,IAAI,CAAC,MAAM,EAAE,UAAA3G,KAAK,EAAI;gBAC/B;gBACA,IAAI,CAACA,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,MAAM,IAAI,EAAE;kBAC9BzC,IAAI,GAAGA,IAAI,CAACoD,IAAI,CAACxJ,IAAI,CAAC2R,aAAa,CAAC,CAAC,CAAC;gBACxC,CAAC,MAAM;kBACLvL,IAAI,GAAGA,IAAI,CAACoD,IAAI,CAACxJ,IAAI,CAAC4R,gBAAgB,CAAC,CAAC,CAAC;gBAC3C;gBAEA,IAAMC,QAAQ,GAAG,IAAItE,QAAQ,CAACnH,IAAI,EAAEmL,eAAe,CAAC;gBACpD7B,SAAS,CAACmC,QAAQ,CAAC;cACrB,CAAC,CAAC;YACJ;UACF;UAEA,IAAMA,QAAQ,GAAG,IAAItE,QAAQ,CAACnH,IAAI,EAAEmL,eAAe,CAAC;UACpD7B,SAAS,CAACmC,QAAQ,CAAC;QACrB,CAAC,CAAC,OAAOZ,KAAK,EAAE;UACd/I,MAAM,CAAC,IAAI5C,UAAU,sBAAAzB,MAAA,CAAsBoN,KAAK,CAAC1L,OAAO,GAAI,kBAAkB,CAAC,CAAC;UAChFgL,aAAa,CAAC,CAAC;QACjB;MACF,CAAC,CAAC;MACFzG,aAAa,CAACoG,GAAG,EAAElB,OAAO,CAAC;IAC7B,CAAC,CAAC;EAAA,EAAC;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAS,KAAK,CAAC0B,UAAU,GAAG,UAAArL,IAAI;EAAA,OAAIA,IAAI,KAAK,GAAG,IAAIA,IAAI,KAAK,GAAG,IAAIA,IAAI,KAAK,GAAG,IAAIA,IAAI,KAAK,GAAG,IAAIA,IAAI,KAAK,GAAG;AAAA;AAEvG,SAASR,UAAU,EAAEuF,OAAO,EAAEgD,OAAO,EAAEN,QAAQ,EAAEkC,KAAK,IAAIqC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}