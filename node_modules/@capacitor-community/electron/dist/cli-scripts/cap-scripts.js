var yh=Object.create;var As=Object.defineProperty;var Eh=Object.getOwnPropertyDescriptor;var gh=Object.getOwnPropertyNames,or=Object.getOwnPropertySymbols,Sh=Object.getPrototypeOf,ar=Object.prototype.hasOwnProperty,wh=Object.prototype.propertyIsEnumerable;var hr=(s,t,e)=>t in s?As(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,te=(s,t)=>{for(var e in t||(t={}))ar.call(t,e)&&hr(s,e,t[e]);if(or)for(var e of or(t))wh.call(t,e)&&hr(s,e,t[e]);return s};var p=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var Rh=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of gh(t))!ar.call(s,r)&&r!==e&&As(s,r,{get:()=>t[r],enumerable:!(i=Eh(t,r))||i.enumerable});return s};var lr=(s,t,e)=>(e=s!=null?yh(Sh(s)):{},Rh(t||!s||!s.__esModule?As(e,"default",{value:s,enumerable:!0}):e,s));var Dt=p((ic,ur)=>{"use strict";var cr=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);ur.exports=s=>s?Object.keys(s).map(t=>[cr.has(t)?cr.get(t):t,s[t]]).reduce((t,e)=>(t[e[0]]=e[1],t),Object.create(null)):{}});var dr=p((rc,fr)=>{"use strict";fr.exports=function(s){s.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var be=p((nc,mr)=>{"use strict";mr.exports=E;E.Node=yt;E.create=E;function E(s){var t=this;if(t instanceof E||(t=new E),t.tail=null,t.head=null,t.length=0,s&&typeof s.forEach=="function")s.forEach(function(r){t.push(r)});else if(arguments.length>0)for(var e=0,i=arguments.length;e<i;e++)t.push(arguments[e]);return t}E.prototype.removeNode=function(s){if(s.list!==this)throw new Error("removing node which does not belong to this list");var t=s.next,e=s.prev;return t&&(t.prev=e),e&&(e.next=t),s===this.head&&(this.head=t),s===this.tail&&(this.tail=e),s.list.length--,s.next=null,s.prev=null,s.list=null,t};E.prototype.unshiftNode=function(s){if(s!==this.head){s.list&&s.list.removeNode(s);var t=this.head;s.list=this,s.next=t,t&&(t.prev=s),this.head=s,this.tail||(this.tail=s),this.length++}};E.prototype.pushNode=function(s){if(s!==this.tail){s.list&&s.list.removeNode(s);var t=this.tail;s.list=this,s.prev=t,t&&(t.next=s),this.tail=s,this.head||(this.head=s),this.length++}};E.prototype.push=function(){for(var s=0,t=arguments.length;s<t;s++)Oh(this,arguments[s]);return this.length};E.prototype.unshift=function(){for(var s=0,t=arguments.length;s<t;s++)bh(this,arguments[s]);return this.length};E.prototype.pop=function(){if(!!this.tail){var s=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,s}};E.prototype.shift=function(){if(!!this.head){var s=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,s}};E.prototype.forEach=function(s,t){t=t||this;for(var e=this.head,i=0;e!==null;i++)s.call(t,e.value,i,this),e=e.next};E.prototype.forEachReverse=function(s,t){t=t||this;for(var e=this.tail,i=this.length-1;e!==null;i--)s.call(t,e.value,i,this),e=e.prev};E.prototype.get=function(s){for(var t=0,e=this.head;e!==null&&t<s;t++)e=e.next;if(t===s&&e!==null)return e.value};E.prototype.getReverse=function(s){for(var t=0,e=this.tail;e!==null&&t<s;t++)e=e.prev;if(t===s&&e!==null)return e.value};E.prototype.map=function(s,t){t=t||this;for(var e=new E,i=this.head;i!==null;)e.push(s.call(t,i.value,this)),i=i.next;return e};E.prototype.mapReverse=function(s,t){t=t||this;for(var e=new E,i=this.tail;i!==null;)e.push(s.call(t,i.value,this)),i=i.prev;return e};E.prototype.reduce=function(s,t){var e,i=this.head;if(arguments.length>1)e=t;else if(this.head)i=this.head.next,e=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)e=s(e,i.value,r),i=i.next;return e};E.prototype.reduceReverse=function(s,t){var e,i=this.tail;if(arguments.length>1)e=t;else if(this.tail)i=this.tail.prev,e=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)e=s(e,i.value,r),i=i.prev;return e};E.prototype.toArray=function(){for(var s=new Array(this.length),t=0,e=this.head;e!==null;t++)s[t]=e.value,e=e.next;return s};E.prototype.toArrayReverse=function(){for(var s=new Array(this.length),t=0,e=this.tail;e!==null;t++)s[t]=e.value,e=e.prev;return s};E.prototype.slice=function(s,t){t=t||this.length,t<0&&(t+=this.length),s=s||0,s<0&&(s+=this.length);var e=new E;if(t<s||t<0)return e;s<0&&(s=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;r!==null&&i<s;i++)r=r.next;for(;r!==null&&i<t;i++,r=r.next)e.push(r.value);return e};E.prototype.sliceReverse=function(s,t){t=t||this.length,t<0&&(t+=this.length),s=s||0,s<0&&(s+=this.length);var e=new E;if(t<s||t<0)return e;s<0&&(s=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;r!==null&&i>t;i--)r=r.prev;for(;r!==null&&i>s;i--,r=r.prev)e.push(r.value);return e};E.prototype.splice=function(s,t,...e){s>this.length&&(s=this.length-1),s<0&&(s=this.length+s);for(var i=0,r=this.head;r!==null&&i<s;i++)r=r.next;for(var n=[],i=0;r&&i<t;i++)n.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var i=0;i<e.length;i++)r=_h(this,r,e[i]);return n};E.prototype.reverse=function(){for(var s=this.head,t=this.tail,e=s;e!==null;e=e.prev){var i=e.prev;e.prev=e.next,e.next=i}return this.head=t,this.tail=s,this};function _h(s,t,e){var i=t===s.head?new yt(e,null,t,s):new yt(e,t,t.next,s);return i.next===null&&(s.tail=i),i.prev===null&&(s.head=i),s.length++,i}function Oh(s,t){s.tail=new yt(t,s.tail,null,s),s.head||(s.head=s.tail),s.length++}function bh(s,t){s.head=new yt(t,null,s.head,s),s.tail||(s.tail=s.head),s.length++}function yt(s,t,e,i){if(!(this instanceof yt))return new yt(s,t,e,i);this.list=i,this.value=s,t?(t.next=this,this.prev=t):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}try{dr()(E)}catch{}});var It=p((oc,Or)=>{"use strict";var pr=typeof process=="object"&&process?process:{stdout:null,stderr:null},Th=require("events"),yr=require("stream"),ee=be(),Er=require("string_decoder").StringDecoder,X=Symbol("EOF"),se=Symbol("maybeEmitEnd"),rt=Symbol("emittedEnd"),Te=Symbol("emittingEnd"),Ne=Symbol("emittedError"),Ae=Symbol("closed"),gr=Symbol("read"),vs=Symbol("flush"),Sr=Symbol("flushChunk"),I=Symbol("encoding"),J=Symbol("decoder"),ve=Symbol("flowing"),ie=Symbol("paused"),re=Symbol("resume"),D=Symbol("bufferLength"),Ds=Symbol("bufferPush"),Is=Symbol("bufferShift"),N=Symbol("objectMode"),A=Symbol("destroyed"),Rr=global._MP_NO_ITERATOR_SYMBOLS_!=="1",Nh=Rr&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Ah=Rr&&Symbol.iterator||Symbol("iterator not implemented"),wr=s=>s==="end"||s==="finish"||s==="prefinish",vh=s=>s instanceof ArrayBuffer||typeof s=="object"&&s.constructor&&s.constructor.name==="ArrayBuffer"&&s.byteLength>=0,Dh=s=>!Buffer.isBuffer(s)&&ArrayBuffer.isView(s);Or.exports=class _r extends yr{constructor(t){super(),this[ve]=!1,this[ie]=!1,this.pipes=new ee,this.buffer=new ee,this[N]=t&&t.objectMode||!1,this[N]?this[I]=null:this[I]=t&&t.encoding||null,this[I]==="buffer"&&(this[I]=null),this[J]=this[I]?new Er(this[I]):null,this[X]=!1,this[rt]=!1,this[Te]=!1,this[Ae]=!1,this[Ne]=null,this.writable=!0,this.readable=!0,this[D]=0,this[A]=!1}get bufferLength(){return this[D]}get encoding(){return this[I]}set encoding(t){if(this[N])throw new Error("cannot set encoding in objectMode");if(this[I]&&t!==this[I]&&(this[J]&&this[J].lastNeed||this[D]))throw new Error("cannot change encoding");this[I]!==t&&(this[J]=t?new Er(t):null,this.buffer.length&&(this.buffer=this.buffer.map(e=>this[J].write(e)))),this[I]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[N]}set objectMode(t){this[N]=this[N]||!!t}write(t,e,i){if(this[X])throw new Error("write after end");return this[A]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof e=="function"&&(i=e,e="utf8"),e||(e="utf8"),!this[N]&&!Buffer.isBuffer(t)&&(Dh(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):vh(t)?t=Buffer.from(t):typeof t!="string"&&(this.objectMode=!0)),!this.objectMode&&!t.length?(this[D]!==0&&this.emit("readable"),i&&i(),this.flowing):(typeof t=="string"&&!this[N]&&!(e===this[I]&&!this[J].lastNeed)&&(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[I]&&(t=this[J].write(t)),this.flowing?(this[D]!==0&&this[vs](!0),this.flowing?this.emit("data",t):this[Ds](t)):this[Ds](t),this[D]!==0&&this.emit("readable"),i&&i(),this.flowing))}read(t){if(this[A])return null;try{return this[D]===0||t===0||t>this[D]?null:(this[N]&&(t=null),this.buffer.length>1&&!this[N]&&(this.encoding?this.buffer=new ee([Array.from(this.buffer).join("")]):this.buffer=new ee([Buffer.concat(Array.from(this.buffer),this[D])])),this[gr](t||null,this.buffer.head.value))}finally{this[se]()}}[gr](t,e){return t===e.length||t===null?this[Is]():(this.buffer.head.value=e.slice(t),e=e.slice(0,t),this[D]-=t),this.emit("data",e),!this.buffer.length&&!this[X]&&this.emit("drain"),e}end(t,e,i){return typeof t=="function"&&(i=t,t=null),typeof e=="function"&&(i=e,e="utf8"),t&&this.write(t,e),i&&this.once("end",i),this[X]=!0,this.writable=!1,(this.flowing||!this[ie])&&this[se](),this}[re](){this[A]||(this[ie]=!1,this[ve]=!0,this.emit("resume"),this.buffer.length?this[vs]():this[X]?this[se]():this.emit("drain"))}resume(){return this[re]()}pause(){this[ve]=!1,this[ie]=!0}get destroyed(){return this[A]}get flowing(){return this[ve]}get paused(){return this[ie]}[Ds](t){return this[N]?this[D]+=1:this[D]+=t.length,this.buffer.push(t)}[Is](){return this.buffer.length&&(this[N]?this[D]-=1:this[D]-=this.buffer.head.value.length),this.buffer.shift()}[vs](t){do;while(this[Sr](this[Is]()));!t&&!this.buffer.length&&!this[X]&&this.emit("drain")}[Sr](t){return t?(this.emit("data",t),this.flowing):!1}pipe(t,e){if(this[A])return;let i=this[rt];e=e||{},t===pr.stdout||t===pr.stderr?e.end=!1:e.end=e.end!==!1;let r={dest:t,opts:e,ondrain:n=>this[re]()};return this.pipes.push(r),t.on("drain",r.ondrain),this[re](),i&&r.opts.end&&r.dest.end(),t}addListener(t,e){return this.on(t,e)}on(t,e){try{return super.on(t,e)}finally{t==="data"&&!this.pipes.length&&!this.flowing?this[re]():wr(t)&&this[rt]?(super.emit(t),this.removeAllListeners(t)):t==="error"&&this[Ne]&&e.call(this,this[Ne])}}get emittedEnd(){return this[rt]}[se](){!this[Te]&&!this[rt]&&!this[A]&&this.buffer.length===0&&this[X]&&(this[Te]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ae]&&this.emit("close"),this[Te]=!1)}emit(t,e){if(t!=="error"&&t!=="close"&&t!==A&&this[A])return;if(t==="data"){if(!e)return;this.pipes.length&&this.pipes.forEach(r=>r.dest.write(e)===!1&&this.pause())}else if(t==="end"){if(this[rt]===!0)return;this[rt]=!0,this.readable=!1,this[J]&&(e=this[J].end(),e&&(this.pipes.forEach(r=>r.dest.write(e)),super.emit("data",e))),this.pipes.forEach(r=>{r.dest.removeListener("drain",r.ondrain),r.opts.end&&r.dest.end()})}else if(t==="close"){if(this[Ae]=!0,!this[rt]&&!this[A])return}else t==="error"&&(this[Ne]=e);let i=new Array(arguments.length);if(i[0]=t,i[1]=e,arguments.length>2)for(let r=2;r<arguments.length;r++)i[r]=arguments[r];try{return super.emit.apply(this,i)}finally{wr(t)?this.removeAllListeners(t):this[se]()}}collect(){let t=[];this[N]||(t.dataLength=0);let e=this.promise();return this.on("data",i=>{t.push(i),this[N]||(t.dataLength+=i.length)}),e.then(()=>t)}concat(){return this[N]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(t=>this[N]?Promise.reject(new Error("cannot concat in objectMode")):this[I]?t.join(""):Buffer.concat(t,t.dataLength))}promise(){return new Promise((t,e)=>{this.on(A,()=>e(new Error("stream destroyed"))),this.on("error",i=>e(i)),this.on("end",()=>t())})}[Nh](){return{next:()=>{let e=this.read();if(e!==null)return Promise.resolve({done:!1,value:e});if(this[X])return Promise.resolve({done:!0});let i=null,r=null,n=a=>{this.removeListener("data",o),this.removeListener("end",h),r(a)},o=a=>{this.removeListener("error",n),this.removeListener("end",h),this.pause(),i({value:a,done:!!this[X]})},h=()=>{this.removeListener("error",n),this.removeListener("data",o),i({done:!0})},l=()=>n(new Error("stream destroyed"));return new Promise((a,c)=>{r=c,i=a,this.once(A,l),this.once("error",n),this.once("end",h),this.once("data",o)})}}}[Ah](){return{next:()=>{let e=this.read();return{value:e,done:e===null}}}}destroy(t){return this[A]?(t?this.emit("error",t):this.emit(A),this):(this[A]=!0,this.buffer=new ee,this[D]=0,typeof this.close=="function"&&!this[Ae]&&this.close(),t?this.emit("error",t):this.emit(A),this)}static isStream(t){return!!t&&(t instanceof _r||t instanceof yr||t instanceof Th&&(typeof t.pipe=="function"||typeof t.write=="function"&&typeof t.end=="function"))}}});var Tr=p((hc,br)=>{var Ih=require("zlib").constants||{ZLIB_VERNUM:4736};br.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},Ih))});var $s=p(x=>{"use strict";var Fs=require("assert"),nt=require("buffer").Buffer,vr=require("zlib"),Et=x.constants=Tr(),Lh=It(),Nr=nt.concat,gt=Symbol("_superWrite"),Ct=class extends Error{constructor(t){super("zlib: "+t.message),this.code=t.code,this.errno=t.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+t.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},Ch=Symbol("opts"),ne=Symbol("flushFlag"),Ar=Symbol("finishFlushFlag"),Ys=Symbol("fullFlushFlag"),w=Symbol("handle"),De=Symbol("onError"),Lt=Symbol("sawError"),Ls=Symbol("level"),Cs=Symbol("strategy"),xs=Symbol("ended"),ac=Symbol("_defaultFullFlush"),Ie=class extends Lh{constructor(t,e){if(!t||typeof t!="object")throw new TypeError("invalid options for ZlibBase constructor");super(t),this[Lt]=!1,this[xs]=!1,this[Ch]=t,this[ne]=t.flush,this[Ar]=t.finishFlush;try{this[w]=new vr[e](t)}catch(i){throw new Ct(i)}this[De]=i=>{this[Lt]||(this[Lt]=!0,this.close(),this.emit("error",i))},this[w].on("error",i=>this[De](new Ct(i))),this.once("end",()=>this.close)}close(){this[w]&&(this[w].close(),this[w]=null,this.emit("close"))}reset(){if(!this[Lt])return Fs(this[w],"zlib binding closed"),this[w].reset()}flush(t){this.ended||(typeof t!="number"&&(t=this[Ys]),this.write(Object.assign(nt.alloc(0),{[ne]:t})))}end(t,e,i){return t&&this.write(t,e),this.flush(this[Ar]),this[xs]=!0,super.end(null,null,i)}get ended(){return this[xs]}write(t,e,i){if(typeof e=="function"&&(i=e,e="utf8"),typeof t=="string"&&(t=nt.from(t,e)),this[Lt])return;Fs(this[w],"zlib binding closed");let r=this[w]._handle,n=r.close;r.close=()=>{};let o=this[w].close;this[w].close=()=>{},nt.concat=a=>a;let h;try{let a=typeof t[ne]=="number"?t[ne]:this[ne];h=this[w]._processChunk(t,a),nt.concat=Nr}catch(a){nt.concat=Nr,this[De](new Ct(a))}finally{this[w]&&(this[w]._handle=r,r.close=n,this[w].close=o,this[w].removeAllListeners("error"))}this[w]&&this[w].on("error",a=>this[De](new Ct(a)));let l;if(h)if(Array.isArray(h)&&h.length>0){l=this[gt](nt.from(h[0]));for(let a=1;a<h.length;a++)l=this[gt](h[a])}else l=this[gt](nt.from(h));return i&&i(),l}[gt](t){return super.write(t)}},Q=class extends Ie{constructor(t,e){t=t||{},t.flush=t.flush||Et.Z_NO_FLUSH,t.finishFlush=t.finishFlush||Et.Z_FINISH,super(t,e),this[Ys]=Et.Z_FULL_FLUSH,this[Ls]=t.level,this[Cs]=t.strategy}params(t,e){if(!this[Lt]){if(!this[w])throw new Error("cannot switch params when binding is closed");if(!this[w].params)throw new Error("not supported in this implementation");if(this[Ls]!==t||this[Cs]!==e){this.flush(Et.Z_SYNC_FLUSH),Fs(this[w],"zlib binding closed");let i=this[w].flush;this[w].flush=(r,n)=>{this.flush(r),n()};try{this[w].params(t,e)}finally{this[w].flush=i}this[w]&&(this[Ls]=t,this[Cs]=e)}}}},ks=class extends Q{constructor(t){super(t,"Deflate")}},Ms=class extends Q{constructor(t){super(t,"Inflate")}},Ps=Symbol("_portable"),Bs=class extends Q{constructor(t){super(t,"Gzip"),this[Ps]=t&&!!t.portable}[gt](t){return this[Ps]?(this[Ps]=!1,t[9]=255,super[gt](t)):super[gt](t)}},qs=class extends Q{constructor(t){super(t,"Gunzip")}},Us=class extends Q{constructor(t){super(t,"DeflateRaw")}},zs=class extends Q{constructor(t){super(t,"InflateRaw")}},Hs=class extends Q{constructor(t){super(t,"Unzip")}},Le=class extends Ie{constructor(t,e){t=t||{},t.flush=t.flush||Et.BROTLI_OPERATION_PROCESS,t.finishFlush=t.finishFlush||Et.BROTLI_OPERATION_FINISH,super(t,e),this[Ys]=Et.BROTLI_OPERATION_FLUSH}},Ws=class extends Le{constructor(t){super(t,"BrotliCompress")}},Gs=class extends Le{constructor(t){super(t,"BrotliDecompress")}};x.Deflate=ks;x.Inflate=Ms;x.Gzip=Bs;x.Gunzip=qs;x.DeflateRaw=Us;x.InflateRaw=zs;x.Unzip=Hs;typeof vr.BrotliCompress=="function"?(x.BrotliCompress=Ws,x.BrotliDecompress=Gs):x.BrotliCompress=x.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var xt=p((uc,Dr)=>{var xh=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;Dr.exports=xh!=="win32"?s=>s:s=>s&&s.replace(/\\/g,"/")});var Ce=p((dc,Ir)=>{"use strict";var Ph=It(),Zs=xt(),Ks=Symbol("slurp");Ir.exports=class extends Ph{constructor(t,e,i){switch(super(),this.pause(),this.extended=e,this.globalExtended=i,this.header=t,this.startBlockSize=512*Math.ceil(t.size/512),this.blockRemain=this.startBlockSize,this.remain=t.size,this.type=t.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Zs(t.path),this.mode=t.mode,this.mode&&(this.mode=this.mode&4095),this.uid=t.uid,this.gid=t.gid,this.uname=t.uname,this.gname=t.gname,this.size=t.size,this.mtime=t.mtime,this.atime=t.atime,this.ctime=t.ctime,this.linkpath=Zs(t.linkpath),this.uname=t.uname,this.gname=t.gname,e&&this[Ks](e),i&&this[Ks](i,!0)}write(t){let e=t.length;if(e>this.blockRemain)throw new Error("writing more to entry than is appropriate");let i=this.remain,r=this.blockRemain;return this.remain=Math.max(0,i-e),this.blockRemain=Math.max(0,r-e),this.ignore?!0:i>=e?super.write(t):super.write(t.slice(0,i))}[Ks](t,e){for(let i in t)t[i]!==null&&t[i]!==void 0&&!(e&&i==="path")&&(this[i]=i==="path"||i==="linkpath"?Zs(t[i]):t[i])}}});var js=p(xe=>{"use strict";xe.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);xe.code=new Map(Array.from(xe.name).map(s=>[s[1],s[0]]))});var Pr=p((pc,xr)=>{"use strict";var Fh=(s,t)=>{if(Number.isSafeInteger(s))s<0?Mh(s,t):kh(s,t);else throw Error("cannot encode number outside of javascript safe integer range");return t},kh=(s,t)=>{t[0]=128;for(var e=t.length;e>1;e--)t[e-1]=s&255,s=Math.floor(s/256)},Mh=(s,t)=>{t[0]=255;var e=!1;s=s*-1;for(var i=t.length;i>1;i--){var r=s&255;s=Math.floor(s/256),e?t[i-1]=Lr(r):r===0?t[i-1]=0:(e=!0,t[i-1]=Cr(r))}},Bh=s=>{let t=s[0],e=t===128?Uh(s.slice(1,s.length)):t===255?qh(s):null;if(e===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(e))throw Error("parsed number outside of javascript safe integer range");return e},qh=s=>{for(var t=s.length,e=0,i=!1,r=t-1;r>-1;r--){var n=s[r],o;i?o=Lr(n):n===0?o=n:(i=!0,o=Cr(n)),o!==0&&(e-=o*Math.pow(256,t-r-1))}return e},Uh=s=>{for(var t=s.length,e=0,i=t-1;i>-1;i--){var r=s[i];r!==0&&(e+=r*Math.pow(256,t-i-1))}return e},Lr=s=>(255^s)&255,Cr=s=>(255^s)+1&255;xr.exports={encode:Fh,parse:Bh}});var Ft=p((yc,kr)=>{"use strict";var Vs=js(),Pt=require("path").posix,Fr=Pr(),Xs=Symbol("slurp"),P=Symbol("type"),ti=class{constructor(t,e,i,r){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[P]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(t)?this.decode(t,e||0,i,r):t&&this.set(t)}decode(t,e,i,r){if(e||(e=0),!t||!(t.length>=e+512))throw new Error("need 512 bytes for header");if(this.path=St(t,e,100),this.mode=ot(t,e+100,8),this.uid=ot(t,e+108,8),this.gid=ot(t,e+116,8),this.size=ot(t,e+124,12),this.mtime=Js(t,e+136,12),this.cksum=ot(t,e+148,12),this[Xs](i),this[Xs](r,!0),this[P]=St(t,e+156,1),this[P]===""&&(this[P]="0"),this[P]==="0"&&this.path.substr(-1)==="/"&&(this[P]="5"),this[P]==="5"&&(this.size=0),this.linkpath=St(t,e+157,100),t.slice(e+257,e+265).toString()==="ustar\x0000")if(this.uname=St(t,e+265,32),this.gname=St(t,e+297,32),this.devmaj=ot(t,e+329,8),this.devmin=ot(t,e+337,8),t[e+475]!==0){let o=St(t,e+345,155);this.path=o+"/"+this.path}else{let o=St(t,e+345,130);o&&(this.path=o+"/"+this.path),this.atime=Js(t,e+476,12),this.ctime=Js(t,e+488,12)}let n=8*32;for(let o=e;o<e+148;o++)n+=t[o];for(let o=e+156;o<e+512;o++)n+=t[o];this.cksumValid=n===this.cksum,this.cksum===null&&n===8*32&&(this.nullBlock=!0)}[Xs](t,e){for(let i in t)t[i]!==null&&t[i]!==void 0&&!(e&&i==="path")&&(this[i]=t[i])}encode(t,e){if(t||(t=this.block=Buffer.alloc(512),e=0),e||(e=0),!(t.length>=e+512))throw new Error("need 512 bytes for header");let i=this.ctime||this.atime?130:155,r=zh(this.path||"",i),n=r[0],o=r[1];this.needPax=r[2],this.needPax=wt(t,e,100,n)||this.needPax,this.needPax=ht(t,e+100,8,this.mode)||this.needPax,this.needPax=ht(t,e+108,8,this.uid)||this.needPax,this.needPax=ht(t,e+116,8,this.gid)||this.needPax,this.needPax=ht(t,e+124,12,this.size)||this.needPax,this.needPax=Qs(t,e+136,12,this.mtime)||this.needPax,t[e+156]=this[P].charCodeAt(0),this.needPax=wt(t,e+157,100,this.linkpath)||this.needPax,t.write("ustar\x0000",e+257,8),this.needPax=wt(t,e+265,32,this.uname)||this.needPax,this.needPax=wt(t,e+297,32,this.gname)||this.needPax,this.needPax=ht(t,e+329,8,this.devmaj)||this.needPax,this.needPax=ht(t,e+337,8,this.devmin)||this.needPax,this.needPax=wt(t,e+345,i,o)||this.needPax,t[e+475]!==0?this.needPax=wt(t,e+345,155,o)||this.needPax:(this.needPax=wt(t,e+345,130,o)||this.needPax,this.needPax=Qs(t,e+476,12,this.atime)||this.needPax,this.needPax=Qs(t,e+488,12,this.ctime)||this.needPax);let h=8*32;for(let l=e;l<e+148;l++)h+=t[l];for(let l=e+156;l<e+512;l++)h+=t[l];return this.cksum=h,ht(t,e+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(t){for(let e in t)t[e]!==null&&t[e]!==void 0&&(this[e]=t[e])}get type(){return Vs.name.get(this[P])||this[P]}get typeKey(){return this[P]}set type(t){Vs.code.has(t)?this[P]=Vs.code.get(t):this[P]=t}},zh=(s,t)=>{let i=s,r="",n,o=Pt.parse(s).root||".";if(Buffer.byteLength(i)<100)n=[i,r,!1];else{r=Pt.dirname(i),i=Pt.basename(i);do Buffer.byteLength(i)<=100&&Buffer.byteLength(r)<=t?n=[i,r,!1]:Buffer.byteLength(i)>100&&Buffer.byteLength(r)<=t?n=[i.substr(0,100-1),r,!0]:(i=Pt.join(Pt.basename(r),i),r=Pt.dirname(r));while(r!==o&&!n);n||(n=[s.substr(0,100-1),"",!0])}return n},St=(s,t,e)=>s.slice(t,t+e).toString("utf8").replace(/\0.*/,""),Js=(s,t,e)=>Hh(ot(s,t,e)),Hh=s=>s===null?null:new Date(s*1e3),ot=(s,t,e)=>s[t]&128?Fr.parse(s.slice(t,t+e)):Gh(s,t,e),Wh=s=>isNaN(s)?null:s,Gh=(s,t,e)=>Wh(parseInt(s.slice(t,t+e).toString("utf8").replace(/\0.*$/,"").trim(),8)),Yh={12:8589934591,8:2097151},ht=(s,t,e,i)=>i===null?!1:i>Yh[e]||i<0?(Fr.encode(i,s.slice(t,t+e)),!0):($h(s,t,e,i),!1),$h=(s,t,e,i)=>s.write(Zh(i,e),t,e,"ascii"),Zh=(s,t)=>Kh(Math.floor(s).toString(8),t),Kh=(s,t)=>(s.length===t-1?s:new Array(t-s.length-1).join("0")+s+" ")+"\0",Qs=(s,t,e,i)=>i===null?!1:ht(s,t,e,i.getTime()/1e3),jh=new Array(156).join("\0"),wt=(s,t,e,i)=>i===null?!1:(s.write(i+jh,t,e,"utf8"),i.length!==Buffer.byteLength(i)||i.length>e);kr.exports=ti});var Pe=p((Ec,Mr)=>{"use strict";var Vh=Ft(),Xh=require("path"),oe=class{constructor(t,e){this.atime=t.atime||null,this.charset=t.charset||null,this.comment=t.comment||null,this.ctime=t.ctime||null,this.gid=t.gid||null,this.gname=t.gname||null,this.linkpath=t.linkpath||null,this.mtime=t.mtime||null,this.path=t.path||null,this.size=t.size||null,this.uid=t.uid||null,this.uname=t.uname||null,this.dev=t.dev||null,this.ino=t.ino||null,this.nlink=t.nlink||null,this.global=e||!1}encode(){let t=this.encodeBody();if(t==="")return null;let e=Buffer.byteLength(t),i=512*Math.ceil(1+e/512),r=Buffer.allocUnsafe(i);for(let n=0;n<512;n++)r[n]=0;new Vh({path:("PaxHeader/"+Xh.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:e,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(r),r.write(t,512,e,"utf8");for(let n=e+512;n<r.length;n++)r[n]=0;return r}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(t){if(this[t]===null||this[t]===void 0)return"";let e=this[t]instanceof Date?this[t].getTime()/1e3:this[t],i=" "+(t==="dev"||t==="ino"||t==="nlink"?"SCHILY.":"")+t+"="+e+`
`,r=Buffer.byteLength(i),n=Math.floor(Math.log(r)/Math.log(10))+1;return r+n>=Math.pow(10,n)&&(n+=1),n+r+i}};oe.parse=(s,t,e)=>new oe(Jh(Qh(s),t),e);var Jh=(s,t)=>t?Object.keys(s).reduce((e,i)=>(e[i]=s[i],e),t):s,Qh=s=>s.replace(/\n$/,"").split(`
`).reduce(ta,Object.create(null)),ta=(s,t)=>{let e=parseInt(t,10);if(e!==Buffer.byteLength(t)+1)return s;t=t.substr((e+" ").length);let i=t.split("="),r=i.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!r)return s;let n=i.join("=");return s[r]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(r)?new Date(n*1e3):/^[0-9]+$/.test(n)?+n:n,s};Mr.exports=oe});var kt=p((gc,Br)=>{Br.exports=s=>{let t=s.length-1,e=-1;for(;t>-1&&s.charAt(t)==="/";)e=t,t--;return e===-1?s:s.slice(0,e)}});var Fe=p((Sc,qr)=>{"use strict";qr.exports=s=>class extends s{warn(t,e,i={}){this.file&&(i.file=this.file),this.cwd&&(i.cwd=this.cwd),i.code=e instanceof Error&&e.code||t,i.tarCode=t,!this.strict&&i.recoverable!==!1?(e instanceof Error&&(i=Object.assign(e,i),e=e.message),this.emit("warn",i.tarCode,e,i)):e instanceof Error?this.emit("error",Object.assign(e,i)):this.emit("error",Object.assign(new Error(`${t}: ${e}`),i))}}});var si=p((Rc,Ur)=>{"use strict";var ke=["|","<",">","?",":"],ei=ke.map(s=>String.fromCharCode(61440+s.charCodeAt(0))),ea=new Map(ke.map((s,t)=>[s,ei[t]])),sa=new Map(ei.map((s,t)=>[s,ke[t]]));Ur.exports={encode:s=>ke.reduce((t,e)=>t.split(e).join(ea.get(e)),s),decode:s=>ei.reduce((t,e)=>t.split(e).join(sa.get(e)),s)}});var ii=p((_c,Hr)=>{var{isAbsolute:ia,parse:zr}=require("path").win32;Hr.exports=s=>{let t="",e=zr(s);for(;ia(s)||e.root;){let i=s.charAt(0)==="/"&&s.slice(0,4)!=="//?/"?"/":e.root;s=s.substr(i.length),t+=i,e=zr(s)}return[t,s]}});var Gr=p((Oc,Wr)=>{"use strict";Wr.exports=(s,t,e)=>(s&=4095,e&&(s=(s|384)&-19),t&&(s&256&&(s|=64),s&32&&(s|=8),s&4&&(s|=1)),s)});var di=p((Nc,nn)=>{"use strict";var Xr=It(),Jr=Pe(),Qr=Ft(),Y=require("fs"),Yr=require("path"),G=xt(),ra=kt(),tn=(s,t)=>t?(s=G(s).replace(/^\.(\/|$)/,""),ra(t)+"/"+s):G(s),na=16*1024*1024,$r=Symbol("process"),Zr=Symbol("file"),Kr=Symbol("directory"),ni=Symbol("symlink"),jr=Symbol("hardlink"),he=Symbol("header"),Me=Symbol("read"),oi=Symbol("lstat"),Be=Symbol("onlstat"),hi=Symbol("onread"),ai=Symbol("onreadlink"),li=Symbol("openfile"),ci=Symbol("onopenfile"),at=Symbol("close"),qe=Symbol("mode"),ui=Symbol("awaitDrain"),ri=Symbol("ondrain"),$=Symbol("prefix"),Vr=Symbol("hadError"),en=Fe(),oa=si(),sn=ii(),rn=Gr(),Ue=en(class extends Xr{constructor(t,e){if(e=e||{},super(e),typeof t!="string")throw new TypeError("path is required");this.path=G(t),this.portable=!!e.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=e.maxReadSize||na,this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.preservePaths=!!e.preservePaths,this.cwd=G(e.cwd||process.cwd()),this.strict=!!e.strict,this.noPax=!!e.noPax,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.prefix=e.prefix?G(e.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof e.onwarn=="function"&&this.on("warn",e.onwarn);let i=!1;if(!this.preservePaths){let[r,n]=sn(this.path);r&&(this.path=n,i=r)}this.win32=!!e.win32||process.platform==="win32",this.win32&&(this.path=oa.decode(this.path.replace(/\\/g,"/")),t=t.replace(/\\/g,"/")),this.absolute=G(e.absolute||Yr.resolve(this.cwd,t)),this.path===""&&(this.path="./"),i&&this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:this,path:i+this.path}),this.statCache.has(this.absolute)?this[Be](this.statCache.get(this.absolute)):this[oi]()}emit(t,...e){return t==="error"&&(this[Vr]=!0),super.emit(t,...e)}[oi](){Y.lstat(this.absolute,(t,e)=>{if(t)return this.emit("error",t);this[Be](e)})}[Be](t){this.statCache.set(this.absolute,t),this.stat=t,t.isFile()||(t.size=0),this.type=aa(t),this.emit("stat",t),this[$r]()}[$r](){switch(this.type){case"File":return this[Zr]();case"Directory":return this[Kr]();case"SymbolicLink":return this[ni]();default:return this.end()}}[qe](t){return rn(t,this.type==="Directory",this.portable)}[$](t){return tn(t,this.prefix)}[he](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new Qr({path:this[$](this.path),linkpath:this.type==="Link"?this[$](this.linkpath):this.linkpath,mode:this[qe](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new Jr({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[$](this.path),linkpath:this.type==="Link"?this[$](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[Kr](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[he](),this.end()}[ni](){Y.readlink(this.absolute,(t,e)=>{if(t)return this.emit("error",t);this[ai](e)})}[ai](t){this.linkpath=G(t),this[he](),this.end()}[jr](t){this.type="Link",this.linkpath=G(Yr.relative(this.cwd,t)),this.stat.size=0,this[he](),this.end()}[Zr](){if(this.stat.nlink>1){let t=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(t)){let e=this.linkCache.get(t);if(e.indexOf(this.cwd)===0)return this[jr](e)}this.linkCache.set(t,this.absolute)}if(this[he](),this.stat.size===0)return this.end();this[li]()}[li](){Y.open(this.absolute,"r",(t,e)=>{if(t)return this.emit("error",t);this[ci](e)})}[ci](t){if(this.fd=t,this[Vr])return this[at]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let e=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(e),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Me]()}[Me](){let{fd:t,buf:e,offset:i,length:r,pos:n}=this;Y.read(t,e,i,r,n,(o,h)=>{if(o)return this[at](()=>this.emit("error",o));this[hi](h)})}[at](t){Y.close(this.fd,t)}[hi](t){if(t<=0&&this.remain>0){let r=new Error("encountered unexpected EOF");return r.path=this.absolute,r.syscall="read",r.code="EOF",this[at](()=>this.emit("error",r))}if(t>this.remain){let r=new Error("did not encounter expected EOF");return r.path=this.absolute,r.syscall="read",r.code="EOF",this[at](()=>this.emit("error",r))}if(t===this.remain)for(let r=t;r<this.length&&t<this.blockRemain;r++)this.buf[r+this.offset]=0,t++,this.remain++;let e=this.offset===0&&t===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+t);this.write(e)?this[ri]():this[ui](()=>this[ri]())}[ui](t){this.once("drain",t)}write(t){if(this.blockRemain<t.length){let e=new Error("writing more data than expected");return e.path=this.absolute,this.emit("error",e)}return this.remain-=t.length,this.blockRemain-=t.length,this.pos+=t.length,this.offset+=t.length,super.write(t)}[ri](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[at](t=>t?this.emit("error",t):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Me]()}}),fi=class extends Ue{[oi](){this[Be](Y.lstatSync(this.absolute))}[ni](){this[ai](Y.readlinkSync(this.absolute))}[li](){this[ci](Y.openSync(this.absolute,"r"))}[Me](){let t=!0;try{let{fd:e,buf:i,offset:r,length:n,pos:o}=this,h=Y.readSync(e,i,r,n,o);this[hi](h),t=!1}finally{if(t)try{this[at](()=>{})}catch{}}}[ui](t){t()}[at](t){Y.closeSync(this.fd),t()}},ha=en(class extends Xr{constructor(t,e){e=e||{},super(e),this.preservePaths=!!e.preservePaths,this.portable=!!e.portable,this.strict=!!e.strict,this.noPax=!!e.noPax,this.noMtime=!!e.noMtime,this.readEntry=t,this.type=t.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=e.prefix||null,this.path=G(t.path),this.mode=this[qe](t.mode),this.uid=this.portable?null:t.uid,this.gid=this.portable?null:t.gid,this.uname=this.portable?null:t.uname,this.gname=this.portable?null:t.gname,this.size=t.size,this.mtime=this.noMtime?null:e.mtime||t.mtime,this.atime=this.portable?null:t.atime,this.ctime=this.portable?null:t.ctime,this.linkpath=G(t.linkpath),typeof e.onwarn=="function"&&this.on("warn",e.onwarn);let i=!1;if(!this.preservePaths){let[r,n]=sn(this.path);r&&(this.path=n,i=r)}this.remain=t.size,this.blockRemain=t.startBlockSize,this.header=new Qr({path:this[$](this.path),linkpath:this.type==="Link"?this[$](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),i&&this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:this,path:i+this.path}),this.header.encode()&&!this.noPax&&super.write(new Jr({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[$](this.path),linkpath:this.type==="Link"?this[$](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),t.pipe(this)}[$](t){return tn(t,this.prefix)}[qe](t){return rn(t,this.type==="Directory",this.portable)}write(t){let e=t.length;if(e>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=e,super.write(t)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Ue.Sync=fi;Ue.Tar=ha;var aa=s=>s.isFile()?"File":s.isDirectory()?"Directory":s.isSymbolicLink()?"SymbolicLink":"Unsupported";nn.exports=Ue});var je=p((vc,fn)=>{"use strict";var Ze=class{constructor(t,e){this.path=t||"./",this.absolute=e,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},la=It(),ca=$s(),ua=Ce(),_i=di(),fa=_i.Sync,da=_i.Tar,ma=be(),on=Buffer.alloc(1024),We=Symbol("onStat"),ze=Symbol("ended"),Z=Symbol("queue"),Mt=Symbol("current"),Rt=Symbol("process"),He=Symbol("processing"),hn=Symbol("processJob"),K=Symbol("jobs"),mi=Symbol("jobDone"),Ge=Symbol("addFSEntry"),an=Symbol("addTarEntry"),gi=Symbol("stat"),Si=Symbol("readdir"),Ye=Symbol("onreaddir"),$e=Symbol("pipe"),ln=Symbol("entry"),pi=Symbol("entryOpt"),wi=Symbol("writeEntryClass"),un=Symbol("write"),yi=Symbol("ondrain"),Ke=require("fs"),cn=require("path"),pa=Fe(),Ei=xt(),Oi=pa(class extends la{constructor(t){super(t),t=t||Object.create(null),this.opt=t,this.file=t.file||"",this.cwd=t.cwd||process.cwd(),this.maxReadSize=t.maxReadSize,this.preservePaths=!!t.preservePaths,this.strict=!!t.strict,this.noPax=!!t.noPax,this.prefix=Ei(t.prefix||""),this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.readdirCache=t.readdirCache||new Map,this[wi]=_i,typeof t.onwarn=="function"&&this.on("warn",t.onwarn),this.portable=!!t.portable,this.zip=null,t.gzip?(typeof t.gzip!="object"&&(t.gzip={}),this.portable&&(t.gzip.portable=!0),this.zip=new ca.Gzip(t.gzip),this.zip.on("data",e=>super.write(e)),this.zip.on("end",e=>super.end()),this.zip.on("drain",e=>this[yi]()),this.on("resume",e=>this.zip.resume())):this.on("drain",this[yi]),this.noDirRecurse=!!t.noDirRecurse,this.follow=!!t.follow,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.filter=typeof t.filter=="function"?t.filter:e=>!0,this[Z]=new ma,this[K]=0,this.jobs=+t.jobs||4,this[He]=!1,this[ze]=!1}[un](t){return super.write(t)}add(t){return this.write(t),this}end(t){return t&&this.write(t),this[ze]=!0,this[Rt](),this}write(t){if(this[ze])throw new Error("write after end");return t instanceof ua?this[an](t):this[Ge](t),this.flowing}[an](t){let e=Ei(cn.resolve(this.cwd,t.path));if(!this.filter(t.path,t))t.resume();else{let i=new Ze(t.path,e,!1);i.entry=new da(t,this[pi](i)),i.entry.on("end",r=>this[mi](i)),this[K]+=1,this[Z].push(i)}this[Rt]()}[Ge](t){let e=Ei(cn.resolve(this.cwd,t));this[Z].push(new Ze(t,e)),this[Rt]()}[gi](t){t.pending=!0,this[K]+=1;let e=this.follow?"stat":"lstat";Ke[e](t.absolute,(i,r)=>{t.pending=!1,this[K]-=1,i?this.emit("error",i):this[We](t,r)})}[We](t,e){this.statCache.set(t.absolute,e),t.stat=e,this.filter(t.path,e)||(t.ignore=!0),this[Rt]()}[Si](t){t.pending=!0,this[K]+=1,Ke.readdir(t.absolute,(e,i)=>{if(t.pending=!1,this[K]-=1,e)return this.emit("error",e);this[Ye](t,i)})}[Ye](t,e){this.readdirCache.set(t.absolute,e),t.readdir=e,this[Rt]()}[Rt](){if(!this[He]){this[He]=!0;for(let t=this[Z].head;t!==null&&this[K]<this.jobs;t=t.next)if(this[hn](t.value),t.value.ignore){let e=t.next;this[Z].removeNode(t),t.next=e}this[He]=!1,this[ze]&&!this[Z].length&&this[K]===0&&(this.zip?this.zip.end(on):(super.write(on),super.end()))}}get[Mt](){return this[Z]&&this[Z].head&&this[Z].head.value}[mi](t){this[Z].shift(),this[K]-=1,this[Rt]()}[hn](t){if(!t.pending){if(t.entry){t===this[Mt]&&!t.piped&&this[$e](t);return}if(t.stat||(this.statCache.has(t.absolute)?this[We](t,this.statCache.get(t.absolute)):this[gi](t)),!!t.stat&&!t.ignore&&!(!this.noDirRecurse&&t.stat.isDirectory()&&!t.readdir&&(this.readdirCache.has(t.absolute)?this[Ye](t,this.readdirCache.get(t.absolute)):this[Si](t),!t.readdir))){if(t.entry=this[ln](t),!t.entry){t.ignore=!0;return}t===this[Mt]&&!t.piped&&this[$e](t)}}}[pi](t){return{onwarn:(e,i,r)=>this.warn(e,i,r),noPax:this.noPax,cwd:this.cwd,absolute:t.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[ln](t){this[K]+=1;try{return new this[wi](t.path,this[pi](t)).on("end",()=>this[mi](t)).on("error",e=>this.emit("error",e))}catch(e){this.emit("error",e)}}[yi](){this[Mt]&&this[Mt].entry&&this[Mt].entry.resume()}[$e](t){t.piped=!0,t.readdir&&t.readdir.forEach(r=>{let n=t.path,o=n==="./"?"":n.replace(/\/*$/,"/");this[Ge](o+r)});let e=t.entry,i=this.zip;i?e.on("data",r=>{i.write(r)||e.pause()}):e.on("data",r=>{super.write(r)||e.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),Ri=class extends Oi{constructor(t){super(t),this[wi]=fa}pause(){}resume(){}[gi](t){let e=this.follow?"statSync":"lstatSync";this[We](t,Ke[e](t.absolute))}[Si](t,e){this[Ye](t,Ke.readdirSync(t.absolute))}[$e](t){let e=t.entry,i=this.zip;t.readdir&&t.readdir.forEach(r=>{let n=t.path,o=n==="./"?"":n.replace(/\/*$/,"/");this[Ge](o+r)}),i?e.on("data",r=>{i.write(r)}):e.on("data",r=>{super[un](r)})}};Oi.Sync=Ri;fn.exports=Oi});var Yt=p(le=>{"use strict";var ya=It(),Ea=require("events").EventEmitter,L=require("fs"),Ni=L.writev;if(!Ni){let s=process.binding("fs"),t=s.FSReqWrap||s.FSReqCallback;Ni=(e,i,r,n)=>{let o=(l,a)=>n(l,a,i),h=new t;h.oncomplete=o,s.writeBuffers(e,i,r,h)}}var Wt=Symbol("_autoClose"),H=Symbol("_close"),ae=Symbol("_ended"),S=Symbol("_fd"),dn=Symbol("_finished"),ct=Symbol("_flags"),bi=Symbol("_flush"),Ai=Symbol("_handleChunk"),vi=Symbol("_makeBuf"),ts=Symbol("_mode"),Ve=Symbol("_needDrain"),zt=Symbol("_onerror"),Gt=Symbol("_onopen"),Ti=Symbol("_onread"),qt=Symbol("_onwrite"),ut=Symbol("_open"),tt=Symbol("_path"),_t=Symbol("_pos"),j=Symbol("_queue"),Ut=Symbol("_read"),mn=Symbol("_readSize"),lt=Symbol("_reading"),Xe=Symbol("_remain"),pn=Symbol("_size"),Je=Symbol("_write"),Bt=Symbol("_writing"),Qe=Symbol("_defaultFlag"),Ht=Symbol("_errored"),es=class extends ya{constructor(t,e){if(e=e||{},super(e),this.readable=!0,this.writable=!1,typeof t!="string")throw new TypeError("path must be a string");this[Ht]=!1,this[S]=typeof e.fd=="number"?e.fd:null,this[tt]=t,this[mn]=e.readSize||16*1024*1024,this[lt]=!1,this[pn]=typeof e.size=="number"?e.size:1/0,this[Xe]=this[pn],this[Wt]=typeof e.autoClose=="boolean"?e.autoClose:!0,typeof this[S]=="number"?this[Ut]():this[ut]()}get fd(){return this[S]}get path(){return this[tt]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[ut](){L.open(this[tt],"r",(t,e)=>this[Gt](t,e))}[Gt](t,e){t?this[zt](t):(this[S]=e,this.emit("open",e),this[Ut]())}[vi](){return Buffer.allocUnsafe(Math.min(this[mn],this[Xe]))}[Ut](){if(!this[lt]){this[lt]=!0;let t=this[vi]();if(t.length===0)return process.nextTick(()=>this[Ti](null,0,t));L.read(this[S],t,0,t.length,null,(e,i,r)=>this[Ti](e,i,r))}}[Ti](t,e,i){this[lt]=!1,t?this[zt](t):this[Ai](e,i)&&this[Ut]()}[H](){if(this[Wt]&&typeof this[S]=="number"){let t=this[S];this[S]=null,L.close(t,e=>e?this.emit("error",e):this.emit("close"))}}[zt](t){this[lt]=!0,this[H](),this.emit("error",t)}[Ai](t,e){let i=!1;return this[Xe]-=t,t>0&&(i=super.write(t<e.length?e.slice(0,t):e)),(t===0||this[Xe]<=0)&&(i=!1,this[H](),super.end()),i}emit(t,e){switch(t){case"prefinish":case"finish":break;case"drain":typeof this[S]=="number"&&this[Ut]();break;case"error":return this[Ht]?void 0:(this[Ht]=!0,super.emit(t,e));default:return super.emit(t,e)}}},Di=class extends es{[ut](){let t=!0;try{this[Gt](null,L.openSync(this[tt],"r")),t=!1}finally{t&&this[H]()}}[Ut](){let t=!0;try{if(!this[lt]){this[lt]=!0;do{let e=this[vi](),i=e.length===0?0:L.readSync(this[S],e,0,e.length,null);if(!this[Ai](i,e))break}while(!0);this[lt]=!1}t=!1}finally{t&&this[H]()}}[H](){if(this[Wt]&&typeof this[S]=="number"){let t=this[S];this[S]=null,L.closeSync(t),this.emit("close")}}},ss=class extends Ea{constructor(t,e){e=e||{},super(e),this.readable=!1,this.writable=!0,this[Ht]=!1,this[Bt]=!1,this[ae]=!1,this[Ve]=!1,this[j]=[],this[tt]=t,this[S]=typeof e.fd=="number"?e.fd:null,this[ts]=e.mode===void 0?438:e.mode,this[_t]=typeof e.start=="number"?e.start:null,this[Wt]=typeof e.autoClose=="boolean"?e.autoClose:!0;let i=this[_t]!==null?"r+":"w";this[Qe]=e.flags===void 0,this[ct]=this[Qe]?i:e.flags,this[S]===null&&this[ut]()}emit(t,e){if(t==="error"){if(this[Ht])return;this[Ht]=!0}return super.emit(t,e)}get fd(){return this[S]}get path(){return this[tt]}[zt](t){this[H](),this[Bt]=!0,this.emit("error",t)}[ut](){L.open(this[tt],this[ct],this[ts],(t,e)=>this[Gt](t,e))}[Gt](t,e){this[Qe]&&this[ct]==="r+"&&t&&t.code==="ENOENT"?(this[ct]="w",this[ut]()):t?this[zt](t):(this[S]=e,this.emit("open",e),this[bi]())}end(t,e){return t&&this.write(t,e),this[ae]=!0,!this[Bt]&&!this[j].length&&typeof this[S]=="number"&&this[qt](null,0),this}write(t,e){return typeof t=="string"&&(t=Buffer.from(t,e)),this[ae]?(this.emit("error",new Error("write() after end()")),!1):this[S]===null||this[Bt]||this[j].length?(this[j].push(t),this[Ve]=!0,!1):(this[Bt]=!0,this[Je](t),!0)}[Je](t){L.write(this[S],t,0,t.length,this[_t],(e,i)=>this[qt](e,i))}[qt](t,e){t?this[zt](t):(this[_t]!==null&&(this[_t]+=e),this[j].length?this[bi]():(this[Bt]=!1,this[ae]&&!this[dn]?(this[dn]=!0,this[H](),this.emit("finish")):this[Ve]&&(this[Ve]=!1,this.emit("drain"))))}[bi](){if(this[j].length===0)this[ae]&&this[qt](null,0);else if(this[j].length===1)this[Je](this[j].pop());else{let t=this[j];this[j]=[],Ni(this[S],t,this[_t],(e,i)=>this[qt](e,i))}}[H](){if(this[Wt]&&typeof this[S]=="number"){let t=this[S];this[S]=null,L.close(t,e=>e?this.emit("error",e):this.emit("close"))}}},Ii=class extends ss{[ut](){let t;if(this[Qe]&&this[ct]==="r+")try{t=L.openSync(this[tt],this[ct],this[ts])}catch(e){if(e.code==="ENOENT")return this[ct]="w",this[ut]();throw e}else t=L.openSync(this[tt],this[ct],this[ts]);this[Gt](null,t)}[H](){if(this[Wt]&&typeof this[S]=="number"){let t=this[S];this[S]=null,L.closeSync(t),this.emit("close")}}[Je](t){let e=!0;try{this[qt](null,L.writeSync(this[S],t,0,t.length,this[_t])),e=!1}finally{if(e)try{this[H]()}catch{}}}};le.ReadStream=es;le.ReadStreamSync=Di;le.WriteStream=ss;le.WriteStreamSync=Ii});var ls=p((Lc,_n)=>{"use strict";var ga=Fe(),Sa=Ft(),wa=require("events"),Ra=be(),_a=1024*1024,Oa=Ce(),yn=Pe(),ba=$s(),Li=Buffer.from([31,139]),M=Symbol("state"),Ot=Symbol("writeEntry"),et=Symbol("readEntry"),Ci=Symbol("nextEntry"),En=Symbol("processEntry"),B=Symbol("extendedHeader"),ce=Symbol("globalExtendedHeader"),ft=Symbol("meta"),gn=Symbol("emitMeta"),_=Symbol("buffer"),st=Symbol("queue"),bt=Symbol("ended"),Sn=Symbol("emittedEnd"),Tt=Symbol("emit"),C=Symbol("unzip"),is=Symbol("consumeChunk"),rs=Symbol("consumeChunkSub"),xi=Symbol("consumeBody"),wn=Symbol("consumeMeta"),Rn=Symbol("consumeHeader"),ns=Symbol("consuming"),Pi=Symbol("bufferConcat"),Fi=Symbol("maybeEnd"),ue=Symbol("writing"),dt=Symbol("aborted"),os=Symbol("onDone"),Nt=Symbol("sawValidEntry"),hs=Symbol("sawNullBlock"),as=Symbol("sawEOF"),Ta=s=>!0;_n.exports=ga(class extends wa{constructor(t){t=t||{},super(t),this.file=t.file||"",this[Nt]=null,this.on(os,e=>{(this[M]==="begin"||this[Nt]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),t.ondone?this.on(os,t.ondone):this.on(os,e=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!t.strict,this.maxMetaEntrySize=t.maxMetaEntrySize||_a,this.filter=typeof t.filter=="function"?t.filter:Ta,this.writable=!0,this.readable=!1,this[st]=new Ra,this[_]=null,this[et]=null,this[Ot]=null,this[M]="begin",this[ft]="",this[B]=null,this[ce]=null,this[bt]=!1,this[C]=null,this[dt]=!1,this[hs]=!1,this[as]=!1,typeof t.onwarn=="function"&&this.on("warn",t.onwarn),typeof t.onentry=="function"&&this.on("entry",t.onentry)}[Rn](t,e){this[Nt]===null&&(this[Nt]=!1);let i;try{i=new Sa(t,e,this[B],this[ce])}catch(r){return this.warn("TAR_ENTRY_INVALID",r)}if(i.nullBlock)this[hs]?(this[as]=!0,this[M]==="begin"&&(this[M]="header"),this[Tt]("eof")):(this[hs]=!0,this[Tt]("nullBlock"));else if(this[hs]=!1,!i.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:i});else if(!i.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:i});else{let r=i.type;if(/^(Symbolic)?Link$/.test(r)&&!i.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:i});else if(!/^(Symbolic)?Link$/.test(r)&&i.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:i});else{let n=this[Ot]=new Oa(i,this[B],this[ce]);if(!this[Nt])if(n.remain){let o=()=>{n.invalid||(this[Nt]=!0)};n.on("end",o)}else this[Nt]=!0;n.meta?n.size>this.maxMetaEntrySize?(n.ignore=!0,this[Tt]("ignoredEntry",n),this[M]="ignore",n.resume()):n.size>0&&(this[ft]="",n.on("data",o=>this[ft]+=o),this[M]="meta"):(this[B]=null,n.ignore=n.ignore||!this.filter(n.path,n),n.ignore?(this[Tt]("ignoredEntry",n),this[M]=n.remain?"ignore":"header",n.resume()):(n.remain?this[M]="body":(this[M]="header",n.end()),this[et]?this[st].push(n):(this[st].push(n),this[Ci]())))}}}[En](t){let e=!0;return t?Array.isArray(t)?this.emit.apply(this,t):(this[et]=t,this.emit("entry",t),t.emittedEnd||(t.on("end",i=>this[Ci]()),e=!1)):(this[et]=null,e=!1),e}[Ci](){do;while(this[En](this[st].shift()));if(!this[st].length){let t=this[et];!t||t.flowing||t.size===t.remain?this[ue]||this.emit("drain"):t.once("drain",i=>this.emit("drain"))}}[xi](t,e){let i=this[Ot],r=i.blockRemain,n=r>=t.length&&e===0?t:t.slice(e,e+r);return i.write(n),i.blockRemain||(this[M]="header",this[Ot]=null,i.end()),n.length}[wn](t,e){let i=this[Ot],r=this[xi](t,e);return this[Ot]||this[gn](i),r}[Tt](t,e,i){!this[st].length&&!this[et]?this.emit(t,e,i):this[st].push([t,e,i])}[gn](t){switch(this[Tt]("meta",this[ft]),t.type){case"ExtendedHeader":case"OldExtendedHeader":this[B]=yn.parse(this[ft],this[B],!1);break;case"GlobalExtendedHeader":this[ce]=yn.parse(this[ft],this[ce],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[B]=this[B]||Object.create(null),this[B].path=this[ft].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[B]=this[B]||Object.create(null),this[B].linkpath=this[ft].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+t.type)}}abort(t){this[dt]=!0,this.emit("abort",t),this.warn("TAR_ABORT",t,{recoverable:!1})}write(t){if(this[dt])return;if(this[C]===null&&t){if(this[_]&&(t=Buffer.concat([this[_],t]),this[_]=null),t.length<Li.length)return this[_]=t,!0;for(let i=0;this[C]===null&&i<Li.length;i++)t[i]!==Li[i]&&(this[C]=!1);if(this[C]===null){let i=this[bt];this[bt]=!1,this[C]=new ba.Unzip,this[C].on("data",n=>this[is](n)),this[C].on("error",n=>this.abort(n)),this[C].on("end",n=>{this[bt]=!0,this[is]()}),this[ue]=!0;let r=this[C][i?"end":"write"](t);return this[ue]=!1,r}}this[ue]=!0,this[C]?this[C].write(t):this[is](t),this[ue]=!1;let e=this[st].length?!1:this[et]?this[et].flowing:!0;return!e&&!this[st].length&&this[et].once("drain",i=>this.emit("drain")),e}[Pi](t){t&&!this[dt]&&(this[_]=this[_]?Buffer.concat([this[_],t]):t)}[Fi](){if(this[bt]&&!this[Sn]&&!this[dt]&&!this[ns]){this[Sn]=!0;let t=this[Ot];if(t&&t.blockRemain){let e=this[_]?this[_].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${t.blockRemain} more bytes, only ${e} available)`,{entry:t}),this[_]&&t.write(this[_]),t.end()}this[Tt](os)}}[is](t){if(this[ns])this[Pi](t);else if(!t&&!this[_])this[Fi]();else{if(this[ns]=!0,this[_]){this[Pi](t);let e=this[_];this[_]=null,this[rs](e)}else this[rs](t);for(;this[_]&&this[_].length>=512&&!this[dt]&&!this[as];){let e=this[_];this[_]=null,this[rs](e)}this[ns]=!1}(!this[_]||this[bt])&&this[Fi]()}[rs](t){let e=0,i=t.length;for(;e+512<=i&&!this[dt]&&!this[as];)switch(this[M]){case"begin":case"header":this[Rn](t,e),e+=512;break;case"ignore":case"body":e+=this[xi](t,e);break;case"meta":e+=this[wn](t,e);break;default:throw new Error("invalid state: "+this[M])}e<i&&(this[_]?this[_]=Buffer.concat([t.slice(e),this[_]]):this[_]=t.slice(e))}end(t){this[dt]||(this[C]?this[C].end(t):(this[bt]=!0,this.write(t)))}})});var cs=p((Cc,Nn)=>{"use strict";var Na=Dt(),bn=ls(),$t=require("fs"),Aa=Yt(),On=require("path"),ki=kt();Nn.exports=(s,t,e)=>{typeof s=="function"?(e=s,t=null,s={}):Array.isArray(s)&&(t=s,s={}),typeof t=="function"&&(e=t,t=null),t?t=Array.from(t):t=[];let i=Na(s);if(i.sync&&typeof e=="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof e=="function")throw new TypeError("callback only supported with file option");return t.length&&Da(i,t),i.noResume||va(i),i.file&&i.sync?Ia(i):i.file?La(i,e):Tn(i)};var va=s=>{let t=s.onentry;s.onentry=t?e=>{t(e),e.resume()}:e=>e.resume()},Da=(s,t)=>{let e=new Map(t.map(n=>[ki(n),!0])),i=s.filter,r=(n,o)=>{let h=o||On.parse(n).root||".",l=n===h?!1:e.has(n)?e.get(n):r(On.dirname(n),h);return e.set(n,l),l};s.filter=i?(n,o)=>i(n,o)&&r(ki(n)):n=>r(ki(n))},Ia=s=>{let t=Tn(s),e=s.file,i=!0,r;try{let n=$t.statSync(e),o=s.maxReadSize||16*1024*1024;if(n.size<o)t.end($t.readFileSync(e));else{let h=0,l=Buffer.allocUnsafe(o);for(r=$t.openSync(e,"r");h<n.size;){let a=$t.readSync(r,l,0,o,h);h+=a,t.write(l.slice(0,a))}t.end()}i=!1}finally{if(i&&r)try{$t.closeSync(r)}catch{}}},La=(s,t)=>{let e=new bn(s),i=s.maxReadSize||16*1024*1024,r=s.file,n=new Promise((o,h)=>{e.on("error",h),e.on("end",o),$t.stat(r,(l,a)=>{if(l)h(l);else{let c=new Aa.ReadStream(r,{readSize:i,size:a.size});c.on("error",h),c.pipe(e)}})});return t?n.then(t,t):n},Tn=s=>new bn(s)});var Cn=p((xc,Ln)=>{"use strict";var Ca=Dt(),us=je(),An=Yt(),vn=cs(),Dn=require("path");Ln.exports=(s,t,e)=>{if(typeof t=="function"&&(e=t),Array.isArray(s)&&(t=s,s={}),!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");t=Array.from(t);let i=Ca(s);if(i.sync&&typeof e=="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof e=="function")throw new TypeError("callback only supported with file option");return i.file&&i.sync?xa(i,t):i.file?Pa(i,t,e):i.sync?Fa(i,t):ka(i,t)};var xa=(s,t)=>{let e=new us.Sync(s),i=new An.WriteStreamSync(s.file,{mode:s.mode||438});e.pipe(i),In(e,t)},Pa=(s,t,e)=>{let i=new us(s),r=new An.WriteStream(s.file,{mode:s.mode||438});i.pipe(r);let n=new Promise((o,h)=>{r.on("error",h),r.on("close",o),i.on("error",h)});return Mi(i,t),e?n.then(e,e):n},In=(s,t)=>{t.forEach(e=>{e.charAt(0)==="@"?vn({file:Dn.resolve(s.cwd,e.substr(1)),sync:!0,noResume:!0,onentry:i=>s.add(i)}):s.add(e)}),s.end()},Mi=(s,t)=>{for(;t.length;){let e=t.shift();if(e.charAt(0)==="@")return vn({file:Dn.resolve(s.cwd,e.substr(1)),noResume:!0,onentry:i=>s.add(i)}).then(i=>Mi(s,t));s.add(e)}s.end()},Fa=(s,t)=>{let e=new us.Sync(s);return In(e,t),e},ka=(s,t)=>{let e=new us(s);return Mi(e,t),e}});var Bi=p((Pc,qn)=>{"use strict";var Ma=Dt(),xn=je(),F=require("fs"),Pn=Yt(),Fn=cs(),kn=require("path"),Mn=Ft();qn.exports=(s,t,e)=>{let i=Ma(s);if(!i.file)throw new TypeError("file is required");if(i.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),i.sync?Ba(i,t):Ua(i,t,e)};var Ba=(s,t)=>{let e=new xn.Sync(s),i=!0,r,n;try{try{r=F.openSync(s.file,"r+")}catch(l){if(l.code==="ENOENT")r=F.openSync(s.file,"w+");else throw l}let o=F.fstatSync(r),h=Buffer.alloc(512);t:for(n=0;n<o.size;n+=512){for(let c=0,u=0;c<512;c+=u){if(u=F.readSync(r,h,c,h.length-c,n+c),n===0&&h[0]===31&&h[1]===139)throw new Error("cannot append to compressed archives");if(!u)break t}let l=new Mn(h);if(!l.cksumValid)break;let a=512*Math.ceil(l.size/512);if(n+a+512>o.size)break;n+=a,s.mtimeCache&&s.mtimeCache.set(l.path,l.mtime)}i=!1,qa(s,e,n,r,t)}finally{if(i)try{F.closeSync(r)}catch{}}},qa=(s,t,e,i,r)=>{let n=new Pn.WriteStreamSync(s.file,{fd:i,start:e});t.pipe(n),za(t,r)},Ua=(s,t,e)=>{t=Array.from(t);let i=new xn(s),r=(o,h,l)=>{let a=(y,d)=>{y?F.close(o,R=>l(y)):l(null,d)},c=0;if(h===0)return a(null,0);let u=0,f=Buffer.alloc(512),m=(y,d)=>{if(y)return a(y);if(u+=d,u<512&&d)return F.read(o,f,u,f.length-u,c+u,m);if(c===0&&f[0]===31&&f[1]===139)return a(new Error("cannot append to compressed archives"));if(u<512)return a(null,c);let R=new Mn(f);if(!R.cksumValid)return a(null,c);let O=512*Math.ceil(R.size/512);if(c+O+512>h||(c+=O+512,c>=h))return a(null,c);s.mtimeCache&&s.mtimeCache.set(R.path,R.mtime),u=0,F.read(o,f,0,512,c,m)};F.read(o,f,0,512,c,m)},n=new Promise((o,h)=>{i.on("error",h);let l="r+",a=(c,u)=>{if(c&&c.code==="ENOENT"&&l==="r+")return l="w+",F.open(s.file,l,a);if(c)return h(c);F.fstat(u,(f,m)=>{if(f)return F.close(u,()=>h(f));r(u,m.size,(y,d)=>{if(y)return h(y);let R=new Pn.WriteStream(s.file,{fd:u,start:d});i.pipe(R),R.on("error",h),R.on("close",o),Bn(i,t)})})};F.open(s.file,l,a)});return e?n.then(e,e):n},za=(s,t)=>{t.forEach(e=>{e.charAt(0)==="@"?Fn({file:kn.resolve(s.cwd,e.substr(1)),sync:!0,noResume:!0,onentry:i=>s.add(i)}):s.add(e)}),s.end()},Bn=(s,t)=>{for(;t.length;){let e=t.shift();if(e.charAt(0)==="@")return Fn({file:kn.resolve(s.cwd,e.substr(1)),noResume:!0,onentry:i=>s.add(i)}).then(i=>Bn(s,t));s.add(e)}s.end()}});var zn=p((Fc,Un)=>{"use strict";var Ha=Dt(),Wa=Bi();Un.exports=(s,t,e)=>{let i=Ha(s);if(!i.file)throw new TypeError("file is required");if(i.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),Ga(i),Wa(i,t,e)};var Ga=s=>{let t=s.filter;s.mtimeCache||(s.mtimeCache=new Map),s.filter=t?(e,i)=>t(e,i)&&!(s.mtimeCache.get(e)>i.mtime):(e,i)=>!(s.mtimeCache.get(e)>i.mtime)}});var Gn=p((kc,Wn)=>{var{promisify:Hn}=require("util"),mt=require("fs"),Ya=s=>{if(!s)s={mode:511,fs:mt};else if(typeof s=="object")s=te({mode:511,fs:mt},s);else if(typeof s=="number")s={mode:s,fs:mt};else if(typeof s=="string")s={mode:parseInt(s,8),fs:mt};else throw new TypeError("invalid options argument");return s.mkdir=s.mkdir||s.fs.mkdir||mt.mkdir,s.mkdirAsync=Hn(s.mkdir),s.stat=s.stat||s.fs.stat||mt.stat,s.statAsync=Hn(s.stat),s.statSync=s.statSync||s.fs.statSync||mt.statSync,s.mkdirSync=s.mkdirSync||s.fs.mkdirSync||mt.mkdirSync,s};Wn.exports=Ya});var $n=p((Mc,Yn)=>{var $a=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:Za,parse:Ka}=require("path"),ja=s=>{if(/\0/.test(s))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:s,code:"ERR_INVALID_ARG_VALUE"});if(s=Za(s),$a==="win32"){let t=/[*|"<>?:]/,{root:e}=Ka(s);if(t.test(s.substr(e.length)))throw Object.assign(new Error("Illegal characters in path."),{path:s,code:"EINVAL"})}return s};Yn.exports=ja});var Xn=p((Bc,Vn)=>{var{dirname:Zn}=require("path"),Kn=(s,t,e=void 0)=>e===t?Promise.resolve():s.statAsync(t).then(i=>i.isDirectory()?e:void 0,i=>i.code==="ENOENT"?Kn(s,Zn(t),t):void 0),jn=(s,t,e=void 0)=>{if(e!==t)try{return s.statSync(t).isDirectory()?e:void 0}catch(i){return i.code==="ENOENT"?jn(s,Zn(t),t):void 0}};Vn.exports={findMade:Kn,findMadeSync:jn}});var zi=p((qc,Qn)=>{var{dirname:Jn}=require("path"),qi=(s,t,e)=>{t.recursive=!1;let i=Jn(s);return i===s?t.mkdirAsync(s,t).catch(r=>{if(r.code!=="EISDIR")throw r}):t.mkdirAsync(s,t).then(()=>e||s,r=>{if(r.code==="ENOENT")return qi(i,t).then(n=>qi(s,t,n));if(r.code!=="EEXIST"&&r.code!=="EROFS")throw r;return t.statAsync(s).then(n=>{if(n.isDirectory())return e;throw r},()=>{throw r})})},Ui=(s,t,e)=>{let i=Jn(s);if(t.recursive=!1,i===s)try{return t.mkdirSync(s,t)}catch(r){if(r.code!=="EISDIR")throw r;return}try{return t.mkdirSync(s,t),e||s}catch(r){if(r.code==="ENOENT")return Ui(s,t,Ui(i,t,e));if(r.code!=="EEXIST"&&r.code!=="EROFS")throw r;try{if(!t.statSync(s).isDirectory())throw r}catch{throw r}}};Qn.exports={mkdirpManual:qi,mkdirpManualSync:Ui}});var so=p((Uc,eo)=>{var{dirname:to}=require("path"),{findMade:Va,findMadeSync:Xa}=Xn(),{mkdirpManual:Ja,mkdirpManualSync:Qa}=zi(),tl=(s,t)=>(t.recursive=!0,to(s)===s?t.mkdirAsync(s,t):Va(t,s).then(i=>t.mkdirAsync(s,t).then(()=>i).catch(r=>{if(r.code==="ENOENT")return Ja(s,t);throw r}))),el=(s,t)=>{if(t.recursive=!0,to(s)===s)return t.mkdirSync(s,t);let i=Xa(t,s);try{return t.mkdirSync(s,t),i}catch(r){if(r.code==="ENOENT")return Qa(s,t);throw r}};eo.exports={mkdirpNative:tl,mkdirpNativeSync:el}});var oo=p((zc,no)=>{var io=require("fs"),sl=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Hi=sl.replace(/^v/,"").split("."),ro=+Hi[0]>10||+Hi[0]==10&&+Hi[1]>=12,il=ro?s=>s.mkdir===io.mkdir:()=>!1,rl=ro?s=>s.mkdirSync===io.mkdirSync:()=>!1;no.exports={useNative:il,useNativeSync:rl}});var fo=p((Hc,uo)=>{var Zt=Gn(),Kt=$n(),{mkdirpNative:ho,mkdirpNativeSync:ao}=so(),{mkdirpManual:lo,mkdirpManualSync:co}=zi(),{useNative:nl,useNativeSync:ol}=oo(),jt=(s,t)=>(s=Kt(s),t=Zt(t),nl(t)?ho(s,t):lo(s,t)),hl=(s,t)=>(s=Kt(s),t=Zt(t),ol(t)?ao(s,t):co(s,t));jt.sync=hl;jt.native=(s,t)=>ho(Kt(s),Zt(t));jt.manual=(s,t)=>lo(Kt(s),Zt(t));jt.nativeSync=(s,t)=>ao(Kt(s),Zt(t));jt.manualSync=(s,t)=>co(Kt(s),Zt(t));uo.exports=jt});var wo=p((Wc,So)=>{"use strict";var q=require("fs"),At=require("path"),al=q.lchown?"lchown":"chown",ll=q.lchownSync?"lchownSync":"chownSync",po=q.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),mo=(s,t,e)=>{try{return q[ll](s,t,e)}catch(i){if(i.code!=="ENOENT")throw i}},cl=(s,t,e)=>{try{return q.chownSync(s,t,e)}catch(i){if(i.code!=="ENOENT")throw i}},ul=po?(s,t,e,i)=>r=>{!r||r.code!=="EISDIR"?i(r):q.chown(s,t,e,i)}:(s,t,e,i)=>i,Wi=po?(s,t,e)=>{try{return mo(s,t,e)}catch(i){if(i.code!=="EISDIR")throw i;cl(s,t,e)}}:(s,t,e)=>mo(s,t,e),fl=process.version,yo=(s,t,e)=>q.readdir(s,t,e),dl=(s,t)=>q.readdirSync(s,t);/^v4\./.test(fl)&&(yo=(s,t,e)=>q.readdir(s,e));var fs=(s,t,e,i)=>{q[al](s,t,e,ul(s,t,e,r=>{i(r&&r.code!=="ENOENT"?r:null)}))},Eo=(s,t,e,i,r)=>{if(typeof t=="string")return q.lstat(At.resolve(s,t),(n,o)=>{if(n)return r(n.code!=="ENOENT"?n:null);o.name=t,Eo(s,o,e,i,r)});if(t.isDirectory())Gi(At.resolve(s,t.name),e,i,n=>{if(n)return r(n);let o=At.resolve(s,t.name);fs(o,e,i,r)});else{let n=At.resolve(s,t.name);fs(n,e,i,r)}},Gi=(s,t,e,i)=>{yo(s,{withFileTypes:!0},(r,n)=>{if(r){if(r.code==="ENOENT")return i();if(r.code!=="ENOTDIR"&&r.code!=="ENOTSUP")return i(r)}if(r||!n.length)return fs(s,t,e,i);let o=n.length,h=null,l=a=>{if(!h){if(a)return i(h=a);if(--o===0)return fs(s,t,e,i)}};n.forEach(a=>Eo(s,a,t,e,l))})},ml=(s,t,e,i)=>{if(typeof t=="string")try{let r=q.lstatSync(At.resolve(s,t));r.name=t,t=r}catch(r){if(r.code==="ENOENT")return;throw r}t.isDirectory()&&go(At.resolve(s,t.name),e,i),Wi(At.resolve(s,t.name),e,i)},go=(s,t,e)=>{let i;try{i=dl(s,{withFileTypes:!0})}catch(r){if(r.code==="ENOENT")return;if(r.code==="ENOTDIR"||r.code==="ENOTSUP")return Wi(s,t,e);throw r}return i&&i.length&&i.forEach(r=>ml(s,r,t,e)),Wi(s,t,e)};So.exports=Gi;Gi.sync=go});var bo=p((Gc,Yi)=>{"use strict";var Ro=fo(),U=require("fs"),ds=require("path"),_o=wo(),W=xt(),ms=class extends Error{constructor(t,e){super("Cannot extract through symbolic link"),this.path=e,this.symlink=t}get name(){return"SylinkError"}},ps=class extends Error{constructor(t,e){super(e+": Cannot cd into '"+t+"'"),this.path=t,this.code=e}get name(){return"CwdError"}},ys=(s,t)=>s.get(W(t)),fe=(s,t,e)=>s.set(W(t),e),pl=(s,t)=>{U.stat(s,(e,i)=>{(e||!i.isDirectory())&&(e=new ps(s,e&&e.code||"ENOTDIR")),t(e)})};Yi.exports=(s,t,e)=>{s=W(s);let i=t.umask,r=t.mode|448,n=(r&i)!==0,o=t.uid,h=t.gid,l=typeof o=="number"&&typeof h=="number"&&(o!==t.processUid||h!==t.processGid),a=t.preserve,c=t.unlink,u=t.cache,f=W(t.cwd),m=(R,O)=>{R?e(R):(fe(u,s,!0),O&&l?_o(O,o,h,_e=>m(_e)):n?U.chmod(s,r,e):e())};if(u&&ys(u,s)===!0)return m();if(s===f)return pl(s,m);if(a)return Ro(s,{mode:r}).then(R=>m(null,R),m);let d=W(ds.relative(f,s)).split("/");Es(f,d,r,u,c,f,null,m)};var Es=(s,t,e,i,r,n,o,h)=>{if(!t.length)return h(null,o);let l=t.shift(),a=W(ds.resolve(s+"/"+l));if(ys(i,a))return Es(a,t,e,i,r,n,o,h);U.mkdir(a,e,Oo(a,t,e,i,r,n,o,h))},Oo=(s,t,e,i,r,n,o,h)=>l=>{l?U.lstat(s,(a,c)=>{if(a)a.path=a.path&&W(a.path),h(a);else if(c.isDirectory())Es(s,t,e,i,r,n,o,h);else if(r)U.unlink(s,u=>{if(u)return h(u);U.mkdir(s,e,Oo(s,t,e,i,r,n,o,h))});else{if(c.isSymbolicLink())return h(new ms(s,s+"/"+t.join("/")));h(l)}}):(o=o||s,Es(s,t,e,i,r,n,o,h))},yl=s=>{let t=!1,e="ENOTDIR";try{t=U.statSync(s).isDirectory()}catch(i){e=i.code}finally{if(!t)throw new ps(s,e)}};Yi.exports.sync=(s,t)=>{s=W(s);let e=t.umask,i=t.mode|448,r=(i&e)!==0,n=t.uid,o=t.gid,h=typeof n=="number"&&typeof o=="number"&&(n!==t.processUid||o!==t.processGid),l=t.preserve,a=t.unlink,c=t.cache,u=W(t.cwd),f=R=>{fe(c,s,!0),R&&h&&_o.sync(R,n,o),r&&U.chmodSync(s,i)};if(c&&ys(c,s)===!0)return f();if(s===u)return yl(u),f();if(l)return f(Ro.sync(s,i));let y=W(ds.relative(u,s)).split("/"),d=null;for(let R=y.shift(),O=u;R&&(O+="/"+R);R=y.shift())if(O=W(ds.resolve(O)),!ys(c,O))try{U.mkdirSync(O,i),d=d||O,fe(c,O,!0)}catch{let Oe=U.lstatSync(O);if(Oe.isDirectory()){fe(c,O,!0);continue}else if(a){U.unlinkSync(O),U.mkdirSync(O,i),d=d||O,fe(c,O,!0);continue}else if(Oe.isSymbolicLink())return new ms(O,O+"/"+y.join("/"))}return f(d)}});var Zi=p((Yc,To)=>{var $i=Object.create(null),{hasOwnProperty:El}=Object.prototype;To.exports=s=>(El.call($i,s)||($i[s]=s.normalize("NFKD")),$i[s])});var Do=p(($c,vo)=>{var No=require("assert"),gl=Zi(),Sl=kt(),{join:Ao}=require("path"),wl=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Rl=wl==="win32";vo.exports=()=>{let s=new Map,t=new Map,e=a=>a.split("/").slice(0,-1).reduce((u,f)=>(u.length&&(f=Ao(u[u.length-1],f)),u.push(f||"/"),u),[]),i=new Set,r=a=>{let c=t.get(a);if(!c)throw new Error("function does not have any path reservations");return{paths:c.paths.map(u=>s.get(u)),dirs:[...c.dirs].map(u=>s.get(u))}},n=a=>{let{paths:c,dirs:u}=r(a);return c.every(f=>f[0]===a)&&u.every(f=>f[0]instanceof Set&&f[0].has(a))},o=a=>i.has(a)||!n(a)?!1:(i.add(a),a(()=>h(a)),!0),h=a=>{if(!i.has(a))return!1;let{paths:c,dirs:u}=t.get(a),f=new Set;return c.forEach(m=>{let y=s.get(m);No.equal(y[0],a),y.length===1?s.delete(m):(y.shift(),typeof y[0]=="function"?f.add(y[0]):y[0].forEach(d=>f.add(d)))}),u.forEach(m=>{let y=s.get(m);No(y[0]instanceof Set),y[0].size===1&&y.length===1?s.delete(m):y[0].size===1?(y.shift(),f.add(y[0])):y[0].delete(a)}),i.delete(a),f.forEach(m=>o(m)),!0};return{check:n,reserve:(a,c)=>{a=Rl?["win32 parallelization disabled"]:a.map(f=>gl(Sl(Ao(f))).toLowerCase());let u=new Set(a.map(f=>e(f)).reduce((f,m)=>f.concat(m)));return t.set(c,{dirs:u,paths:a}),a.forEach(f=>{let m=s.get(f);m?m.push(c):s.set(f,[c])}),u.forEach(f=>{let m=s.get(f);m?m[m.length-1]instanceof Set?m[m.length-1].add(c):m.push(new Set([c])):s.set(f,[new Set([c])])}),o(c)}}}});var Co=p((Zc,Lo)=>{var _l=process.env.__FAKE_PLATFORM__||process.platform,Ol=_l==="win32",bl=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:Tl,O_TRUNC:Nl,O_WRONLY:Al,UV_FS_O_FILEMAP:Io=0}=bl.constants,vl=Ol&&!!Io,Dl=512*1024,Il=Io|Nl|Tl|Al;Lo.exports=vl?s=>s<Dl?Il:"w":()=>"w"});var sr=p((Kc,$o)=>{"use strict";var Ll=require("assert"),Cl=ls(),g=require("fs"),xl=Yt(),it=require("path"),Wo=bo(),xo=si(),Pl=Do(),Fl=ii(),k=xt(),kl=kt(),Ml=Zi(),Po=Symbol("onEntry"),Vi=Symbol("checkFs"),Fo=Symbol("checkFs2"),ws=Symbol("pruneCache"),Xi=Symbol("isReusable"),z=Symbol("makeFs"),Ji=Symbol("file"),Qi=Symbol("directory"),Rs=Symbol("link"),ko=Symbol("symlink"),Mo=Symbol("hardlink"),Bo=Symbol("unsupported"),qo=Symbol("checkPath"),pt=Symbol("mkdir"),v=Symbol("onError"),gs=Symbol("pending"),Uo=Symbol("pend"),Vt=Symbol("unpend"),Ki=Symbol("ended"),ji=Symbol("maybeClose"),tr=Symbol("skip"),de=Symbol("doChown"),me=Symbol("uid"),pe=Symbol("gid"),ye=Symbol("checkedCwd"),Go=require("crypto"),Yo=Co(),Bl=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Ee=Bl==="win32",ql=(s,t)=>{if(!Ee)return g.unlink(s,t);let e=s+".DELETE."+Go.randomBytes(16).toString("hex");g.rename(s,e,i=>{if(i)return t(i);g.unlink(e,t)})},Ul=s=>{if(!Ee)return g.unlinkSync(s);let t=s+".DELETE."+Go.randomBytes(16).toString("hex");g.renameSync(s,t),g.unlinkSync(t)},zo=(s,t,e)=>s===s>>>0?s:t===t>>>0?t:e,Ho=s=>Ml(kl(k(s))).toLowerCase(),zl=(s,t)=>{t=Ho(t);for(let e of s.keys()){let i=Ho(e);(i===t||i.indexOf(t+"/")===0)&&s.delete(e)}},Hl=s=>{for(let t of s.keys())s.delete(t)},ge=class extends Cl{constructor(t){if(t||(t={}),t.ondone=e=>{this[Ki]=!0,this[ji]()},super(t),this[ye]=!1,this.reservations=Pl(),this.transform=typeof t.transform=="function"?t.transform:null,this.writable=!0,this.readable=!1,this[gs]=0,this[Ki]=!1,this.dirCache=t.dirCache||new Map,typeof t.uid=="number"||typeof t.gid=="number"){if(typeof t.uid!="number"||typeof t.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(t.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=t.uid,this.gid=t.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;t.preserveOwner===void 0&&typeof t.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!t.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=t.forceChown===!0,this.win32=!!t.win32||Ee,this.newer=!!t.newer,this.keep=!!t.keep,this.noMtime=!!t.noMtime,this.preservePaths=!!t.preservePaths,this.unlink=!!t.unlink,this.cwd=k(it.resolve(t.cwd||process.cwd())),this.strip=+t.strip||0,this.processUmask=t.noChmod?0:process.umask(),this.umask=typeof t.umask=="number"?t.umask:this.processUmask,this.dmode=t.dmode||511&~this.umask,this.fmode=t.fmode||438&~this.umask,this.on("entry",e=>this[Po](e))}warn(t,e,i={}){return(t==="TAR_BAD_ARCHIVE"||t==="TAR_ABORT")&&(i.recoverable=!1),super.warn(t,e,i)}[ji](){this[Ki]&&this[gs]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[qo](t){if(this.strip){let e=k(t.path).split("/");if(e.length<this.strip)return!1;if(t.path=e.slice(this.strip).join("/"),t.type==="Link"){let i=k(t.linkpath).split("/");if(i.length>=this.strip)t.linkpath=i.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let e=k(t.path),i=e.split("/");if(i.includes("..")||Ee&&/^[a-z]:\.\.$/i.test(i[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:t,path:e}),!1;let[r,n]=Fl(e);r&&(t.path=n,this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:t,path:e}))}if(it.isAbsolute(t.path)?t.absolute=k(it.resolve(t.path)):t.absolute=k(it.resolve(this.cwd,t.path)),!this.preservePaths&&t.absolute.indexOf(this.cwd+"/")!==0&&t.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:t,path:k(t.path),resolvedPath:t.absolute,cwd:this.cwd}),!1;if(t.absolute===this.cwd&&t.type!=="Directory"&&t.type!=="GNUDumpDir")return!1;if(this.win32){let{root:e}=it.win32.parse(t.absolute);t.absolute=e+xo.encode(t.absolute.substr(e.length));let{root:i}=it.win32.parse(t.path);t.path=i+xo.encode(t.path.substr(i.length))}return!0}[Po](t){if(!this[qo](t))return t.resume();switch(Ll.equal(typeof t.absolute,"string"),t.type){case"Directory":case"GNUDumpDir":t.mode&&(t.mode=t.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Vi](t);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[Bo](t)}}[v](t,e){t.name==="CwdError"?this.emit("error",t):(this.warn("TAR_ENTRY_ERROR",t,{entry:e}),this[Vt](),e.resume())}[pt](t,e,i){Wo(k(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:e,noChmod:this.noChmod},i)}[de](t){return this.forceChown||this.preserveOwner&&(typeof t.uid=="number"&&t.uid!==this.processUid||typeof t.gid=="number"&&t.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[me](t){return zo(this.uid,t.uid,this.processUid)}[pe](t){return zo(this.gid,t.gid,this.processGid)}[Ji](t,e){let i=t.mode&4095||this.fmode,r=new xl.WriteStream(t.absolute,{flags:Yo(t.size),mode:i,autoClose:!1});r.on("error",l=>{r.fd&&g.close(r.fd,()=>{}),r.write=()=>!0,this[v](l,t),e()});let n=1,o=l=>{if(l){r.fd&&g.close(r.fd,()=>{}),this[v](l,t),e();return}--n===0&&g.close(r.fd,a=>{a?this[v](a,t):this[Vt](),e()})};r.on("finish",l=>{let a=t.absolute,c=r.fd;if(t.mtime&&!this.noMtime){n++;let u=t.atime||new Date,f=t.mtime;g.futimes(c,u,f,m=>m?g.utimes(a,u,f,y=>o(y&&m)):o())}if(this[de](t)){n++;let u=this[me](t),f=this[pe](t);g.fchown(c,u,f,m=>m?g.chown(a,u,f,y=>o(y&&m)):o())}o()});let h=this.transform&&this.transform(t)||t;h!==t&&(h.on("error",l=>{this[v](l,t),e()}),t.pipe(h)),h.pipe(r)}[Qi](t,e){let i=t.mode&4095||this.dmode;this[pt](t.absolute,i,r=>{if(r){this[v](r,t),e();return}let n=1,o=h=>{--n===0&&(e(),this[Vt](),t.resume())};t.mtime&&!this.noMtime&&(n++,g.utimes(t.absolute,t.atime||new Date,t.mtime,o)),this[de](t)&&(n++,g.chown(t.absolute,this[me](t),this[pe](t),o)),o()})}[Bo](t){t.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${t.type}`,{entry:t}),t.resume()}[ko](t,e){this[Rs](t,t.linkpath,"symlink",e)}[Mo](t,e){let i=k(it.resolve(this.cwd,t.linkpath));this[Rs](t,i,"link",e)}[Uo](){this[gs]++}[Vt](){this[gs]--,this[ji]()}[tr](t){this[Vt](),t.resume()}[Xi](t,e){return t.type==="File"&&!this.unlink&&e.isFile()&&e.nlink<=1&&!Ee}[Vi](t){this[Uo]();let e=[t.path];t.linkpath&&e.push(t.linkpath),this.reservations.reserve(e,i=>this[Fo](t,i))}[ws](t){t.type==="SymbolicLink"?Hl(this.dirCache):t.type!=="Directory"&&zl(this.dirCache,t.absolute)}[Fo](t,e){this[ws](t);let i=h=>{this[ws](t),e(h)},r=()=>{this[pt](this.cwd,this.dmode,h=>{if(h){this[v](h,t),i();return}this[ye]=!0,n()})},n=()=>{if(t.absolute!==this.cwd){let h=k(it.dirname(t.absolute));if(h!==this.cwd)return this[pt](h,this.dmode,l=>{if(l){this[v](l,t),i();return}o()})}o()},o=()=>{g.lstat(t.absolute,(h,l)=>{if(l&&(this.keep||this.newer&&l.mtime>t.mtime)){this[tr](t),i();return}if(h||this[Xi](t,l))return this[z](null,t,i);if(l.isDirectory()){if(t.type==="Directory"){let a=!this.noChmod&&t.mode&&(l.mode&4095)!==t.mode,c=u=>this[z](u,t,i);return a?g.chmod(t.absolute,t.mode,c):c()}if(t.absolute!==this.cwd)return g.rmdir(t.absolute,a=>this[z](a,t,i))}if(t.absolute===this.cwd)return this[z](null,t,i);ql(t.absolute,a=>this[z](a,t,i))})};this[ye]?n():r()}[z](t,e,i){if(t){this[v](t,e),i();return}switch(e.type){case"File":case"OldFile":case"ContiguousFile":return this[Ji](e,i);case"Link":return this[Mo](e,i);case"SymbolicLink":return this[ko](e,i);case"Directory":case"GNUDumpDir":return this[Qi](e,i)}}[Rs](t,e,i,r){g[i](e,t.absolute,n=>{n?this[v](n,t):(this[Vt](),t.resume()),r()})}},Ss=s=>{try{return[null,s()]}catch(t){return[t,null]}},er=class extends ge{[z](t,e){return super[z](t,e,()=>{})}[Vi](t){if(this[ws](t),!this[ye]){let n=this[pt](this.cwd,this.dmode);if(n)return this[v](n,t);this[ye]=!0}if(t.absolute!==this.cwd){let n=k(it.dirname(t.absolute));if(n!==this.cwd){let o=this[pt](n,this.dmode);if(o)return this[v](o,t)}}let[e,i]=Ss(()=>g.lstatSync(t.absolute));if(i&&(this.keep||this.newer&&i.mtime>t.mtime))return this[tr](t);if(e||this[Xi](t,i))return this[z](null,t);if(i.isDirectory()){if(t.type==="Directory"){let o=!this.noChmod&&t.mode&&(i.mode&4095)!==t.mode,[h]=o?Ss(()=>{g.chmodSync(t.absolute,t.mode)}):[];return this[z](h,t)}let[n]=Ss(()=>g.rmdirSync(t.absolute));this[z](n,t)}let[r]=t.absolute===this.cwd?[]:Ss(()=>Ul(t.absolute));this[z](r,t)}[Ji](t,e){let i=t.mode&4095||this.fmode,r=h=>{let l;try{g.closeSync(n)}catch(a){l=a}(h||l)&&this[v](h||l,t),e()},n;try{n=g.openSync(t.absolute,Yo(t.size),i)}catch(h){return r(h)}let o=this.transform&&this.transform(t)||t;o!==t&&(o.on("error",h=>this[v](h,t)),t.pipe(o)),o.on("data",h=>{try{g.writeSync(n,h,0,h.length)}catch(l){r(l)}}),o.on("end",h=>{let l=null;if(t.mtime&&!this.noMtime){let a=t.atime||new Date,c=t.mtime;try{g.futimesSync(n,a,c)}catch(u){try{g.utimesSync(t.absolute,a,c)}catch{l=u}}}if(this[de](t)){let a=this[me](t),c=this[pe](t);try{g.fchownSync(n,a,c)}catch(u){try{g.chownSync(t.absolute,a,c)}catch{l=l||u}}}r(l)})}[Qi](t,e){let i=t.mode&4095||this.dmode,r=this[pt](t.absolute,i);if(r){this[v](r,t),e();return}if(t.mtime&&!this.noMtime)try{g.utimesSync(t.absolute,t.atime||new Date,t.mtime)}catch{}if(this[de](t))try{g.chownSync(t.absolute,this[me](t),this[pe](t))}catch{}e(),t.resume()}[pt](t,e){try{return Wo.sync(k(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:e})}catch(i){return i}}[Rs](t,e,i,r){try{g[i+"Sync"](e,t.absolute),r(),t.resume()}catch(n){return this[v](n,t)}}};ge.Sync=er;$o.exports=ge});var Xo=p((jc,Vo)=>{"use strict";var Wl=Dt(),_s=sr(),Ko=require("fs"),jo=Yt(),Zo=require("path"),ir=kt();Vo.exports=(s,t,e)=>{typeof s=="function"?(e=s,t=null,s={}):Array.isArray(s)&&(t=s,s={}),typeof t=="function"&&(e=t,t=null),t?t=Array.from(t):t=[];let i=Wl(s);if(i.sync&&typeof e=="function")throw new TypeError("callback not supported for sync tar functions");if(!i.file&&typeof e=="function")throw new TypeError("callback only supported with file option");return t.length&&Gl(i,t),i.file&&i.sync?Yl(i):i.file?$l(i,e):i.sync?Zl(i):Kl(i)};var Gl=(s,t)=>{let e=new Map(t.map(n=>[ir(n),!0])),i=s.filter,r=(n,o)=>{let h=o||Zo.parse(n).root||".",l=n===h?!1:e.has(n)?e.get(n):r(Zo.dirname(n),h);return e.set(n,l),l};s.filter=i?(n,o)=>i(n,o)&&r(ir(n)):n=>r(ir(n))},Yl=s=>{let t=new _s.Sync(s),e=s.file,i=Ko.statSync(e),r=s.maxReadSize||16*1024*1024;new jo.ReadStreamSync(e,{readSize:r,size:i.size}).pipe(t)},$l=(s,t)=>{let e=new _s(s),i=s.maxReadSize||16*1024*1024,r=s.file,n=new Promise((o,h)=>{e.on("error",h),e.on("close",o),Ko.stat(r,(l,a)=>{if(l)h(l);else{let c=new jo.ReadStream(r,{readSize:i,size:a.size});c.on("error",h),c.pipe(e)}})});return t?n.then(t,t):n},Zl=s=>new _s.Sync(s),Kl=s=>new _s(s)});var Jo=p(b=>{"use strict";b.c=b.create=Cn();b.r=b.replace=Bi();b.t=b.list=cs();b.u=b.update=zn();b.x=b.extract=Xo();b.Pack=je();b.Unpack=sr();b.Parse=ls();b.ReadEntry=Ce();b.WriteEntry=di();b.Header=Ft();b.Pax=Pe();b.types=js()});var Qt=require("fs"),rh=require("fs-extra"),V=require("path"),nh=lr(Jo());var Os=lr(require("chalk")),th=require("child_process"),jl=require("crypto"),Se=require("fs"),Xt=require("path");async function eh(s){let t=await vt(s),e=Vl(t);return(await Promise.all(e.map(async r=>Xl(r)))).filter(r=>!!r)}function Vl(s){return[...Object.keys(s.dependencies??{}),...Object.keys(s.devDependencies??{})]}async function Xl(s){try{let t=process.env.CAPACITOR_ROOT_DIR,e=Jl(t,s,"package.json");e||console.error(`
Unable to find ${Os.default.bold(`node_modules/${s}`)}.
Are you sure ${Os.default.bold(s)} is installed?`);let i=(0,Xt.dirname)(e),r=await vt(e);if(!r)return null;if(r.capacitor)return{id:s,name:Ql(s),version:r.version,rootPath:i,repository:r.repository,manifest:r.capacitor}}catch{}return null}function Jl(s,...t){try{return require.resolve(t.join("/"),{paths:[s]})}catch{return null}}function bs(s){console.log(Os.default.red(`Error: ${s}`))}function vt(s){let t=(0,Se.readFileSync)(s,"utf8");return JSON.parse(t)}function Jt(s){return new Promise((t,e)=>{(0,th.exec)(s,(i,r,n)=>{i?e(r+n):t(r)})})}function Ql(s){return s=s.replace(/\//g,"_").replace(/-/g,"_").replace(/@/g,"").replace(/_\w/g,t=>t[1].toUpperCase()),s.charAt(0).toUpperCase()+s.slice(1)}function sh(s,t){return(0,Se.writeFileSync)(s,JSON.stringify(t,null,"  ")+`
`)}function ih(s){var t,e;return(e=(t=s.manifest)==null?void 0:t.electron)!=null&&e.src?(0,Xt.join)(s.rootPath,s.manifest.electron.src,"dist/plugin.js"):null}async function we(s,t){let e=require("ora"),i=require("chalk"),r=e(s).start(`${s}`);try{r=r.start(`${s}: ${i.dim("start \u{1F680}")}`);let n=process.hrtime(),o=await t(l=>{r=r.info(),r=r.start(`${s}: ${i.dim(l)}`)});r=r.info();let h=process.hrtime(n);return r=r.succeed(`${s}: ${i.dim("completed in "+tc(h))}`),o}catch(n){throw r=r.fail(`${s}: ${n.message?n.message:""}`),r=r.stop(),n}}var Qo=["s","ms","\u03BCp"];function tc(s){let t=s[0]+s[1]/1e9,e=0;for(;e<Qo.length-1&&!(t>=1);e++,t*=1e3);return t.toFixed(2)+Qo[e]}async function oh(s){let t=process.env.CAPACITOR_ROOT_DIR,e=(0,V.join)(t,"node_modules","@capacitor-community","electron","template.tar.gz"),i=(0,V.join)(t,"electron"),r,n,o={ts:(0,V.join)(t,"capacitor.config.ts"),js:(0,V.join)(t,"capacitor.config.js"),json:(0,V.join)(t,"capacitor.config.json")};(0,Qt.existsSync)(o.ts)?(r=o.ts,n="capacitor.config.ts"):(0,Qt.existsSync)(o.js)?(r=o.js,n="capacitor.config.js"):(r=o.json,n="capacitor.config.json");let h=JSON.parse(process.env.CAPACITOR_CONFIG);if((0,Qt.existsSync)(i))throw new Error("Electron platform already exists.");{(0,Qt.mkdirSync)(i),s("extracting template"),await(0,nh.extract)({file:e,cwd:i}),s("copying capacitor config file"),(0,rh.copySync)(r,(0,V.join)(i,n));let l=h.appName,a=vt((0,V.join)(i,"package.json")),c=vt((0,V.join)(t,"package.json"));a.name=l,c.repository&&(a.repository=c.repository),s("setting up electron project"),sh((0,V.join)(i,"package.json"),a),s("installing npm modules"),await Jt(`cd ${i} && npm i`)}}var hh=require("fs"),Ts=require("fs-extra"),ah=require("path");async function lh(s){let t=process.env.CAPACITOR_ROOT_DIR,e=process.env.CAPACITOR_WEB_DIR,i=(0,ah.join)(t,"electron","app");try{(0,hh.existsSync)(i)&&(0,Ts.removeSync)(i),s(`Copying ${e} into ${i}`),(0,Ts.copySync)(e,i)}catch(r){throw bs(r.message),r}}var ch=require("path");async function uh(s){let t=process.env.CAPACITOR_ROOT_DIR,e=(0,ch.join)(t,"electron");try{s("builing electron app"),s("running electron app"),await Jt(`cd ${e} && npm run electron:start-live`)}catch(i){throw bs(i.message),i}}var Re=require("fs"),fh=require("fs-extra"),T=require("path");async function dh(s){let t=process.env.CAPACITOR_ROOT_DIR,e=(0,T.join)(t,"package.json"),i=await vt(e),r=i.dependencies?i.dependencies:{},n=i.devDependencies?i.devDependencies:{},o=te(te({},r),n);s("searching for plugins");let l=(await eh(e)).map(d=>{let R=(()=>{if(o[d==null?void 0:d.id]){if(o[d.id].startsWith("file:")){let Ns=o[d==null?void 0:d.id].replace(/^file:/,""),ph=(0,T.isAbsolute)(Ns)?Ns:(0,T.resolve)(t,Ns);return(0,T.relative)((0,T.join)(t,"electron"),ph)}else if(o[d.id].match(/^(https?|git):/))return o[d.id]}return`${d==null?void 0:d.id}@${d==null?void 0:d.version}`})(),O=ih(d),_e=d==null?void 0:d.name,Oe=d==null?void 0:d.id;return{name:_e,path:O,installStr:R,id:Oe}}).filter(d=>d.path!==null),a="";s("generating electron-plugins.js");let c=(0,T.join)(t,"electron","src","rt"),u=`/* eslint-disable @typescript-eslint/no-var-requires */
`;for(let d of l){a+=` ${d.installStr}`;let R=(0,T.join)((0,T.relative)(c,t),"node_modules",d.id,"electron","dist/plugin.js");u+=`const ${d.name} = require('${R.replace(/\\/g,"\\\\")}');
`}u+=`
module.exports = {
`;for(let d of l)u+=`  ${d.name},
`;u+="}",(0,Re.writeFileSync)((0,T.join)(c,"electron-plugins.js"),u,{encoding:"utf-8"});let f,m,y={ts:(0,T.join)(t,"capacitor.config.ts"),js:(0,T.join)(t,"capacitor.config.js"),json:(0,T.join)(t,"capacitor.config.json")};(0,Re.existsSync)(y.ts)?(f=y.ts,m="capacitor.config.ts"):(0,Re.existsSync)(y.js)?(f=y.js,m="capacitor.config.js"):(f=y.json,m="capacitor.config.json"),(0,fh.copySync)(f,(0,T.join)(t,"electron",m),{overwrite:!0}),a.length>0&&(s("installing electron plugin files"),console.log(`

Will install:${a}

`),await Jt(`cd ${(0,T.join)(t,"electron")} && npm i${a}`))}async function rr(){return await we("Updating Electron plugins",async s=>await dh(s))}async function ec(){return await we("Adding Electron platform",async s=>oh(s))}async function nr(){return await we("Copying Web App to Electron platform",async s=>await lh(s))}async function mh(){return await we("Opening Electron platform",async s=>await uh(s))}(async()=>{let s=process.argv[2]?process.argv[2]:null;if(s!==null)switch(s){case"add":await ec(),await nr(),await rr();break;case"copy":await nr();break;case"run":await mh();break;case"open":await mh();break;case"update":await rr();break;case"sync":await nr(),await rr();break;default:throw new Error(`Invalid script chosen: ${s}`)}else throw new Error(`Invalid script chosen: ${s}`)})();
