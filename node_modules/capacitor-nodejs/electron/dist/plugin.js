'use strict';

var require$$1 = require('electron');
var require$$1$1 = require('events');
var require$$2 = require('fs');
var require$$3 = require('path');
var require$$0 = require('child_process');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var require$$1__default = /*#__PURE__*/_interopDefaultLegacy(require$$1);
var require$$1__default$1 = /*#__PURE__*/_interopDefaultLegacy(require$$1$1);
var require$$2__default = /*#__PURE__*/_interopDefaultLegacy(require$$2);
var require$$3__default = /*#__PURE__*/_interopDefaultLegacy(require$$3);
var require$$0__default = /*#__PURE__*/_interopDefaultLegacy(require$$0);

function getDefaultExportFromCjs (x) {
	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
}

var src = {};

var implementation = {};

var utils$1 = {};

Object.defineProperty(utils$1, "__esModule", { value: true });
utils$1.ChannelMessageCodec = void 0;
class ChannelMessageCodec {
    static serialize(payload) {
        const eventName = payload.eventName;
        const args = payload.args;
        const eventMessage = JSON.stringify(args);
        const data = {
            eventName,
            eventMessage
        };
        const channelMessage = JSON.stringify(data);
        return channelMessage;
    }
    static deserialize(channelMessage) {
        const data = JSON.parse(channelMessage);
        const eventName = data.eventName;
        const eventMessage = data.eventMessage;
        let args = [];
        if (eventMessage) {
            args = JSON.parse(eventMessage);
        }
        const payload = {
            eventName,
            args
        };
        return payload;
    }
}
utils$1.ChannelMessageCodec = ChannelMessageCodec;

var utils = {};

Object.defineProperty(utils, "__esModule", { value: true });
utils.joinEnv = void 0;
const path_1 = require$$3__default["default"];
function joinEnv(...variables) {
    let envVariable = '';
    for (let index = 0; index < variables.length; index++) {
        const variable = variables[index];
        if (!variable)
            continue;
        envVariable += variable;
        if (index < variables.length - 1) {
            envVariable += path_1.delimiter;
        }
    }
    return envVariable;
}
utils.joinEnv = joinEnv;

var hasRequiredImplementation;

function requireImplementation () {
	if (hasRequiredImplementation) return implementation;
	hasRequiredImplementation = 1;
	Object.defineProperty(implementation, "__esModule", { value: true });
	implementation.CapacitorNodeJSImplementation = void 0;
	const child_process_1 = require$$0__default["default"];
	const electron_1 = require$$1__default["default"];
	const fs_1 = require$$2__default["default"];
	const path_1 = require$$3__default["default"];
	const utils_1 = utils$1;
	const index_1 = requireSrc();
	const utils_2 = utils;
	class EngineStatus {
	    constructor() {
	        this.whenEngineReadyListeners = [];
	        this.isEngineStarted = false;
	        this.isEngineReady = false;
	    }
	    setStarted() {
	        this.isEngineStarted = true;
	    }
	    isStarted() {
	        return this.isEngineStarted;
	    }
	    setReady() {
	        this.isEngineReady = true;
	        while (this.whenEngineReadyListeners.length > 0) {
	            const whenEngineReadyListener = this.whenEngineReadyListeners[0];
	            whenEngineReadyListener();
	            this.whenEngineReadyListeners.splice(0, 1);
	        }
	    }
	    isReady() {
	        return this.isEngineReady;
	    }
	    whenReady(callback) {
	        if (this.isReady()) {
	            callback();
	        }
	        else {
	            this.whenEngineReadyListeners.push(callback);
	        }
	    }
	}
	class CapacitorNodeJSImplementation {
	    constructor(eventNotifier) {
	        this.engineStatus = new EngineStatus();
	        this.eventNotifier = eventNotifier;
	    }
	    async startEngine(projectDir, mainFile, args, env) {
	        if (this.engineStatus.isStarted()) {
	            throw new Error('The Node.js engine has already been started.');
	        }
	        this.engineStatus.setStarted();
	        const projectPath = path_1.join(electron_1.app.getAppPath(), 'app', projectDir);
	        const modulesPath = path_1.join(__dirname, '..', 'assets', 'builtin_modules');
	        const dataPath = electron_1.app.getPath('userData');
	        if (!fs_1.existsSync(projectPath)) {
	            throw new Error('Unable to access the Node.js project. (No such directory)');
	        }
	        const projectPackageJsonPath = path_1.join(projectPath, 'package.json');
	        let projectMainFile = 'index.js';
	        if (mainFile) {
	            projectMainFile = mainFile;
	        }
	        else if (fs_1.existsSync(projectPackageJsonPath)) {
	            try {
	                const projectPackageJson = await Promise.resolve().then(() => require(projectPackageJsonPath));
	                const projectPackageJsonMainFile = projectPackageJson.main;
	                if (projectPackageJsonMainFile) {
	                    projectMainFile = projectPackageJson.main;
	                }
	            }
	            catch (_a) {
	                throw new Error('Failed to read the package.json file of the Node.js project.');
	            }
	        }
	        const projectMainPath = path_1.join(projectPath, projectMainFile);
	        if (!fs_1.existsSync(projectMainPath)) {
	            throw new Error('Unable to access main script of the Node.js project. (No such file)');
	        }
	        const modulesPaths = utils_2.joinEnv(projectPath, modulesPath);
	        const nodeEnv = Object.assign({ NODE_PATH: modulesPaths, DATADIR: dataPath }, env);
	        const nodeOptions = {
	            env: nodeEnv,
	            serialization: 'json'
	        };
	        this.nodeProcess = child_process_1.fork(projectMainPath, args, nodeOptions);
	        this.nodeProcess.on('message', (args) => {
	            this.receiveMessage(args.channelName, args.channelMessage);
	        });
	    }
	    resolveWhenReady() {
	        return new Promise((resolve, reject) => {
	            if (!this.engineStatus.isStarted()) {
	                reject('The Node.js engine has not been started yet.');
	            }
	            this.engineStatus.whenReady(() => resolve());
	        });
	    }
	    sendMessage(payload) {
	        if (!this.engineStatus.isStarted()) {
	            throw new Error('The Node.js engine has not been started yet.');
	        }
	        if (!this.engineStatus.isReady()) {
	            throw new Error('The Node.js engine is not ready yet.');
	        }
	        if (this.nodeProcess === undefined || !payload.eventName || !payload.args)
	            return;
	        const channelName = index_1.CapacitorNodeJS.CHANNEL_NAME_EVENTS;
	        const channelMessage = utils_1.ChannelMessageCodec.serialize(payload);
	        const channelData = {
	            channelName,
	            channelMessage
	        };
	        this.nodeProcess.send(channelData);
	    }
	    receiveMessage(channelName, channelMessage) {
	        const payload = utils_1.ChannelMessageCodec.deserialize(channelMessage);
	        const eventName = payload.eventName;
	        const args = payload.args;
	        if (channelName === index_1.CapacitorNodeJS.CHANNEL_NAME_APP && eventName === 'ready') {
	            this.engineStatus.setReady();
	        }
	        else if (channelName === index_1.CapacitorNodeJS.CHANNEL_NAME_EVENTS) {
	            this.eventNotifier.channelReceive(eventName, args);
	        }
	    }
	}
	implementation.CapacitorNodeJSImplementation = CapacitorNodeJSImplementation;
	
	return implementation;
}

var hasRequiredSrc;

function requireSrc () {
	if (hasRequiredSrc) return src;
	hasRequiredSrc = 1;
	Object.defineProperty(src, "__esModule", { value: true });
	src.CapacitorNodeJS = void 0;
	const electron_1 = require$$1__default["default"];
	const events_1 = require$$1__default$1["default"];
	const fs_1 = require$$2__default["default"];
	const path_1 = require$$3__default["default"];
	const implementation_1 = requireImplementation();
	class PluginSettings {
	    constructor() {
	        this.nodeDir = 'nodejs';
	        this.startMode = 'auto';
	    }
	}
	class CapacitorNodeJS extends events_1.EventEmitter {
	    constructor( /*config?: Record<string, any>*/) {
	        super();
	        // removeAllListeners() function is missing (https://github.com/capacitor-community/electron/pull/185)
	        //---------------------------------------------------------------------------------------
	        //#endregion
	        //#region PluginEvents
	        //---------------------------------------------------------------------------------------
	        this.PluginEventNotifier = {
	            // Bridge -------------------------------------------------------------------------------
	            channelReceive: (eventName, payloadArray) => {
	                this.notifyChannelListeners(eventName, payloadArray);
	            }
	        };
	        //this.config = config;
	        this.implementation = new implementation_1.CapacitorNodeJSImplementation(this.PluginEventNotifier);
	        this.readPluginSettings().then(pluginSettings => {
	            if (pluginSettings.startMode === 'auto') {
	                this.implementation.startEngine(pluginSettings.nodeDir);
	            }
	        });
	    }
	    async readPluginSettings() {
	        var _a;
	        //!-------------------------- workaround ---------------------------
	        // the configuration exposed by the capacitor-community/electron platform
	        // is always empty for some reason
	        const configPathBase = path_1.join(electron_1.app.getAppPath(), 'capacitor.config.');
	        const configPathExt = fs_1.existsSync(configPathBase + 'json') ? 'json' :
	            fs_1.existsSync(configPathBase + 'js') ? 'js' :
	                fs_1.existsSync(configPathBase + 'ts') ? 'ts' : undefined;
	        const configPath = configPathBase + configPathExt;
	        const configFile = await require(configPath);
	        const capacitorConfig = configFile.default || configFile;
	        const config = (_a = capacitorConfig === null || capacitorConfig === void 0 ? void 0 : capacitorConfig.plugins) === null || _a === void 0 ? void 0 : _a.CapacitorNodeJS;
	        //!-----------------------------------------------------------------
	        const settings = new PluginSettings();
	        settings.nodeDir = (config === null || config === void 0 ? void 0 : config.nodeDir) || settings.nodeDir;
	        settings.startMode = (config === null || config === void 0 ? void 0 : config.startMode) || settings.startMode;
	        return settings;
	    }
	    //#region PluginMethods
	    //---------------------------------------------------------------------------------------
	    async start(args) {
	        var _a;
	        const pluginSettings = await this.readPluginSettings();
	        if (pluginSettings.startMode !== 'manual') {
	            throw new Error('Manual startup of the Node.js engine is not enabled.');
	        }
	        const projectDir = (_a = args === null || args === void 0 ? void 0 : args.nodeDir) !== null && _a !== void 0 ? _a : pluginSettings.nodeDir;
	        const nodeMain = args === null || args === void 0 ? void 0 : args.script;
	        const nodeArgs = args === null || args === void 0 ? void 0 : args.args;
	        const nodeEnv = args === null || args === void 0 ? void 0 : args.env;
	        this.implementation.startEngine(projectDir, nodeMain, nodeArgs, nodeEnv);
	    }
	    async send(args) {
	        const eventName = args.eventName;
	        if (eventName === undefined || eventName === '') {
	            throw new Error("Required parameter 'eventName' was not specified");
	        }
	        if (args.args === undefined) {
	            args.args = [];
	        }
	        this.implementation.sendMessage(args);
	    }
	    async whenReady() {
	        return this.implementation.resolveWhenReady();
	    }
	    //---------------------------------------------------------------------------------------
	    //#endregion
	    //#region PluginListeners
	    //---------------------------------------------------------------------------------------
	    notifyChannelListeners(eventName, payloadArray) {
	        const args = { args: payloadArray };
	        this.emit(eventName, args);
	    }
	}
	src.CapacitorNodeJS = CapacitorNodeJS;
	CapacitorNodeJS.CHANNEL_NAME_APP = 'APP_CHANNEL';
	CapacitorNodeJS.CHANNEL_NAME_EVENTS = 'EVENT_CHANNEL';
	
	return src;
}

var srcExports = requireSrc();
var index = /*@__PURE__*/getDefaultExportFromCjs(srcExports);

module.exports = index;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx1Z2luLmpzIiwic291cmNlcyI6WyIuLi9idWlsZC9icmlkZ2Uvc3JjL3V0aWxzLmpzIiwiLi4vYnVpbGQvZWxlY3Ryb24vc3JjL3V0aWxzLmpzIiwiLi4vYnVpbGQvZWxlY3Ryb24vc3JjL2ltcGxlbWVudGF0aW9uLmpzIiwiLi4vYnVpbGQvZWxlY3Ryb24vc3JjL2luZGV4LmpzIiwiLi4vYnVpbGQvZWxlY3Ryb24vc3JjL2luZGV4LmpzP2NvbW1vbmpzLWVudHJ5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5DaGFubmVsTWVzc2FnZUNvZGVjID0gdm9pZCAwO1xuY2xhc3MgQ2hhbm5lbE1lc3NhZ2VDb2RlYyB7XG4gICAgc3RhdGljIHNlcmlhbGl6ZShwYXlsb2FkKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IHBheWxvYWQuZXZlbnROYW1lO1xuICAgICAgICBjb25zdCBhcmdzID0gcGF5bG9hZC5hcmdzO1xuICAgICAgICBjb25zdCBldmVudE1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShhcmdzKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGV2ZW50TWVzc2FnZVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjaGFubmVsTWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICByZXR1cm4gY2hhbm5lbE1lc3NhZ2U7XG4gICAgfVxuICAgIHN0YXRpYyBkZXNlcmlhbGl6ZShjaGFubmVsTWVzc2FnZSkge1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShjaGFubmVsTWVzc2FnZSk7XG4gICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IGRhdGEuZXZlbnROYW1lO1xuICAgICAgICBjb25zdCBldmVudE1lc3NhZ2UgPSBkYXRhLmV2ZW50TWVzc2FnZTtcbiAgICAgICAgbGV0IGFyZ3MgPSBbXTtcbiAgICAgICAgaWYgKGV2ZW50TWVzc2FnZSkge1xuICAgICAgICAgICAgYXJncyA9IEpTT04ucGFyc2UoZXZlbnRNZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICAgICAgYXJnc1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9XG59XG5leHBvcnRzLkNoYW5uZWxNZXNzYWdlQ29kZWMgPSBDaGFubmVsTWVzc2FnZUNvZGVjO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmpvaW5FbnYgPSB2b2lkIDA7XG5jb25zdCBwYXRoXzEgPSByZXF1aXJlKFwicGF0aFwiKTtcbmZ1bmN0aW9uIGpvaW5FbnYoLi4udmFyaWFibGVzKSB7XG4gICAgbGV0IGVudlZhcmlhYmxlID0gJyc7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHZhcmlhYmxlcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgY29uc3QgdmFyaWFibGUgPSB2YXJpYWJsZXNbaW5kZXhdO1xuICAgICAgICBpZiAoIXZhcmlhYmxlKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGVudlZhcmlhYmxlICs9IHZhcmlhYmxlO1xuICAgICAgICBpZiAoaW5kZXggPCB2YXJpYWJsZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgZW52VmFyaWFibGUgKz0gcGF0aF8xLmRlbGltaXRlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZW52VmFyaWFibGU7XG59XG5leHBvcnRzLmpvaW5FbnYgPSBqb2luRW52O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNhcGFjaXRvck5vZGVKU0ltcGxlbWVudGF0aW9uID0gdm9pZCAwO1xuY29uc3QgY2hpbGRfcHJvY2Vzc18xID0gcmVxdWlyZShcImNoaWxkX3Byb2Nlc3NcIik7XG5jb25zdCBlbGVjdHJvbl8xID0gcmVxdWlyZShcImVsZWN0cm9uXCIpO1xuY29uc3QgZnNfMSA9IHJlcXVpcmUoXCJmc1wiKTtcbmNvbnN0IHBhdGhfMSA9IHJlcXVpcmUoXCJwYXRoXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9icmlkZ2Uvc3JjL3V0aWxzXCIpO1xuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuL2luZGV4XCIpO1xuY29uc3QgdXRpbHNfMiA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuY2xhc3MgRW5naW5lU3RhdHVzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy53aGVuRW5naW5lUmVhZHlMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5pc0VuZ2luZVN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc0VuZ2luZVJlYWR5ID0gZmFsc2U7XG4gICAgfVxuICAgIHNldFN0YXJ0ZWQoKSB7XG4gICAgICAgIHRoaXMuaXNFbmdpbmVTdGFydGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgaXNTdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0VuZ2luZVN0YXJ0ZWQ7XG4gICAgfVxuICAgIHNldFJlYWR5KCkge1xuICAgICAgICB0aGlzLmlzRW5naW5lUmVhZHkgPSB0cnVlO1xuICAgICAgICB3aGlsZSAodGhpcy53aGVuRW5naW5lUmVhZHlMaXN0ZW5lcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgd2hlbkVuZ2luZVJlYWR5TGlzdGVuZXIgPSB0aGlzLndoZW5FbmdpbmVSZWFkeUxpc3RlbmVyc1swXTtcbiAgICAgICAgICAgIHdoZW5FbmdpbmVSZWFkeUxpc3RlbmVyKCk7XG4gICAgICAgICAgICB0aGlzLndoZW5FbmdpbmVSZWFkeUxpc3RlbmVycy5zcGxpY2UoMCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNSZWFkeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNFbmdpbmVSZWFkeTtcbiAgICB9XG4gICAgd2hlblJlYWR5KGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVhZHkoKSkge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud2hlbkVuZ2luZVJlYWR5TGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgQ2FwYWNpdG9yTm9kZUpTSW1wbGVtZW50YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50Tm90aWZpZXIpIHtcbiAgICAgICAgdGhpcy5lbmdpbmVTdGF0dXMgPSBuZXcgRW5naW5lU3RhdHVzKCk7XG4gICAgICAgIHRoaXMuZXZlbnROb3RpZmllciA9IGV2ZW50Tm90aWZpZXI7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0RW5naW5lKHByb2plY3REaXIsIG1haW5GaWxlLCBhcmdzLCBlbnYpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5naW5lU3RhdHVzLmlzU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBOb2RlLmpzIGVuZ2luZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmdpbmVTdGF0dXMuc2V0U3RhcnRlZCgpO1xuICAgICAgICBjb25zdCBwcm9qZWN0UGF0aCA9IHBhdGhfMS5qb2luKGVsZWN0cm9uXzEuYXBwLmdldEFwcFBhdGgoKSwgJ2FwcCcsIHByb2plY3REaXIpO1xuICAgICAgICBjb25zdCBtb2R1bGVzUGF0aCA9IHBhdGhfMS5qb2luKF9fZGlybmFtZSwgJy4uJywgJ2Fzc2V0cycsICdidWlsdGluX21vZHVsZXMnKTtcbiAgICAgICAgY29uc3QgZGF0YVBhdGggPSBlbGVjdHJvbl8xLmFwcC5nZXRQYXRoKCd1c2VyRGF0YScpO1xuICAgICAgICBpZiAoIWZzXzEuZXhpc3RzU3luYyhwcm9qZWN0UGF0aCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGFjY2VzcyB0aGUgTm9kZS5qcyBwcm9qZWN0LiAoTm8gc3VjaCBkaXJlY3RvcnkpJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvamVjdFBhY2thZ2VKc29uUGF0aCA9IHBhdGhfMS5qb2luKHByb2plY3RQYXRoLCAncGFja2FnZS5qc29uJyk7XG4gICAgICAgIGxldCBwcm9qZWN0TWFpbkZpbGUgPSAnaW5kZXguanMnO1xuICAgICAgICBpZiAobWFpbkZpbGUpIHtcbiAgICAgICAgICAgIHByb2plY3RNYWluRmlsZSA9IG1haW5GaWxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZzXzEuZXhpc3RzU3luYyhwcm9qZWN0UGFja2FnZUpzb25QYXRoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9qZWN0UGFja2FnZUpzb24gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHJlcXVpcmUocHJvamVjdFBhY2thZ2VKc29uUGF0aCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3RQYWNrYWdlSnNvbk1haW5GaWxlID0gcHJvamVjdFBhY2thZ2VKc29uLm1haW47XG4gICAgICAgICAgICAgICAgaWYgKHByb2plY3RQYWNrYWdlSnNvbk1haW5GaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RNYWluRmlsZSA9IHByb2plY3RQYWNrYWdlSnNvbi5tYWluO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHJlYWQgdGhlIHBhY2thZ2UuanNvbiBmaWxlIG9mIHRoZSBOb2RlLmpzIHByb2plY3QuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvamVjdE1haW5QYXRoID0gcGF0aF8xLmpvaW4ocHJvamVjdFBhdGgsIHByb2plY3RNYWluRmlsZSk7XG4gICAgICAgIGlmICghZnNfMS5leGlzdHNTeW5jKHByb2plY3RNYWluUGF0aCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGFjY2VzcyBtYWluIHNjcmlwdCBvZiB0aGUgTm9kZS5qcyBwcm9qZWN0LiAoTm8gc3VjaCBmaWxlKScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZHVsZXNQYXRocyA9IHV0aWxzXzIuam9pbkVudihwcm9qZWN0UGF0aCwgbW9kdWxlc1BhdGgpO1xuICAgICAgICBjb25zdCBub2RlRW52ID0gT2JqZWN0LmFzc2lnbih7IE5PREVfUEFUSDogbW9kdWxlc1BhdGhzLCBEQVRBRElSOiBkYXRhUGF0aCB9LCBlbnYpO1xuICAgICAgICBjb25zdCBub2RlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGVudjogbm9kZUVudixcbiAgICAgICAgICAgIHNlcmlhbGl6YXRpb246ICdqc29uJ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm5vZGVQcm9jZXNzID0gY2hpbGRfcHJvY2Vzc18xLmZvcmsocHJvamVjdE1haW5QYXRoLCBhcmdzLCBub2RlT3B0aW9ucyk7XG4gICAgICAgIHRoaXMubm9kZVByb2Nlc3Mub24oJ21lc3NhZ2UnLCAoYXJncykgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWNlaXZlTWVzc2FnZShhcmdzLmNoYW5uZWxOYW1lLCBhcmdzLmNoYW5uZWxNZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlc29sdmVXaGVuUmVhZHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5naW5lU3RhdHVzLmlzU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCdUaGUgTm9kZS5qcyBlbmdpbmUgaGFzIG5vdCBiZWVuIHN0YXJ0ZWQgeWV0LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbmdpbmVTdGF0dXMud2hlblJlYWR5KCgpID0+IHJlc29sdmUoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kTWVzc2FnZShwYXlsb2FkKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmdpbmVTdGF0dXMuaXNTdGFydGVkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIE5vZGUuanMgZW5naW5lIGhhcyBub3QgYmVlbiBzdGFydGVkIHlldC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZW5naW5lU3RhdHVzLmlzUmVhZHkoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgTm9kZS5qcyBlbmdpbmUgaXMgbm90IHJlYWR5IHlldC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ub2RlUHJvY2VzcyA9PT0gdW5kZWZpbmVkIHx8ICFwYXlsb2FkLmV2ZW50TmFtZSB8fCAhcGF5bG9hZC5hcmdzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjaGFubmVsTmFtZSA9IGluZGV4XzEuQ2FwYWNpdG9yTm9kZUpTLkNIQU5ORUxfTkFNRV9FVkVOVFM7XG4gICAgICAgIGNvbnN0IGNoYW5uZWxNZXNzYWdlID0gdXRpbHNfMS5DaGFubmVsTWVzc2FnZUNvZGVjLnNlcmlhbGl6ZShwYXlsb2FkKTtcbiAgICAgICAgY29uc3QgY2hhbm5lbERhdGEgPSB7XG4gICAgICAgICAgICBjaGFubmVsTmFtZSxcbiAgICAgICAgICAgIGNoYW5uZWxNZXNzYWdlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubm9kZVByb2Nlc3Muc2VuZChjaGFubmVsRGF0YSk7XG4gICAgfVxuICAgIHJlY2VpdmVNZXNzYWdlKGNoYW5uZWxOYW1lLCBjaGFubmVsTWVzc2FnZSkge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gdXRpbHNfMS5DaGFubmVsTWVzc2FnZUNvZGVjLmRlc2VyaWFsaXplKGNoYW5uZWxNZXNzYWdlKTtcbiAgICAgICAgY29uc3QgZXZlbnROYW1lID0gcGF5bG9hZC5ldmVudE5hbWU7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBwYXlsb2FkLmFyZ3M7XG4gICAgICAgIGlmIChjaGFubmVsTmFtZSA9PT0gaW5kZXhfMS5DYXBhY2l0b3JOb2RlSlMuQ0hBTk5FTF9OQU1FX0FQUCAmJiBldmVudE5hbWUgPT09ICdyZWFkeScpIHtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lU3RhdHVzLnNldFJlYWR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2hhbm5lbE5hbWUgPT09IGluZGV4XzEuQ2FwYWNpdG9yTm9kZUpTLkNIQU5ORUxfTkFNRV9FVkVOVFMpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnROb3RpZmllci5jaGFubmVsUmVjZWl2ZShldmVudE5hbWUsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5DYXBhY2l0b3JOb2RlSlNJbXBsZW1lbnRhdGlvbiA9IENhcGFjaXRvck5vZGVKU0ltcGxlbWVudGF0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW1wbGVtZW50YXRpb24uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkNhcGFjaXRvck5vZGVKUyA9IHZvaWQgMDtcbmNvbnN0IGVsZWN0cm9uXzEgPSByZXF1aXJlKFwiZWxlY3Ryb25cIik7XG5jb25zdCBldmVudHNfMSA9IHJlcXVpcmUoXCJldmVudHNcIik7XG5jb25zdCBmc18xID0gcmVxdWlyZShcImZzXCIpO1xuY29uc3QgcGF0aF8xID0gcmVxdWlyZShcInBhdGhcIik7XG5jb25zdCBpbXBsZW1lbnRhdGlvbl8xID0gcmVxdWlyZShcIi4vaW1wbGVtZW50YXRpb25cIik7XG5jbGFzcyBQbHVnaW5TZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubm9kZURpciA9ICdub2RlanMnO1xuICAgICAgICB0aGlzLnN0YXJ0TW9kZSA9ICdhdXRvJztcbiAgICB9XG59XG5jbGFzcyBDYXBhY2l0b3JOb2RlSlMgZXh0ZW5kcyBldmVudHNfMS5FdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCAvKmNvbmZpZz86IFJlY29yZDxzdHJpbmcsIGFueT4qLykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvLyByZW1vdmVBbGxMaXN0ZW5lcnMoKSBmdW5jdGlvbiBpcyBtaXNzaW5nIChodHRwczovL2dpdGh1Yi5jb20vY2FwYWNpdG9yLWNvbW11bml0eS9lbGVjdHJvbi9wdWxsLzE4NSlcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8jZW5kcmVnaW9uXG4gICAgICAgIC8vI3JlZ2lvbiBQbHVnaW5FdmVudHNcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgdGhpcy5QbHVnaW5FdmVudE5vdGlmaWVyID0ge1xuICAgICAgICAgICAgLy8gQnJpZGdlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIGNoYW5uZWxSZWNlaXZlOiAoZXZlbnROYW1lLCBwYXlsb2FkQXJyYXkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUNoYW5uZWxMaXN0ZW5lcnMoZXZlbnROYW1lLCBwYXlsb2FkQXJyYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvL3RoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmltcGxlbWVudGF0aW9uID0gbmV3IGltcGxlbWVudGF0aW9uXzEuQ2FwYWNpdG9yTm9kZUpTSW1wbGVtZW50YXRpb24odGhpcy5QbHVnaW5FdmVudE5vdGlmaWVyKTtcbiAgICAgICAgdGhpcy5yZWFkUGx1Z2luU2V0dGluZ3MoKS50aGVuKHBsdWdpblNldHRpbmdzID0+IHtcbiAgICAgICAgICAgIGlmIChwbHVnaW5TZXR0aW5ncy5zdGFydE1vZGUgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1wbGVtZW50YXRpb24uc3RhcnRFbmdpbmUocGx1Z2luU2V0dGluZ3Mubm9kZURpcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyByZWFkUGx1Z2luU2V0dGluZ3MoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8hLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gd29ya2Fyb3VuZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gdGhlIGNvbmZpZ3VyYXRpb24gZXhwb3NlZCBieSB0aGUgY2FwYWNpdG9yLWNvbW11bml0eS9lbGVjdHJvbiBwbGF0Zm9ybVxuICAgICAgICAvLyBpcyBhbHdheXMgZW1wdHkgZm9yIHNvbWUgcmVhc29uXG4gICAgICAgIGNvbnN0IGNvbmZpZ1BhdGhCYXNlID0gcGF0aF8xLmpvaW4oZWxlY3Ryb25fMS5hcHAuZ2V0QXBwUGF0aCgpLCAnY2FwYWNpdG9yLmNvbmZpZy4nKTtcbiAgICAgICAgY29uc3QgY29uZmlnUGF0aEV4dCA9IGZzXzEuZXhpc3RzU3luYyhjb25maWdQYXRoQmFzZSArICdqc29uJykgPyAnanNvbicgOlxuICAgICAgICAgICAgZnNfMS5leGlzdHNTeW5jKGNvbmZpZ1BhdGhCYXNlICsgJ2pzJykgPyAnanMnIDpcbiAgICAgICAgICAgICAgICBmc18xLmV4aXN0c1N5bmMoY29uZmlnUGF0aEJhc2UgKyAndHMnKSA/ICd0cycgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGNvbmZpZ1BhdGggPSBjb25maWdQYXRoQmFzZSArIGNvbmZpZ1BhdGhFeHQ7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0ZpbGUgPSBhd2FpdCByZXF1aXJlKGNvbmZpZ1BhdGgpO1xuICAgICAgICBjb25zdCBjYXBhY2l0b3JDb25maWcgPSBjb25maWdGaWxlLmRlZmF1bHQgfHwgY29uZmlnRmlsZTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gKF9hID0gY2FwYWNpdG9yQ29uZmlnID09PSBudWxsIHx8IGNhcGFjaXRvckNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2FwYWNpdG9yQ29uZmlnLnBsdWdpbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5DYXBhY2l0b3JOb2RlSlM7XG4gICAgICAgIC8vIS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gbmV3IFBsdWdpblNldHRpbmdzKCk7XG4gICAgICAgIHNldHRpbmdzLm5vZGVEaXIgPSAoY29uZmlnID09PSBudWxsIHx8IGNvbmZpZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29uZmlnLm5vZGVEaXIpIHx8IHNldHRpbmdzLm5vZGVEaXI7XG4gICAgICAgIHNldHRpbmdzLnN0YXJ0TW9kZSA9IChjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcuc3RhcnRNb2RlKSB8fCBzZXR0aW5ncy5zdGFydE1vZGU7XG4gICAgICAgIHJldHVybiBzZXR0aW5ncztcbiAgICB9XG4gICAgLy8jcmVnaW9uIFBsdWdpbk1ldGhvZHNcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGFzeW5jIHN0YXJ0KGFyZ3MpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBwbHVnaW5TZXR0aW5ncyA9IGF3YWl0IHRoaXMucmVhZFBsdWdpblNldHRpbmdzKCk7XG4gICAgICAgIGlmIChwbHVnaW5TZXR0aW5ncy5zdGFydE1vZGUgIT09ICdtYW51YWwnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01hbnVhbCBzdGFydHVwIG9mIHRoZSBOb2RlLmpzIGVuZ2luZSBpcyBub3QgZW5hYmxlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9qZWN0RGlyID0gKF9hID0gYXJncyA9PT0gbnVsbCB8fCBhcmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcmdzLm5vZGVEaXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHBsdWdpblNldHRpbmdzLm5vZGVEaXI7XG4gICAgICAgIGNvbnN0IG5vZGVNYWluID0gYXJncyA9PT0gbnVsbCB8fCBhcmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcmdzLnNjcmlwdDtcbiAgICAgICAgY29uc3Qgbm9kZUFyZ3MgPSBhcmdzID09PSBudWxsIHx8IGFyZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFyZ3MuYXJncztcbiAgICAgICAgY29uc3Qgbm9kZUVudiA9IGFyZ3MgPT09IG51bGwgfHwgYXJncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXJncy5lbnY7XG4gICAgICAgIHRoaXMuaW1wbGVtZW50YXRpb24uc3RhcnRFbmdpbmUocHJvamVjdERpciwgbm9kZU1haW4sIG5vZGVBcmdzLCBub2RlRW52KTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZChhcmdzKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IGFyZ3MuZXZlbnROYW1lO1xuICAgICAgICBpZiAoZXZlbnROYW1lID09PSB1bmRlZmluZWQgfHwgZXZlbnROYW1lID09PSAnJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVxdWlyZWQgcGFyYW1ldGVyICdldmVudE5hbWUnIHdhcyBub3Qgc3BlY2lmaWVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdzLmFyZ3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXJncy5hcmdzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbXBsZW1lbnRhdGlvbi5zZW5kTWVzc2FnZShhcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgd2hlblJlYWR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbXBsZW1lbnRhdGlvbi5yZXNvbHZlV2hlblJlYWR5KCk7XG4gICAgfVxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8jZW5kcmVnaW9uXG4gICAgLy8jcmVnaW9uIFBsdWdpbkxpc3RlbmVyc1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgbm90aWZ5Q2hhbm5lbExpc3RlbmVycyhldmVudE5hbWUsIHBheWxvYWRBcnJheSkge1xuICAgICAgICBjb25zdCBhcmdzID0geyBhcmdzOiBwYXlsb2FkQXJyYXkgfTtcbiAgICAgICAgdGhpcy5lbWl0KGV2ZW50TmFtZSwgYXJncyk7XG4gICAgfVxufVxuZXhwb3J0cy5DYXBhY2l0b3JOb2RlSlMgPSBDYXBhY2l0b3JOb2RlSlM7XG5DYXBhY2l0b3JOb2RlSlMuQ0hBTk5FTF9OQU1FX0FQUCA9ICdBUFBfQ0hBTk5FTCc7XG5DYXBhY2l0b3JOb2RlSlMuQ0hBTk5FTF9OQU1FX0VWRU5UUyA9ICdFVkVOVF9DSEFOTkVMJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCB7IGdldERlZmF1bHRFeHBvcnRGcm9tQ2pzIH0gZnJvbSBcIlx1MDAwMGNvbW1vbmpzSGVscGVycy5qc1wiO1xuaW1wb3J0IHsgX19yZXF1aXJlIGFzIHJlcXVpcmVTcmMgfSBmcm9tIFwiL2hvbWUvY29kZS9wcm9qZWN0cy9oYW1wb2Vsei9DYXBhY2l0b3ItTm9kZUpTL2VsZWN0cm9uL2J1aWxkL2VsZWN0cm9uL3NyYy9pbmRleC5qc1wiO1xudmFyIHNyY0V4cG9ydHMgPSByZXF1aXJlU3JjKCk7XG5leHBvcnQgeyBzcmNFeHBvcnRzIGFzIF9fbW9kdWxlRXhwb3J0cyB9O2V4cG9ydCBkZWZhdWx0IC8qQF9fUFVSRV9fKi9nZXREZWZhdWx0RXhwb3J0RnJvbUNqcyhzcmNFeHBvcnRzKTsiXSwibmFtZXMiOlsidXRpbHMiLCJyZXF1aXJlJCQwIiwicmVxdWlyZSQkMSIsInJlcXVpcmUkJDIiLCJyZXF1aXJlJCQzIiwicmVxdWlyZSQkNCIsInJlcXVpcmUkJDUiLCJyZXF1aXJlJCQ2Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQU0sQ0FBQyxjQUFjLENBQUNBLE9BQU8sRUFBRSxZQUFZLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUNuQ0EsT0FBQSxDQUFBLG1CQUFBLEdBQUcsS0FBSyxFQUFFO0FBQ3JDLE1BQU0sbUJBQW1CLENBQUM7QUFDMUIsSUFBSSxPQUFPLFNBQVMsQ0FBQyxPQUFPLEVBQUU7QUFDOUIsUUFBUSxNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQzVD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
